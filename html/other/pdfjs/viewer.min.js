"use strict";if(typeof PDFJS==="undefined"){(typeof window!=="undefined"?window:this).PDFJS={}}(function checkTypedArrayCompatibility(){if(typeof Uint8Array!=="undefined"){if(typeof Uint8Array.prototype.subarray==="undefined"){Uint8Array.prototype.subarray=function subarray(start,end){return new Uint8Array(this.slice(start,end))};Float32Array.prototype.subarray=function subarray(start,end){return new Float32Array(this.slice(start,end))}}if(typeof Float64Array==="undefined"){window.Float64Array=Float32Array}return}function subarray(start,end){return new TypedArray(this.slice(start,end))}function setArrayOffset(array,offset){if(arguments.length<2){offset=0}for(var i=0,n=array.length;i<n;++i,++offset){this[offset]=array[i]&255}}function TypedArray(arg1){var result,i,n;if(typeof arg1==="number"){result=[];for(i=0;i<arg1;++i){result[i]=0}}else if("slice"in arg1){result=arg1.slice(0)}else{result=[];for(i=0,n=arg1.length;i<n;++i){result[i]=arg1[i]}}result.subarray=subarray;result.buffer=result;result.byteLength=result.length;result.set=setArrayOffset;if(typeof arg1==="object"&&arg1.buffer){result.buffer=arg1.buffer}return result}window.Uint8Array=TypedArray;window.Int8Array=TypedArray;window.Uint32Array=TypedArray;window.Int32Array=TypedArray;window.Uint16Array=TypedArray;window.Float32Array=TypedArray;window.Float64Array=TypedArray})();(function normalizeURLObject(){if(!window.URL){window.URL=window.webkitURL}})();(function checkObjectDefinePropertyCompatibility(){if(typeof Object.defineProperty!=="undefined"){var definePropertyPossible=true;try{Object.defineProperty(new Image,"id",{value:"test"});var Test=function Test(){};Test.prototype={get id(){}};Object.defineProperty(new Test,"id",{value:"",configurable:true,enumerable:true,writable:false})}catch(e){definePropertyPossible=false}if(definePropertyPossible){return}}Object.defineProperty=function objectDefineProperty(obj,name,def){delete obj[name];if("get"in def){obj.__defineGetter__(name,def["get"])}if("set"in def){obj.__defineSetter__(name,def["set"])}if("value"in def){obj.__defineSetter__(name,function objectDefinePropertySetter(value){this.__defineGetter__(name,function objectDefinePropertyGetter(){return value});return value});obj[name]=def.value}}})();(function checkXMLHttpRequestResponseCompatibility(){var xhrPrototype=XMLHttpRequest.prototype;var xhr=new XMLHttpRequest;if(!("overrideMimeType"in xhr)){Object.defineProperty(xhrPrototype,"overrideMimeType",{value:function xmlHttpRequestOverrideMimeType(mimeType){}})}if("responseType"in xhr){return}PDFJS.disableWorker=true;if(typeof VBArray!=="undefined"){Object.defineProperty(xhrPrototype,"response",{get:function xmlHttpRequestResponseGet(){if(this.responseType==="arraybuffer"){return new Uint8Array(new VBArray(this.responseBody).toArray())}else{return this.responseText}}});return}function responseTypeSetter(){this.overrideMimeType("text/plain; charset=x-user-defined")}if(typeof xhr.overrideMimeType==="function"){Object.defineProperty(xhrPrototype,"responseType",{set:responseTypeSetter})}function responseGetter(){var text=this.responseText;var i,n=text.length;var result=new Uint8Array(n);for(i=0;i<n;++i){result[i]=text.charCodeAt(i)&255}return result.buffer}Object.defineProperty(xhrPrototype,"response",{get:responseGetter})})();(function checkWindowBtoaCompatibility(){if("btoa"in window){return}var digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";window.btoa=function windowBtoa(chars){var buffer="";var i,n;for(i=0,n=chars.length;i<n;i+=3){var b1=chars.charCodeAt(i)&255;var b2=chars.charCodeAt(i+1)&255;var b3=chars.charCodeAt(i+2)&255;var d1=b1>>2,d2=(b1&3)<<4|b2>>4;var d3=i+1<n?(b2&15)<<2|b3>>6:64;var d4=i+2<n?b3&63:64;buffer+=digits.charAt(d1)+digits.charAt(d2)+digits.charAt(d3)+digits.charAt(d4)}return buffer}})();(function checkWindowAtobCompatibility(){if("atob"in window){return}var digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";window.atob=function(input){input=input.replace(/=+$/,"");if(input.length%4===1){throw new Error("bad atob input")}for(var bc=0,bs,buffer,idx=0,output="";buffer=input.charAt(idx++);~buffer&&(bs=bc%4?bs*64+buffer:buffer,bc++%4)?output+=String.fromCharCode(255&bs>>(-2*bc&6)):0){buffer=digits.indexOf(buffer)}return output}})();(function checkFunctionPrototypeBindCompatibility(){if(typeof Function.prototype.bind!=="undefined"){return}Function.prototype.bind=function functionPrototypeBind(obj){var fn=this,headArgs=Array.prototype.slice.call(arguments,1);var bound=function functionPrototypeBindBound(){var args=headArgs.concat(Array.prototype.slice.call(arguments));return fn.apply(obj,args)};return bound}})();(function checkDatasetProperty(){var div=document.createElement("div");if("dataset"in div){return}Object.defineProperty(HTMLElement.prototype,"dataset",{get:function(){if(this._dataset){return this._dataset}var dataset={};for(var j=0,jj=this.attributes.length;j<jj;j++){var attribute=this.attributes[j];if(attribute.name.substring(0,5)!=="data-"){continue}var key=attribute.name.substring(5).replace(/\-([a-z])/g,function(all,ch){return ch.toUpperCase()});dataset[key]=attribute.value}Object.defineProperty(this,"_dataset",{value:dataset,writable:false,enumerable:false});return dataset},enumerable:true})})();(function checkClassListProperty(){var div=document.createElement("div");if("classList"in div){return}function changeList(element,itemName,add,remove){var s=element.className||"";var list=s.split(/\s+/g);if(list[0]===""){list.shift()}var index=list.indexOf(itemName);if(index<0&&add){list.push(itemName)}if(index>=0&&remove){list.splice(index,1)}element.className=list.join(" ");return index>=0}var classListPrototype={add:function(name){changeList(this.element,name,true,false)},contains:function(name){return changeList(this.element,name,false,false)},remove:function(name){changeList(this.element,name,false,true)},toggle:function(name){changeList(this.element,name,true,true)}};Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){if(this._classList){return this._classList}var classList=Object.create(classListPrototype,{element:{value:this,writable:false,enumerable:true}});Object.defineProperty(this,"_classList",{value:classList,writable:false,enumerable:false});return classList},enumerable:true})})();(function checkConsoleCompatibility(){if(!("console"in window)){window.console={log:function(){},error:function(){},warn:function(){}}}else if(!("bind"in console.log)){console.log=function(fn){return function(msg){return fn(msg)}}(console.log);console.error=function(fn){return function(msg){return fn(msg)}}(console.error);console.warn=function(fn){return function(msg){return fn(msg)}}(console.warn)}})();(function checkOnClickCompatibility(){function ignoreIfTargetDisabled(event){if(isDisabled(event.target)){event.stopPropagation()}}function isDisabled(node){return node.disabled||node.parentNode&&isDisabled(node.parentNode)}if(navigator.userAgent.indexOf("Opera")!==-1){document.addEventListener("click",ignoreIfTargetDisabled,true)}})();(function checkOnBlobSupport(){if(navigator.userAgent.indexOf("Trident")>=0){PDFJS.disableCreateObjectURL=true}})();(function checkNavigatorLanguage(){if("language"in navigator&&/^[a-z]+(-[A-Z]+)?$/.test(navigator.language)){return}function formatLocale(locale){var split=locale.split(/[-_]/);split[0]=split[0].toLowerCase();if(split.length>1){split[1]=split[1].toUpperCase()}return split.join("-")}var language=navigator.language||navigator.userLanguage||"en-US";PDFJS.locale=formatLocale(language)})();(function checkRangeRequests(){var isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0;var regex=/Android\s[0-2][^\d]/;var isOldAndroid=regex.test(navigator.userAgent);if(isSafari||isOldAndroid){PDFJS.disableRange=true}})();(function checkHistoryManipulation(){if(!history.pushState||navigator.userAgent.indexOf("Android 2.")>=0){PDFJS.disableHistory=true}})();(function checkSetPresenceInImageData(){if(window.CanvasPixelArray){if(typeof window.CanvasPixelArray.prototype.set!=="function"){window.CanvasPixelArray.prototype.set=function(arr){for(var i=0,ii=this.length;i<ii;i++){this[i]=arr[i]}}}}else{var polyfill=false,versionMatch;if(navigator.userAgent.indexOf("Chrom")>=0){versionMatch=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);polyfill=versionMatch&&parseInt(versionMatch[2])<21}else if(navigator.userAgent.indexOf("Android")>=0){polyfill=/Android\s[0-4][^\d]/g.test(navigator.userAgent)}else if(navigator.userAgent.indexOf("Safari")>=0){versionMatch=navigator.userAgent.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//);polyfill=versionMatch&&parseInt(versionMatch[1])<6}if(polyfill){var contextPrototype=window.CanvasRenderingContext2D.prototype;contextPrototype._createImageData=contextPrototype.createImageData;contextPrototype.createImageData=function(w,h){var imageData=this._createImageData(w,h);imageData.data.set=function(arr){for(var i=0,ii=this.length;i<ii;i++){this[i]=arr[i]}};return imageData}}}})();(function checkRequestAnimationFrame(){function fakeRequestAnimationFrame(callback){window.setTimeout(callback,20)}var isIOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);if(isIOS){window.requestAnimationFrame=fakeRequestAnimationFrame;return}if("requestAnimationFrame"in window){return}window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||fakeRequestAnimationFrame})();(function checkCanvasSizeLimitation(){var isIOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);var isAndroid=/Android/g.test(navigator.userAgent);if(isIOS||isAndroid){PDFJS.maxCanvasPixels=5242880}})();"use strict";document.webL10n=function(window,document,undefined){var gL10nData={};var gTextData="";var gTextProp="textContent";var gLanguage="";var gMacros={};var gReadyState="loading";var gAsyncResourceLoading=true;function getL10nResourceLinks(){return document.querySelectorAll('link[type="application/l10n"]')}function getL10nDictionary(){var script=document.querySelector('script[type="application/l10n"]');return script?JSON.parse(script.innerHTML):null}function getTranslatableChildren(element){return element?element.querySelectorAll("*[data-l10n-id]"):[]}function getL10nAttributes(element){if(!element)return{};var l10nId=element.getAttribute("data-l10n-id");var l10nArgs=element.getAttribute("data-l10n-args");var args={};if(l10nArgs){try{args=JSON.parse(l10nArgs)}catch(e){console.warn("could not parse arguments for #"+l10nId)}}return{id:l10nId,args:args}}function fireL10nReadyEvent(lang){var evtObject=document.createEvent("Event");evtObject.initEvent("localized",true,false);evtObject.language=lang;document.dispatchEvent(evtObject)}function xhrLoadText(url,onSuccess,onFailure,asynchronous){onSuccess=onSuccess||function _onSuccess(data){};onFailure=onFailure||function _onFailure(){console.warn(url+" not found.")};var xhr=new XMLHttpRequest;xhr.open("GET",url,asynchronous);if(xhr.overrideMimeType){xhr.overrideMimeType("text/plain; charset=utf-8")}xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status==200||xhr.status===0){onSuccess(xhr.responseText)}else{onFailure()}}};xhr.onerror=onFailure;xhr.ontimeout=onFailure;try{xhr.send(null)}catch(e){onFailure()}}function parseResource(href,lang,successCallback,failureCallback){var baseURL=href.replace(/[^\/]*$/,"")||"./";function evalString(text){if(text.lastIndexOf("\\")<0)return text;return text.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function parseProperties(text){var dictionary=[];var reBlank=/^\s*|\s*$/;var reComment=/^\s*#|^\s*$/;var reSection=/^\s*\[(.*)\]\s*$/;var reImport=/^\s*@import\s+url\((.*)\)\s*$/i;var reSplit=/^([^=\s]*)\s*=\s*(.+)$/;function parseRawLines(rawText,extendedSyntax){var entries=rawText.replace(reBlank,"").split(/[\r\n]+/);var currentLang="*";var genericLang=lang.replace(/-[a-z]+$/i,"");var skipLang=false;var match="";for(var i=0;i<entries.length;i++){var line=entries[i];if(reComment.test(line))continue;if(extendedSyntax){if(reSection.test(line)){match=reSection.exec(line);currentLang=match[1];skipLang=currentLang!=="*"&&currentLang!==lang&&currentLang!==genericLang;continue}else if(skipLang){continue}if(reImport.test(line)){match=reImport.exec(line);loadImport(baseURL+match[1])}}var tmp=line.match(reSplit);if(tmp&&tmp.length==3){dictionary[tmp[1]]=evalString(tmp[2])}}}function loadImport(url){xhrLoadText(url,function(content){parseRawLines(content,false)},null,false)}parseRawLines(text,true);return dictionary}xhrLoadText(href,function(response){gTextData+=response;var data=parseProperties(response);for(var key in data){var id,prop,index=key.lastIndexOf(".");if(index>0){id=key.substring(0,index);prop=key.substr(index+1)}else{id=key;prop=gTextProp}if(!gL10nData[id]){gL10nData[id]={}}gL10nData[id][prop]=data[key]}if(successCallback){successCallback()}},failureCallback,gAsyncResourceLoading)}function loadLocale(lang,callback){callback=callback||function _callback(){};clear();gLanguage=lang;var langLinks=getL10nResourceLinks();var langCount=langLinks.length;if(langCount===0){var dict=getL10nDictionary();if(dict&&dict.locales&&dict.default_locale){console.log("using the embedded JSON directory, early way out");gL10nData=dict.locales[lang]||dict.locales[dict.default_locale];callback()}else{console.log("no resource to load, early way out")}fireL10nReadyEvent(lang);gReadyState="complete";return}var onResourceLoaded=null;var gResourceCount=0;onResourceLoaded=function(){gResourceCount++;if(gResourceCount>=langCount){callback();fireL10nReadyEvent(lang);gReadyState="complete"}};function L10nResourceLink(link){var href=link.href;var type=link.type;this.load=function(lang,callback){var applied=lang;parseResource(href,lang,callback,function(){console.warn(href+" not found.");applied=""});return applied}}for(var i=0;i<langCount;i++){var resource=new L10nResourceLink(langLinks[i]);var rv=resource.load(lang,onResourceLoaded);if(rv!=lang){console.warn('"'+lang+'" resource not found');gLanguage=""}}}function clear(){gL10nData={};gTextData="";gLanguage=""}function getPluralRules(lang){var locales2rules={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function isIn(n,list){return list.indexOf(n)!==-1}function isBetween(n,start,end){return start<=n&&n<=end}var pluralRules={0:function(n){return"other"},1:function(n){if(isBetween(n%100,3,10))return"few";if(n===0)return"zero";if(isBetween(n%100,11,99))return"many";if(n==2)return"two";if(n==1)return"one";return"other"},2:function(n){if(n!==0&&n%10===0)return"many";if(n==2)return"two";if(n==1)return"one";return"other"},3:function(n){if(n==1)return"one";return"other"},4:function(n){if(isBetween(n,0,1))return"one";return"other"},5:function(n){if(isBetween(n,0,2)&&n!=2)return"one";return"other"},6:function(n){if(n===0)return"zero";if(n%10==1&&n%100!=11)return"one";return"other"},7:function(n){if(n==2)return"two";if(n==1)return"one";return"other"},8:function(n){if(isBetween(n,3,6))return"few";if(isBetween(n,7,10))return"many";if(n==2)return"two";if(n==1)return"one";return"other"},9:function(n){if(n===0||n!=1&&isBetween(n%100,1,19))return"few";if(n==1)return"one";return"other"},10:function(n){if(isBetween(n%10,2,9)&&!isBetween(n%100,11,19))return"few";if(n%10==1&&!isBetween(n%100,11,19))return"one";return"other"},11:function(n){if(isBetween(n%10,2,4)&&!isBetween(n%100,12,14))return"few";if(n%10===0||isBetween(n%10,5,9)||isBetween(n%100,11,14))return"many";if(n%10==1&&n%100!=11)return"one";return"other"},12:function(n){if(isBetween(n,2,4))return"few";if(n==1)return"one";return"other"},13:function(n){if(isBetween(n%10,2,4)&&!isBetween(n%100,12,14))return"few";if(n!=1&&isBetween(n%10,0,1)||isBetween(n%10,5,9)||isBetween(n%100,12,14))return"many";if(n==1)return"one";return"other"},14:function(n){if(isBetween(n%100,3,4))return"few";if(n%100==2)return"two";if(n%100==1)return"one";return"other"},15:function(n){if(n===0||isBetween(n%100,2,10))return"few";if(isBetween(n%100,11,19))return"many";if(n==1)return"one";return"other"},16:function(n){if(n%10==1&&n!=11)return"one";return"other"},17:function(n){if(n==3)return"few";if(n===0)return"zero";if(n==6)return"many";if(n==2)return"two";if(n==1)return"one";return"other"},18:function(n){if(n===0)return"zero";if(isBetween(n,0,2)&&n!==0&&n!=2)return"one";return"other"},19:function(n){if(isBetween(n,2,10))return"few";if(isBetween(n,0,1))return"one";return"other"},20:function(n){if((isBetween(n%10,3,4)||n%10==9)&&!(isBetween(n%100,10,19)||isBetween(n%100,70,79)||isBetween(n%100,90,99)))return"few";if(n%1e6===0&&n!==0)return"many";if(n%10==2&&!isIn(n%100,[12,72,92]))return"two";if(n%10==1&&!isIn(n%100,[11,71,91]))return"one";return"other"},21:function(n){if(n===0)return"zero";if(n==1)return"one";return"other"},22:function(n){if(isBetween(n,0,1)||isBetween(n,11,99))return"one";return"other"},23:function(n){if(isBetween(n%10,1,2)||n%20===0)return"one";return"other"},24:function(n){if(isBetween(n,3,10)||isBetween(n,13,19))return"few";if(isIn(n,[2,12]))return"two";if(isIn(n,[1,11]))return"one";return"other"}};var index=locales2rules[lang.replace(/-.*$/,"")];if(!(index in pluralRules)){console.warn("plural form unknown for ["+lang+"]");return function(){return"other"}}return pluralRules[index]}gMacros.plural=function(str,param,key,prop){var n=parseFloat(param);if(isNaN(n))return str;if(prop!=gTextProp)return str;if(!gMacros._pluralRules){gMacros._pluralRules=getPluralRules(gLanguage)}var index="["+gMacros._pluralRules(n)+"]";if(n===0&&key+"[zero]"in gL10nData){str=gL10nData[key+"[zero]"][prop]}else if(n==1&&key+"[one]"in gL10nData){str=gL10nData[key+"[one]"][prop]}else if(n==2&&key+"[two]"in gL10nData){str=gL10nData[key+"[two]"][prop]}else if(key+index in gL10nData){str=gL10nData[key+index][prop]}else if(key+"[other]"in gL10nData){str=gL10nData[key+"[other]"][prop]}return str};function getL10nData(key,args,fallback){var data=gL10nData[key];if(!data){console.warn("#"+key+" is undefined.");if(!fallback){return null}data=fallback}var rv={};for(var prop in data){var str=data[prop];str=substIndexes(str,args,key,prop);str=substArguments(str,args,key);rv[prop]=str}return rv}function substIndexes(str,args,key,prop){var reIndex=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/;var reMatch=reIndex.exec(str);if(!reMatch||!reMatch.length)return str;var macroName=reMatch[1];var paramName=reMatch[2];var param;if(args&&paramName in args){param=args[paramName]}else if(paramName in gL10nData){param=gL10nData[paramName]}if(macroName in gMacros){var macro=gMacros[macroName];str=macro(str,param,key,prop)}return str}function substArguments(str,args,key){var reArgs=/\{\{\s*(.+?)\s*\}\}/;var match=reArgs.exec(str);while(match){if(!match||match.length<2)return str;var arg=match[1];var sub="";if(args&&arg in args){sub=args[arg]}else if(arg in gL10nData){sub=gL10nData[arg][gTextProp]}else{console.log("argument {{"+arg+"}} for #"+key+" is undefined.");return str}str=str.substring(0,match.index)+sub+str.substr(match.index+match[0].length);match=reArgs.exec(str)}return str}function translateElement(element){var l10n=getL10nAttributes(element);if(!l10n.id)return;var data=getL10nData(l10n.id,l10n.args);if(!data){console.warn("#"+l10n.id+" is undefined.");return}if(data[gTextProp]){if(getChildElementCount(element)===0){element[gTextProp]=data[gTextProp]}else{var children=element.childNodes;var found=false;for(var i=0,l=children.length;i<l;i++){if(children[i].nodeType===3&&/\S/.test(children[i].nodeValue)){if(found){children[i].nodeValue=""}else{children[i].nodeValue=data[gTextProp];found=true}}}if(!found){var textNode=document.createTextNode(data[gTextProp]);element.insertBefore(textNode,element.firstChild)}}delete data[gTextProp]}for(var k in data){element[k]=data[k]}}function getChildElementCount(element){if(element.children){return element.children.length}if(typeof element.childElementCount!=="undefined"){return element.childElementCount}var count=0;for(var i=0;i<element.childNodes.length;i++){count+=element.nodeType===1?1:0}return count}function translateFragment(element){element=element||document.documentElement;var children=getTranslatableChildren(element);var elementCount=children.length;for(var i=0;i<elementCount;i++){translateElement(children[i])}translateElement(element)}return{get:function(key,args,fallbackString){var index=key.lastIndexOf(".");var prop=gTextProp;if(index>0){prop=key.substr(index+1);key=key.substring(0,index)}var fallback;if(fallbackString){fallback={};fallback[prop]=fallbackString}var data=getL10nData(key,args,fallback);if(data&&prop in data){return data[prop]}return"{{"+key+"}}"},getData:function(){return gL10nData},getText:function(){return gTextData},getLanguage:function(){return gLanguage},setLanguage:function(lang){loadLocale(lang,translateFragment)},getDirection:function(){var rtlList=["ar","he","fa","ps","ur"];return rtlList.indexOf(gLanguage)>=0?"rtl":"ltr"},translate:translateFragment,getReadyState:function(){return gReadyState},ready:function(callback){if(!callback){return}else if(gReadyState=="complete"||gReadyState=="interactive"){window.setTimeout(callback)}else if(document.addEventListener){document.addEventListener("localized",callback)}else if(document.attachEvent){document.documentElement.attachEvent("onpropertychange",function(e){if(e.propertyName==="localized"){callback()}})}}}}(window,document);if(typeof PDFJS==="undefined"){(typeof window!=="undefined"?window:this).PDFJS={}}PDFJS.version="1.0.712";PDFJS.build="6969ed4";(function pdfjsWrapper(){"use strict";"use strict";var globalScope=typeof window==="undefined"?this:window;var isWorker=typeof window==="undefined";var FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];var TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};var ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};var AnnotationType={WIDGET:1,TEXT:2,LINK:3};var StreamType={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9};var FontType={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10};if(!globalScope.PDFJS){globalScope.PDFJS={}}globalScope.PDFJS.pdfBug=false;PDFJS.VERBOSITY_LEVELS={errors:0,warnings:1,infos:5};var OPS=PDFJS.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};function info(msg){if(PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.infos){console.log("Info: "+msg)}}function warn(msg){if(PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.warnings){console.log("Warning: "+msg)}}function error(msg){if(arguments.length>1){var logArguments=["Error:"];logArguments.push.apply(logArguments,arguments);console.log.apply(console,logArguments);msg=[].join.call(arguments," ")}else{console.log("Error: "+msg)}console.log(backtrace());UnsupportedManager.notify(UNSUPPORTED_FEATURES.unknown);throw new Error(msg)}function backtrace(){try{throw new Error}catch(e){return e.stack?e.stack.split("\n").slice(2).join("\n"):""}}function assert(cond,msg){if(!cond){error(msg)}}var UNSUPPORTED_FEATURES=PDFJS.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"};var UnsupportedManager=PDFJS.UnsupportedManager=function UnsupportedManagerClosure(){var listeners=[];return{listen:function(cb){listeners.push(cb)},notify:function(featureId){warn('Unsupported feature "'+featureId+'"');for(var i=0,ii=listeners.length;i<ii;i++){listeners[i](featureId)}}}}();function combineUrl(baseUrl,url){if(!url){return baseUrl}if(/^[a-z][a-z0-9+\-.]*:/i.test(url)){return url}var i;if(url.charAt(0)==="/"){i=baseUrl.indexOf("://");if(url.charAt(1)==="/"){++i}else{i=baseUrl.indexOf("/",i+3)}return baseUrl.substring(0,i)+url}else{var pathLength=baseUrl.length;i=baseUrl.lastIndexOf("#");pathLength=i>=0?i:pathLength;i=baseUrl.lastIndexOf("?",pathLength);pathLength=i>=0?i:pathLength;var prefixLength=baseUrl.lastIndexOf("/",pathLength);return baseUrl.substring(0,prefixLength+1)+url}}function isValidUrl(url,allowRelative){if(!url){return false}var protocol=/^[a-z][a-z0-9+\-.]*(?=:)/i.exec(url);if(!protocol){return allowRelative}protocol=protocol[0].toLowerCase();switch(protocol){case"http":case"https":case"ftp":case"mailto":return true;default:return false}}PDFJS.isValidUrl=isValidUrl;function shadow(obj,prop,value){Object.defineProperty(obj,prop,{value:value,enumerable:true,configurable:true,writable:false});return value}var PasswordResponses=PDFJS.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var PasswordException=function PasswordExceptionClosure(){function PasswordException(msg,code){this.name="PasswordException";this.message=msg;this.code=code}PasswordException.prototype=new Error;PasswordException.constructor=PasswordException;return PasswordException}();var UnknownErrorException=function UnknownErrorExceptionClosure(){function UnknownErrorException(msg,details){this.name="UnknownErrorException";this.message=msg;this.details=details}UnknownErrorException.prototype=new Error;UnknownErrorException.constructor=UnknownErrorException;return UnknownErrorException}();var InvalidPDFException=function InvalidPDFExceptionClosure(){function InvalidPDFException(msg){this.name="InvalidPDFException";this.message=msg}InvalidPDFException.prototype=new Error;InvalidPDFException.constructor=InvalidPDFException;return InvalidPDFException}();var MissingPDFException=function MissingPDFExceptionClosure(){function MissingPDFException(msg){this.name="MissingPDFException";this.message=msg}MissingPDFException.prototype=new Error;MissingPDFException.constructor=MissingPDFException;return MissingPDFException}();var NotImplementedException=function NotImplementedExceptionClosure(){function NotImplementedException(msg){this.message=msg}NotImplementedException.prototype=new Error;NotImplementedException.prototype.name="NotImplementedException";NotImplementedException.constructor=NotImplementedException;return NotImplementedException}();var MissingDataException=function MissingDataExceptionClosure(){function MissingDataException(begin,end){this.begin=begin;this.end=end;this.message="Missing data ["+begin+", "+end+")"}MissingDataException.prototype=new Error;MissingDataException.prototype.name="MissingDataException";MissingDataException.constructor=MissingDataException;return MissingDataException}();var XRefParseException=function XRefParseExceptionClosure(){function XRefParseException(msg){this.message=msg}XRefParseException.prototype=new Error;XRefParseException.prototype.name="XRefParseException";XRefParseException.constructor=XRefParseException;return XRefParseException}();function bytesToString(bytes){var length=bytes.length;var MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT){return String.fromCharCode.apply(null,bytes)}var strBuf=[];for(var i=0;i<length;i+=MAX_ARGUMENT_COUNT){var chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length);var chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk))}return strBuf.join("")}function stringToBytes(str){var length=str.length;var bytes=new Uint8Array(length);for(var i=0;i<length;++i){bytes[i]=str.charCodeAt(i)&255}return bytes}function string32(value){return String.fromCharCode(value>>24&255,value>>16&255,value>>8&255,value&255)}function log2(x){var n=1,i=0;while(x>n){n<<=1;i++}return i}function readInt8(data,start){return data[start]<<24>>24}function readUint16(data,offset){return data[offset]<<8|data[offset+1]}function readUint32(data,offset){return(data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3])>>>0}function isLittleEndian(){var buffer8=new Uint8Array(2);buffer8[0]=1;var buffer16=new Uint16Array(buffer8.buffer);return buffer16[0]===1}Object.defineProperty(PDFJS,"isLittleEndian",{configurable:true,get:function PDFJS_isLittleEndian(){return shadow(PDFJS,"isLittleEndian",isLittleEndian())}});function hasCanvasTypedArrays(){var canvas=document.createElement("canvas");canvas.width=canvas.height=1;var ctx=canvas.getContext("2d");var imageData=ctx.createImageData(1,1);return typeof imageData.data.buffer!=="undefined"}Object.defineProperty(PDFJS,"hasCanvasTypedArrays",{configurable:true,get:function PDFJS_hasCanvasTypedArrays(){return shadow(PDFJS,"hasCanvasTypedArrays",hasCanvasTypedArrays())}});var Uint32ArrayView=function Uint32ArrayViewClosure(){function Uint32ArrayView(buffer,length){this.buffer=buffer;this.byteLength=buffer.length;this.length=length===undefined?this.byteLength>>2:length;ensureUint32ArrayViewProps(this.length)}Uint32ArrayView.prototype=Object.create(null);var uint32ArrayViewSetters=0;function createUint32ArrayProp(index){return{get:function(){var buffer=this.buffer,offset=index<<2;return(buffer[offset]|buffer[offset+1]<<8|buffer[offset+2]<<16|buffer[offset+3]<<24)>>>0},set:function(value){var buffer=this.buffer,offset=index<<2;buffer[offset]=value&255;buffer[offset+1]=value>>8&255;buffer[offset+2]=value>>16&255;buffer[offset+3]=value>>>24&255}}}function ensureUint32ArrayViewProps(length){while(uint32ArrayViewSetters<length){Object.defineProperty(Uint32ArrayView.prototype,uint32ArrayViewSetters,createUint32ArrayProp(uint32ArrayViewSetters));uint32ArrayViewSetters++}}return Uint32ArrayView}();var IDENTITY_MATRIX=[1,0,0,1,0,0];var Util=PDFJS.Util=function UtilClosure(){function Util(){}var rgbBuf=["rgb(",0,",",0,",",0,")"];Util.makeCssRgb=function Util_makeCssRgb(rgb){rgbBuf[1]=rgb[0];rgbBuf[3]=rgb[1];rgbBuf[5]=rgb[2];return rgbBuf.join("")};Util.transform=function Util_transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]]
};Util.applyTransform=function Util_applyTransform(p,m){var xt=p[0]*m[0]+p[1]*m[2]+m[4];var yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt]};Util.applyInverseTransform=function Util_applyInverseTransform(p,m){var d=m[0]*m[3]-m[1]*m[2];var xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d;var yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d;return[xt,yt]};Util.getAxialAlignedBoundingBox=function Util_getAxialAlignedBoundingBox(r,m){var p1=Util.applyTransform(r,m);var p2=Util.applyTransform(r.slice(2,4),m);var p3=Util.applyTransform([r[0],r[3]],m);var p4=Util.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])]};Util.inverseTransform=function Util_inverseTransform(m){var d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d]};Util.apply3dTransform=function Util_apply3dTransform(m,v){return[m[0]*v[0]+m[1]*v[1]+m[2]*v[2],m[3]*v[0]+m[4]*v[1]+m[5]*v[2],m[6]*v[0]+m[7]*v[1]+m[8]*v[2]]};Util.singularValueDecompose2dScale=function Util_singularValueDecompose2dScale(m){var transpose=[m[0],m[2],m[1],m[3]];var a=m[0]*transpose[0]+m[1]*transpose[2];var b=m[0]*transpose[1]+m[1]*transpose[3];var c=m[2]*transpose[0]+m[3]*transpose[2];var d=m[2]*transpose[1]+m[3]*transpose[3];var first=(a+d)/2;var second=Math.sqrt((a+d)*(a+d)-4*(a*d-c*b))/2;var sx=first+second||1;var sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)]};Util.normalizeRect=function Util_normalizeRect(rect){var r=rect.slice(0);if(rect[0]>rect[2]){r[0]=rect[2];r[2]=rect[0]}if(rect[1]>rect[3]){r[1]=rect[3];r[3]=rect[1]}return r};Util.intersect=function Util_intersect(rect1,rect2){function compare(a,b){return a-b}var orderedX=[rect1[0],rect1[2],rect2[0],rect2[2]].sort(compare),orderedY=[rect1[1],rect1[3],rect2[1],rect2[3]].sort(compare),result=[];rect1=Util.normalizeRect(rect1);rect2=Util.normalizeRect(rect2);if(orderedX[0]===rect1[0]&&orderedX[1]===rect2[0]||orderedX[0]===rect2[0]&&orderedX[1]===rect1[0]){result[0]=orderedX[1];result[2]=orderedX[2]}else{return false}if(orderedY[0]===rect1[1]&&orderedY[1]===rect2[1]||orderedY[0]===rect2[1]&&orderedY[1]===rect1[1]){result[1]=orderedY[1];result[3]=orderedY[2]}else{return false}return result};Util.sign=function Util_sign(num){return num<0?-1:1};Util.appendToArray=function Util_appendToArray(arr1,arr2){Array.prototype.push.apply(arr1,arr2)};Util.prependToArray=function Util_prependToArray(arr1,arr2){Array.prototype.unshift.apply(arr1,arr2)};Util.extendObj=function extendObj(obj1,obj2){for(var key in obj2){obj1[key]=obj2[key]}};Util.getInheritableProperty=function Util_getInheritableProperty(dict,name){while(dict&&!dict.has(name)){dict=dict.get("Parent")}if(!dict){return null}return dict.get(name)};Util.inherit=function Util_inherit(sub,base,prototype){sub.prototype=Object.create(base.prototype);sub.prototype.constructor=sub;for(var prop in prototype){sub.prototype[prop]=prototype[prop]}};Util.loadScript=function Util_loadScript(src,callback){var script=document.createElement("script");var loaded=false;script.setAttribute("src",src);if(callback){script.onload=function(){if(!loaded){callback()}loaded=true}}document.getElementsByTagName("head")[0].appendChild(script)};return Util}();var PageViewport=PDFJS.PageViewport=function PageViewportClosure(){function PageViewport(viewBox,scale,rotation,offsetX,offsetY,dontFlip){this.viewBox=viewBox;this.scale=scale;this.rotation=rotation;this.offsetX=offsetX;this.offsetY=offsetY;var centerX=(viewBox[2]+viewBox[0])/2;var centerY=(viewBox[3]+viewBox[1])/2;var rotateA,rotateB,rotateC,rotateD;rotation=rotation%360;rotation=rotation<0?rotation+360:rotation;switch(rotation){case 180:rotateA=-1;rotateB=0;rotateC=0;rotateD=1;break;case 90:rotateA=0;rotateB=1;rotateC=1;rotateD=0;break;case 270:rotateA=0;rotateB=-1;rotateC=-1;rotateD=0;break;default:rotateA=1;rotateB=0;rotateC=0;rotateD=-1;break}if(dontFlip){rotateC=-rotateC;rotateD=-rotateD}var offsetCanvasX,offsetCanvasY;var width,height;if(rotateA===0){offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX;offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY;width=Math.abs(viewBox[3]-viewBox[1])*scale;height=Math.abs(viewBox[2]-viewBox[0])*scale}else{offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX;offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY;width=Math.abs(viewBox[2]-viewBox[0])*scale;height=Math.abs(viewBox[3]-viewBox[1])*scale}this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY];this.width=width;this.height=height;this.fontScale=scale}PageViewport.prototype={clone:function PageViewPort_clone(args){args=args||{};var scale="scale"in args?args.scale:this.scale;var rotation="rotation"in args?args.rotation:this.rotation;return new PageViewport(this.viewBox.slice(),scale,rotation,this.offsetX,this.offsetY,args.dontFlip)},convertToViewportPoint:function PageViewport_convertToViewportPoint(x,y){return Util.applyTransform([x,y],this.transform)},convertToViewportRectangle:function PageViewport_convertToViewportRectangle(rect){var tl=Util.applyTransform([rect[0],rect[1]],this.transform);var br=Util.applyTransform([rect[2],rect[3]],this.transform);return[tl[0],tl[1],br[0],br[1]]},convertToPdfPoint:function PageViewport_convertToPdfPoint(x,y){return Util.applyInverseTransform([x,y],this.transform)}};return PageViewport}();var PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToPDFString(str){var i,n=str.length,strBuf=[];if(str[0]==="þ"&&str[1]==="ÿ"){for(i=2;i<n;i+=2){strBuf.push(String.fromCharCode(str.charCodeAt(i)<<8|str.charCodeAt(i+1)))}}else{for(i=0;i<n;++i){var code=PDFStringTranslateTable[str.charCodeAt(i)];strBuf.push(code?String.fromCharCode(code):str.charAt(i))}}return strBuf.join("")}function stringToUTF8String(str){return decodeURIComponent(escape(str))}function isEmptyObj(obj){for(var key in obj){return false}return true}function isBool(v){return typeof v==="boolean"}function isInt(v){return typeof v==="number"&&(v|0)===v}function isNum(v){return typeof v==="number"}function isString(v){return typeof v==="string"}function isNull(v){return v===null}function isName(v){return v instanceof Name}function isCmd(v,cmd){return v instanceof Cmd&&(cmd===undefined||v.cmd===cmd)}function isDict(v,type){if(!(v instanceof Dict)){return false}if(!type){return true}var dictType=v.get("Type");return isName(dictType)&&dictType.name===type}function isArray(v){return v instanceof Array}function isStream(v){return typeof v==="object"&&v!==null&&v.getBytes!==undefined}function isArrayBuffer(v){return typeof v==="object"&&v!==null&&v.byteLength!==undefined}function isRef(v){return v instanceof Ref}function createPromiseCapability(){var capability={};capability.promise=new Promise(function(resolve,reject){capability.resolve=resolve;capability.reject=reject});return capability}PDFJS.createPromiseCapability=createPromiseCapability;(function PromiseClosure(){if(globalScope.Promise){if(typeof globalScope.Promise.all!=="function"){globalScope.Promise.all=function(iterable){var count=0,results=[],resolve,reject;var promise=new globalScope.Promise(function(resolve_,reject_){resolve=resolve_;reject=reject_});iterable.forEach(function(p,i){count++;p.then(function(result){results[i]=result;count--;if(count===0){resolve(results)}},reject)});if(count===0){resolve(results)}return promise}}if(typeof globalScope.Promise.resolve!=="function"){globalScope.Promise.resolve=function(value){return new globalScope.Promise(function(resolve){resolve(value)})}}if(typeof globalScope.Promise.reject!=="function"){globalScope.Promise.reject=function(reason){return new globalScope.Promise(function(resolve,reject){reject(reason)})}}if(typeof globalScope.Promise.prototype.catch!=="function"){globalScope.Promise.prototype.catch=function(onReject){return globalScope.Promise.prototype.then(undefined,onReject)}}return}var STATUS_PENDING=0;var STATUS_RESOLVED=1;var STATUS_REJECTED=2;var REJECTION_TIMEOUT=500;var HandlerManager={handlers:[],running:false,unhandledRejections:[],pendingRejectionCheck:false,scheduleHandlers:function scheduleHandlers(promise){if(promise._status===STATUS_PENDING){return}this.handlers=this.handlers.concat(promise._handlers);promise._handlers=[];if(this.running){return}this.running=true;setTimeout(this.runHandlers.bind(this),0)},runHandlers:function runHandlers(){var RUN_TIMEOUT=1;var timeoutAt=Date.now()+RUN_TIMEOUT;while(this.handlers.length>0){var handler=this.handlers.shift();var nextStatus=handler.thisPromise._status;var nextValue=handler.thisPromise._value;try{if(nextStatus===STATUS_RESOLVED){if(typeof handler.onResolve==="function"){nextValue=handler.onResolve(nextValue)}}else if(typeof handler.onReject==="function"){nextValue=handler.onReject(nextValue);nextStatus=STATUS_RESOLVED;if(handler.thisPromise._unhandledRejection){this.removeUnhandeledRejection(handler.thisPromise)}}}catch(ex){nextStatus=STATUS_REJECTED;nextValue=ex}handler.nextPromise._updateStatus(nextStatus,nextValue);if(Date.now()>=timeoutAt){break}}if(this.handlers.length>0){setTimeout(this.runHandlers.bind(this),0);return}this.running=false},addUnhandledRejection:function addUnhandledRejection(promise){this.unhandledRejections.push({promise:promise,time:Date.now()});this.scheduleRejectionCheck()},removeUnhandeledRejection:function removeUnhandeledRejection(promise){promise._unhandledRejection=false;for(var i=0;i<this.unhandledRejections.length;i++){if(this.unhandledRejections[i].promise===promise){this.unhandledRejections.splice(i);i--}}},scheduleRejectionCheck:function scheduleRejectionCheck(){if(this.pendingRejectionCheck){return}this.pendingRejectionCheck=true;setTimeout(function rejectionCheck(){this.pendingRejectionCheck=false;var now=Date.now();for(var i=0;i<this.unhandledRejections.length;i++){if(now-this.unhandledRejections[i].time>REJECTION_TIMEOUT){var unhandled=this.unhandledRejections[i].promise._value;var msg="Unhandled rejection: "+unhandled;if(unhandled.stack){msg+="\n"+unhandled.stack}warn(msg);this.unhandledRejections.splice(i);i--}}if(this.unhandledRejections.length){this.scheduleRejectionCheck()}}.bind(this),REJECTION_TIMEOUT)}};function Promise(resolver){this._status=STATUS_PENDING;this._handlers=[];try{resolver.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(e){this._reject(e)}}Promise.all=function Promise_all(promises){var resolveAll,rejectAll;var deferred=new Promise(function(resolve,reject){resolveAll=resolve;rejectAll=reject});var unresolved=promises.length;var results=[];if(unresolved===0){resolveAll(results);return deferred}function reject(reason){if(deferred._status===STATUS_REJECTED){return}results=[];rejectAll(reason)}for(var i=0,ii=promises.length;i<ii;++i){var promise=promises[i];var resolve=function(i){return function(value){if(deferred._status===STATUS_REJECTED){return}results[i]=value;unresolved--;if(unresolved===0){resolveAll(results)}}}(i);if(Promise.isPromise(promise)){promise.then(resolve,reject)}else{resolve(promise)}}return deferred};Promise.isPromise=function Promise_isPromise(value){return value&&typeof value.then==="function"};Promise.resolve=function Promise_resolve(value){return new Promise(function(resolve){resolve(value)})};Promise.reject=function Promise_reject(reason){return new Promise(function(resolve,reject){reject(reason)})};Promise.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function Promise__updateStatus(status,value){if(this._status===STATUS_RESOLVED||this._status===STATUS_REJECTED){return}if(status===STATUS_RESOLVED&&Promise.isPromise(value)){value.then(this._updateStatus.bind(this,STATUS_RESOLVED),this._updateStatus.bind(this,STATUS_REJECTED));return}this._status=status;this._value=value;if(status===STATUS_REJECTED&&this._handlers.length===0){this._unhandledRejection=true;HandlerManager.addUnhandledRejection(this)}HandlerManager.scheduleHandlers(this)},_resolve:function Promise_resolve(value){this._updateStatus(STATUS_RESOLVED,value)},_reject:function Promise_reject(reason){this._updateStatus(STATUS_REJECTED,reason)},then:function Promise_then(onResolve,onReject){var nextPromise=new Promise(function(resolve,reject){this.resolve=resolve;this.reject=reject});this._handlers.push({thisPromise:this,onResolve:onResolve,onReject:onReject,nextPromise:nextPromise});HandlerManager.scheduleHandlers(this);return nextPromise},"catch":function Promise_catch(onReject){return this.then(undefined,onReject)}};globalScope.Promise=Promise})();var StatTimer=function StatTimerClosure(){function rpad(str,pad,length){while(str.length<length){str+=pad}return str}function StatTimer(){this.started={};this.times=[];this.enabled=true}StatTimer.prototype={time:function StatTimer_time(name){if(!this.enabled){return}if(name in this.started){warn("Timer is already running for "+name)}this.started[name]=Date.now()},timeEnd:function StatTimer_timeEnd(name){if(!this.enabled){return}if(!(name in this.started)){warn("Timer has not been started for "+name)}this.times.push({name:name,start:this.started[name],end:Date.now()});delete this.started[name]},toString:function StatTimer_toString(){var i,ii;var times=this.times;var out="";var longest=0;for(i=0,ii=times.length;i<ii;++i){var name=times[i]["name"];if(name.length>longest){longest=name.length}}for(i=0,ii=times.length;i<ii;++i){var span=times[i];var duration=span.end-span.start;out+=rpad(span["name"]," ",longest)+" "+duration+"ms\n"}return out}};return StatTimer}();PDFJS.createBlob=function createBlob(data,contentType){if(typeof Blob!=="undefined"){return new Blob([data],{type:contentType})}var bb=new MozBlobBuilder;bb.append(data);return bb.getBlob(contentType)};PDFJS.createObjectURL=function createObjectURLClosure(){var digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function createObjectURL(data,contentType){if(!PDFJS.disableCreateObjectURL&&typeof URL!=="undefined"&&URL.createObjectURL){var blob=PDFJS.createBlob(data,contentType);return URL.createObjectURL(blob)}var buffer="data:"+contentType+";base64,";for(var i=0,ii=data.length;i<ii;i+=3){var b1=data[i]&255;var b2=data[i+1]&255;var b3=data[i+2]&255;var d1=b1>>2,d2=(b1&3)<<4|b2>>4;var d3=i+1<ii?(b2&15)<<2|b3>>6:64;var d4=i+2<ii?b3&63:64;buffer+=digits[d1]+digits[d2]+digits[d3]+digits[d4]}return buffer}}();function MessageHandler(name,comObj){this.name=name;this.comObj=comObj;this.callbackIndex=1;this.postMessageTransfers=true;var callbacksCapabilities=this.callbacksCapabilities={};var ah=this.actionHandler={};ah["console_log"]=[function ahConsoleLog(data){console.log.apply(console,data)}];ah["console_error"]=[function ahConsoleError(data){console.error.apply(console,data)}];ah["_unsupported_feature"]=[function ah_unsupportedFeature(data){UnsupportedManager.notify(data)}];comObj.onmessage=function messageHandlerComObjOnMessage(event){var data=event.data;if(data.isReply){var callbackId=data.callbackId;if(data.callbackId in callbacksCapabilities){var callback=callbacksCapabilities[callbackId];delete callbacksCapabilities[callbackId];if("error"in data){callback.reject(data.error)}else{callback.resolve(data.data)}}else{error("Cannot resolve callback "+callbackId)}}else if(data.action in ah){var action=ah[data.action];if(data.callbackId){Promise.resolve().then(function(){return action[0].call(action[1],data.data)}).then(function(result){comObj.postMessage({isReply:true,callbackId:data.callbackId,data:result})},function(reason){comObj.postMessage({isReply:true,callbackId:data.callbackId,error:reason})})}else{action[0].call(action[1],data.data)}}else{error("Unknown action from worker: "+data.action)}}}MessageHandler.prototype={on:function messageHandlerOn(actionName,handler,scope){var ah=this.actionHandler;if(ah[actionName]){error('There is already an actionName called "'+actionName+'"')}ah[actionName]=[handler,scope]},send:function messageHandlerSend(actionName,data,transfers){var message={action:actionName,data:data};this.postMessage(message,transfers)},sendWithPromise:function messageHandlerSendWithPromise(actionName,data,transfers){var callbackId=this.callbackIndex++;var message={action:actionName,data:data,callbackId:callbackId};var capability=createPromiseCapability();this.callbacksCapabilities[callbackId]=capability;try{this.postMessage(message,transfers)}catch(e){capability.reject(e)}return capability.promise},postMessage:function(message,transfers){if(transfers&&this.postMessageTransfers){this.comObj.postMessage(message,transfers)}else{this.comObj.postMessage(message)}}};function loadJpegStream(id,imageUrl,objs){var img=new Image;img.onload=function loadJpegStream_onloadClosure(){objs.resolve(id,img)};img.onerror=function loadJpegStream_onerrorClosure(){objs.resolve(id,null);warn("Error during JPEG image loading")};img.src=imageUrl}PDFJS.maxImageSize=PDFJS.maxImageSize===undefined?-1:PDFJS.maxImageSize;PDFJS.cMapUrl=PDFJS.cMapUrl===undefined?null:PDFJS.cMapUrl;PDFJS.cMapPacked=PDFJS.cMapPacked===undefined?false:PDFJS.cMapPacked;PDFJS.disableFontFace=PDFJS.disableFontFace===undefined?false:PDFJS.disableFontFace;PDFJS.imageResourcesPath=PDFJS.imageResourcesPath===undefined?"":PDFJS.imageResourcesPath;PDFJS.disableWorker=PDFJS.disableWorker===undefined?false:PDFJS.disableWorker;PDFJS.workerSrc=PDFJS.workerSrc===undefined?null:PDFJS.workerSrc;PDFJS.disableRange=PDFJS.disableRange===undefined?false:PDFJS.disableRange;PDFJS.disableAutoFetch=PDFJS.disableAutoFetch===undefined?false:PDFJS.disableAutoFetch;PDFJS.pdfBug=PDFJS.pdfBug===undefined?false:PDFJS.pdfBug;PDFJS.postMessageTransfers=PDFJS.postMessageTransfers===undefined?true:PDFJS.postMessageTransfers;PDFJS.disableCreateObjectURL=PDFJS.disableCreateObjectURL===undefined?false:PDFJS.disableCreateObjectURL;PDFJS.disableWebGL=PDFJS.disableWebGL===undefined?true:PDFJS.disableWebGL;PDFJS.useOnlyCssZoom=PDFJS.useOnlyCssZoom===undefined?false:PDFJS.useOnlyCssZoom;PDFJS.verbosity=PDFJS.verbosity===undefined?PDFJS.VERBOSITY_LEVELS.warnings:PDFJS.verbosity;PDFJS.maxCanvasPixels=PDFJS.maxCanvasPixels===undefined?16777216:PDFJS.maxCanvasPixels;PDFJS.getDocument=function getDocument(source,pdfDataRangeTransport,passwordCallback,progressCallback){var workerInitializedCapability,workerReadyCapability,transport;if(typeof source==="string"){source={url:source}}else if(isArrayBuffer(source)){source={data:source}}else if(typeof source!=="object"){error("Invalid parameter in getDocument, need either Uint8Array, "+"string or a parameter object")}if(!source.url&&!source.data){error("Invalid parameter array, need either .data or .url")}var params={};for(var key in source){if(key==="url"&&typeof window!=="undefined"){params[key]=combineUrl(window.location.href,source[key]);continue}params[key]=source[key]}workerInitializedCapability=createPromiseCapability();workerReadyCapability=createPromiseCapability();transport=new WorkerTransport(workerInitializedCapability,workerReadyCapability,pdfDataRangeTransport,progressCallback);workerInitializedCapability.promise.then(function transportInitialized(){transport.passwordCallback=passwordCallback;transport.fetchDocument(params)});return workerReadyCapability.promise};var PDFDocumentProxy=function PDFDocumentProxyClosure(){function PDFDocumentProxy(pdfInfo,transport){this.pdfInfo=pdfInfo;this.transport=transport}PDFDocumentProxy.prototype={get numPages(){return this.pdfInfo.numPages},get fingerprint(){return this.pdfInfo.fingerprint},getPage:function PDFDocumentProxy_getPage(pageNumber){return this.transport.getPage(pageNumber)},getPageIndex:function PDFDocumentProxy_getPageIndex(ref){return this.transport.getPageIndex(ref)},getDestinations:function PDFDocumentProxy_getDestinations(){return this.transport.getDestinations()},getAttachments:function PDFDocumentProxy_getAttachments(){return this.transport.getAttachments()},getJavaScript:function PDFDocumentProxy_getJavaScript(){return this.transport.getJavaScript()},getOutline:function PDFDocumentProxy_getOutline(){return this.transport.getOutline()},getMetadata:function PDFDocumentProxy_getMetadata(){return this.transport.getMetadata()},getData:function PDFDocumentProxy_getData(){return this.transport.getData()},getDownloadInfo:function PDFDocumentProxy_getDownloadInfo(){return this.transport.downloadInfoCapability.promise},getStats:function PDFDocumentProxy_getStats(){return this.transport.getStats()},cleanup:function PDFDocumentProxy_cleanup(){this.transport.startCleanup()},destroy:function PDFDocumentProxy_destroy(){this.transport.destroy()}};return PDFDocumentProxy}();var PDFPageProxy=function PDFPageProxyClosure(){function PDFPageProxy(pageIndex,pageInfo,transport){this.pageIndex=pageIndex;this.pageInfo=pageInfo;this.transport=transport;this.stats=new StatTimer;this.stats.enabled=!!globalScope.PDFJS.enableStats;this.commonObjs=transport.commonObjs;this.objs=new PDFObjects;this.cleanupAfterRender=false;this.pendingDestroy=false;this.intentStates={}}PDFPageProxy.prototype={get pageNumber(){return this.pageIndex+1},get rotate(){return this.pageInfo.rotate},get ref(){return this.pageInfo.ref},get view(){return this.pageInfo.view},getViewport:function PDFPageProxy_getViewport(scale,rotate){if(arguments.length<2){rotate=this.rotate}return new PDFJS.PageViewport(this.view,scale,rotate,0,0)},getAnnotations:function PDFPageProxy_getAnnotations(){if(this.annotationsPromise){return this.annotationsPromise}var promise=this.transport.getAnnotations(this.pageIndex);this.annotationsPromise=promise;return promise},render:function PDFPageProxy_render(params){var stats=this.stats;stats.time("Overall");this.pendingDestroy=false;var renderingIntent=params.intent==="print"?"print":"display";if(!this.intentStates[renderingIntent]){this.intentStates[renderingIntent]={}}var intentState=this.intentStates[renderingIntent];if(!intentState.displayReadyCapability){intentState.receivingOperatorList=true;intentState.displayReadyCapability=createPromiseCapability();intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false};this.stats.time("Page Request");this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:renderingIntent})}var internalRenderTask=new InternalRenderTask(complete,params,this.objs,this.commonObjs,intentState.operatorList,this.pageNumber);if(!intentState.renderTasks){intentState.renderTasks=[]}intentState.renderTasks.push(internalRenderTask);var renderTask=new RenderTask(internalRenderTask);var self=this;intentState.displayReadyCapability.promise.then(function pageDisplayReadyPromise(transparency){if(self.pendingDestroy){complete();return}stats.time("Rendering");internalRenderTask.initalizeGraphics(transparency);internalRenderTask.operatorListChanged()},function pageDisplayReadPromiseError(reason){complete(reason)});function complete(error){var i=intentState.renderTasks.indexOf(internalRenderTask);if(i>=0){intentState.renderTasks.splice(i,1)}if(self.cleanupAfterRender){self.pendingDestroy=true}self._tryDestroy();if(error){internalRenderTask.capability.reject(error)}else{internalRenderTask.capability.resolve()}stats.timeEnd("Rendering");stats.timeEnd("Overall")}return renderTask},getOperatorList:function PDFPageProxy_getOperatorList(){function operatorListChanged(){if(intentState.operatorList.lastChunk){intentState.opListReadCapability.resolve(intentState.operatorList)}}var renderingIntent="oplist";if(!this.intentStates[renderingIntent]){this.intentStates[renderingIntent]={}}var intentState=this.intentStates[renderingIntent];if(!intentState.opListReadCapability){var opListTask={};opListTask.operatorListChanged=operatorListChanged;intentState.receivingOperatorList=true;intentState.opListReadCapability=createPromiseCapability();intentState.renderTasks=[];intentState.renderTasks.push(opListTask);intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false};this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:renderingIntent})}return intentState.opListReadCapability.promise},getTextContent:function PDFPageProxy_getTextContent(){return this.transport.messageHandler.sendWithPromise("GetTextContent",{pageIndex:this.pageNumber-1})},destroy:function PDFPageProxy_destroy(){this.pendingDestroy=true;this._tryDestroy()},_tryDestroy:function PDFPageProxy__destroy(){if(!this.pendingDestroy||Object.keys(this.intentStates).some(function(intent){var intentState=this.intentStates[intent];return intentState.renderTasks.length!==0||intentState.receivingOperatorList},this)){return}Object.keys(this.intentStates).forEach(function(intent){delete this.intentStates[intent]},this);this.objs.clear();this.annotationsPromise=null;this.pendingDestroy=false},_startRenderPage:function PDFPageProxy_startRenderPage(transparency,intent){var intentState=this.intentStates[intent];if(intentState.displayReadyCapability){intentState.displayReadyCapability.resolve(transparency)}},_renderPageChunk:function PDFPageProxy_renderPageChunk(operatorListChunk,intent){var intentState=this.intentStates[intent];var i,ii;for(i=0,ii=operatorListChunk.length;i<ii;i++){intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i])}intentState.operatorList.lastChunk=operatorListChunk.lastChunk;for(i=0;i<intentState.renderTasks.length;i++){intentState.renderTasks[i].operatorListChanged()}if(operatorListChunk.lastChunk){intentState.receivingOperatorList=false;this._tryDestroy()}}};return PDFPageProxy}();var WorkerTransport=function WorkerTransportClosure(){function WorkerTransport(workerInitializedCapability,workerReadyCapability,pdfDataRangeTransport,progressCallback){this.pdfDataRangeTransport=pdfDataRangeTransport;this.workerInitializedCapability=workerInitializedCapability;this.workerReadyCapability=workerReadyCapability;this.progressCallback=progressCallback;this.commonObjs=new PDFObjects;this.pageCache=[];this.pagePromises=[];this.downloadInfoCapability=createPromiseCapability();this.passwordCallback=null;if(!globalScope.PDFJS.disableWorker&&typeof Worker!=="undefined"){var workerSrc=PDFJS.workerSrc;if(!workerSrc){error("No PDFJS.workerSrc specified")}try{var worker=new Worker(workerSrc);var messageHandler=new MessageHandler("main",worker);this.messageHandler=messageHandler;messageHandler.on("test",function transportTest(data){var supportTypedArray=data&&data.supportTypedArray;if(supportTypedArray){this.worker=worker;if(!data.supportTransfers){PDFJS.postMessageTransfers=false}this.setupMessageHandler(messageHandler);workerInitializedCapability.resolve()}else{this.setupFakeWorker()}}.bind(this));var testObj=new Uint8Array([PDFJS.postMessageTransfers?255:0]);try{messageHandler.send("test",testObj,[testObj.buffer])}catch(ex){info("Cannot use postMessage transfers");testObj[0]=0;messageHandler.send("test",testObj)}return}catch(e){info("The worker has been disabled.")}}this.setupFakeWorker()}WorkerTransport.prototype={destroy:function WorkerTransport_destroy(){this.pageCache=[];this.pagePromises=[];var self=this;this.messageHandler.sendWithPromise("Terminate",null).then(function(){FontLoader.clear();if(self.worker){self.worker.terminate()}})},setupFakeWorker:function WorkerTransport_setupFakeWorker(){globalScope.PDFJS.disableWorker=true;if(!PDFJS.fakeWorkerFilesLoadedCapability){PDFJS.fakeWorkerFilesLoadedCapability=createPromiseCapability();Util.loadScript(PDFJS.workerSrc,function(){PDFJS.fakeWorkerFilesLoadedCapability.resolve()})}PDFJS.fakeWorkerFilesLoadedCapability.promise.then(function(){warn("Setting up fake worker.");var fakeWorker={postMessage:function WorkerTransport_postMessage(obj){fakeWorker.onmessage({data:obj})},terminate:function WorkerTransport_terminate(){}};var messageHandler=new MessageHandler("main",fakeWorker);this.setupMessageHandler(messageHandler);PDFJS.WorkerMessageHandler.setup(messageHandler);this.workerInitializedCapability.resolve()}.bind(this))},setupMessageHandler:function WorkerTransport_setupMessageHandler(messageHandler){this.messageHandler=messageHandler;function updatePassword(password){messageHandler.send("UpdatePassword",password)}var pdfDataRangeTransport=this.pdfDataRangeTransport;if(pdfDataRangeTransport){pdfDataRangeTransport.addRangeListener(function(begin,chunk){messageHandler.send("OnDataRange",{begin:begin,chunk:chunk})});pdfDataRangeTransport.addProgressListener(function(loaded){messageHandler.send("OnDataProgress",{loaded:loaded})});messageHandler.on("RequestDataRange",function transportDataRange(data){pdfDataRangeTransport.requestDataRange(data.begin,data.end)},this)}messageHandler.on("GetDoc",function transportDoc(data){var pdfInfo=data.pdfInfo;this.numPages=data.pdfInfo.numPages;var pdfDocument=new PDFDocumentProxy(pdfInfo,this);this.pdfDocument=pdfDocument;this.workerReadyCapability.resolve(pdfDocument)},this);messageHandler.on("NeedPassword",function transportPassword(data){if(this.passwordCallback){return this.passwordCallback(updatePassword,PasswordResponses.NEED_PASSWORD)}this.workerReadyCapability.reject(data.exception.message,data.exception)},this);messageHandler.on("IncorrectPassword",function transportBadPass(data){if(this.passwordCallback){return this.passwordCallback(updatePassword,PasswordResponses.INCORRECT_PASSWORD)}this.workerReadyCapability.reject(data.exception.message,data.exception)},this);messageHandler.on("InvalidPDF",function transportInvalidPDF(data){this.workerReadyCapability.reject(data.exception.name,data.exception)},this);messageHandler.on("MissingPDF",function transportMissingPDF(data){this.workerReadyCapability.reject(data.exception.message,data.exception)},this);messageHandler.on("UnknownError",function transportUnknownError(data){this.workerReadyCapability.reject(data.exception.message,data.exception)},this);messageHandler.on("DataLoaded",function transportPage(data){this.downloadInfoCapability.resolve(data)},this);messageHandler.on("StartRenderPage",function transportRender(data){var page=this.pageCache[data.pageIndex];page.stats.timeEnd("Page Request");page._startRenderPage(data.transparency,data.intent)},this);messageHandler.on("RenderPageChunk",function transportRender(data){var page=this.pageCache[data.pageIndex];page._renderPageChunk(data.operatorList,data.intent)},this);messageHandler.on("commonobj",function transportObj(data){var id=data[0];var type=data[1];if(this.commonObjs.hasData(id)){return}switch(type){case"Font":var exportedData=data[2];var font;if("error"in exportedData){var error=exportedData.error;warn("Error during font loading: "+error);this.commonObjs.resolve(id,error);break}else{font=new FontFace(exportedData)}FontLoader.bind([font],function fontReady(fontObjs){this.commonObjs.resolve(id,font)}.bind(this));break;case"FontPath":this.commonObjs.resolve(id,data[2]);break;default:error("Got unknown common object type "+type)}},this);messageHandler.on("obj",function transportObj(data){var id=data[0];var pageIndex=data[1];var type=data[2];var pageProxy=this.pageCache[pageIndex];var imageData;if(pageProxy.objs.hasData(id)){return}switch(type){case"JpegStream":imageData=data[3];loadJpegStream(id,imageData,pageProxy.objs);break;case"Image":imageData=data[3];pageProxy.objs.resolve(id,imageData);var MAX_IMAGE_SIZE_TO_STORE=8e6;if(imageData&&"data"in imageData&&imageData.data.length>MAX_IMAGE_SIZE_TO_STORE){pageProxy.cleanupAfterRender=true}break;default:error("Got unknown object type "+type)}},this);messageHandler.on("DocProgress",function transportDocProgress(data){if(this.progressCallback){this.progressCallback({loaded:data.loaded,total:data.total})
}},this);messageHandler.on("DocError",function transportDocError(data){this.workerReadyCapability.reject(data)},this);messageHandler.on("PageError",function transportError(data){var page=this.pageCache[data.pageNum-1];var intentState=page.intentStates[data.intent];if(intentState.displayReadyCapability){intentState.displayReadyCapability.reject(data.error)}else{error(data.error)}},this);messageHandler.on("JpegDecode",function(data){var imageUrl=data[0];var components=data[1];if(components!==3&&components!==1){return Promise.reject(new Error("Only 3 components or 1 component can be returned"))}return new Promise(function(resolve,reject){var img=new Image;img.onload=function(){var width=img.width;var height=img.height;var size=width*height;var rgbaLength=size*4;var buf=new Uint8Array(size*components);var tmpCanvas=createScratchCanvas(width,height);var tmpCtx=tmpCanvas.getContext("2d");tmpCtx.drawImage(img,0,0);var data=tmpCtx.getImageData(0,0,width,height).data;var i,j;if(components===3){for(i=0,j=0;i<rgbaLength;i+=4,j+=3){buf[j]=data[i];buf[j+1]=data[i+1];buf[j+2]=data[i+2]}}else if(components===1){for(i=0,j=0;i<rgbaLength;i+=4,j++){buf[j]=data[i]}}resolve({data:buf,width:width,height:height})};img.onerror=function(){reject(new Error("JpegDecode failed to load image"))};img.src=imageUrl})})},fetchDocument:function WorkerTransport_fetchDocument(source){source.disableAutoFetch=PDFJS.disableAutoFetch;source.chunkedViewerLoading=!!this.pdfDataRangeTransport;this.messageHandler.send("GetDocRequest",{source:source,disableRange:PDFJS.disableRange,maxImageSize:PDFJS.maxImageSize,cMapUrl:PDFJS.cMapUrl,cMapPacked:PDFJS.cMapPacked,disableFontFace:PDFJS.disableFontFace,disableCreateObjectURL:PDFJS.disableCreateObjectURL,verbosity:PDFJS.verbosity})},getData:function WorkerTransport_getData(){return this.messageHandler.sendWithPromise("GetData",null)},getPage:function WorkerTransport_getPage(pageNumber,capability){if(pageNumber<=0||pageNumber>this.numPages||(pageNumber|0)!==pageNumber){return Promise.reject(new Error("Invalid page request"))}var pageIndex=pageNumber-1;if(pageIndex in this.pagePromises){return this.pagePromises[pageIndex]}var promise=this.messageHandler.sendWithPromise("GetPage",{pageIndex:pageIndex}).then(function(pageInfo){var page=new PDFPageProxy(pageIndex,pageInfo,this);this.pageCache[pageIndex]=page;return page}.bind(this));this.pagePromises[pageIndex]=promise;return promise},getPageIndex:function WorkerTransport_getPageIndexByRef(ref){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:ref})},getAnnotations:function WorkerTransport_getAnnotations(pageIndex){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:pageIndex})},getDestinations:function WorkerTransport_getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)},getAttachments:function WorkerTransport_getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)},getJavaScript:function WorkerTransport_getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)},getOutline:function WorkerTransport_getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)},getMetadata:function WorkerTransport_getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(function transportMetadata(results){return{info:results[0],metadata:results[1]?new PDFJS.Metadata(results[1]):null}})},getStats:function WorkerTransport_getStats(){return this.messageHandler.sendWithPromise("GetStats",null)},startCleanup:function WorkerTransport_startCleanup(){this.messageHandler.sendWithPromise("Cleanup",null).then(function endCleanup(){for(var i=0,ii=this.pageCache.length;i<ii;i++){var page=this.pageCache[i];if(page){page.destroy()}}this.commonObjs.clear();FontLoader.clear()}.bind(this))}};return WorkerTransport}();var PDFObjects=function PDFObjectsClosure(){function PDFObjects(){this.objs={}}PDFObjects.prototype={ensureObj:function PDFObjects_ensureObj(objId){if(this.objs[objId]){return this.objs[objId]}var obj={capability:createPromiseCapability(),data:null,resolved:false};this.objs[objId]=obj;return obj},get:function PDFObjects_get(objId,callback){if(callback){this.ensureObj(objId).capability.promise.then(callback);return null}var obj=this.objs[objId];if(!obj||!obj.resolved){error("Requesting object that isn't resolved yet "+objId)}return obj.data},resolve:function PDFObjects_resolve(objId,data){var obj=this.ensureObj(objId);obj.resolved=true;obj.data=data;obj.capability.resolve(data)},isResolved:function PDFObjects_isResolved(objId){var objs=this.objs;if(!objs[objId]){return false}else{return objs[objId].resolved}},hasData:function PDFObjects_hasData(objId){return this.isResolved(objId)},getData:function PDFObjects_getData(objId){var objs=this.objs;if(!objs[objId]||!objs[objId].resolved){return null}else{return objs[objId].data}},clear:function PDFObjects_clear(){this.objs={}}};return PDFObjects}();var RenderTask=function RenderTaskClosure(){function RenderTask(internalRenderTask){this.internalRenderTask=internalRenderTask;this.promise=this.internalRenderTask.capability.promise}RenderTask.prototype={cancel:function RenderTask_cancel(){this.internalRenderTask.cancel()},then:function RenderTask_then(onFulfilled,onRejected){return this.promise.then(onFulfilled,onRejected)}};return RenderTask}();var InternalRenderTask=function InternalRenderTaskClosure(){function InternalRenderTask(callback,params,objs,commonObjs,operatorList,pageNumber){this.callback=callback;this.params=params;this.objs=objs;this.commonObjs=commonObjs;this.operatorListIdx=null;this.operatorList=operatorList;this.pageNumber=pageNumber;this.running=false;this.graphicsReadyCallback=null;this.graphicsReady=false;this.cancelled=false;this.capability=createPromiseCapability();this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this)}InternalRenderTask.prototype={initalizeGraphics:function InternalRenderTask_initalizeGraphics(transparency){if(this.cancelled){return}if(PDFJS.pdfBug&&"StepperManager"in globalScope&&globalScope.StepperManager.enabled){this.stepper=globalScope.StepperManager.create(this.pageNumber-1);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint()}var params=this.params;this.gfx=new CanvasGraphics(params.canvasContext,this.commonObjs,this.objs,params.imageLayer);this.gfx.beginDrawing(params.viewport,transparency);this.operatorListIdx=0;this.graphicsReady=true;if(this.graphicsReadyCallback){this.graphicsReadyCallback()}},cancel:function InternalRenderTask_cancel(){this.running=false;this.cancelled=true;this.callback("cancelled")},operatorListChanged:function InternalRenderTask_operatorListChanged(){if(!this.graphicsReady){if(!this.graphicsReadyCallback){this.graphicsReadyCallback=this._continueBound}return}if(this.stepper){this.stepper.updateOperatorList(this.operatorList)}if(this.running){return}this._continue()},_continue:function InternalRenderTask__continue(){this.running=true;if(this.cancelled){return}if(this.params.continueCallback){this.params.continueCallback(this._scheduleNextBound)}else{this._scheduleNext()}},_scheduleNext:function InternalRenderTask__scheduleNext(){window.requestAnimationFrame(this._nextBound)},_next:function InternalRenderTask__next(){if(this.cancelled){return}this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=false;if(this.operatorList.lastChunk){this.gfx.endDrawing();this.callback()}}}};return InternalRenderTask}();var Metadata=PDFJS.Metadata=function MetadataClosure(){function fixMetadata(meta){return meta.replace(/>\\376\\377([^<]+)/g,function(all,codes){var bytes=codes.replace(/\\([0-3])([0-7])([0-7])/g,function(code,d1,d2,d3){return String.fromCharCode(d1*64+d2*8+d3*1)});var chars="";for(var i=0;i<bytes.length;i+=2){var code=bytes.charCodeAt(i)*256+bytes.charCodeAt(i+1);chars+=code>=32&&code<127&&code!==60&&code!==62&&code!==38&&false?String.fromCharCode(code):"&#x"+(65536+code).toString(16).substring(1)+";"}return">"+chars})}function Metadata(meta){if(typeof meta==="string"){meta=fixMetadata(meta);var parser=new DOMParser;meta=parser.parseFromString(meta,"application/xml")}else if(!(meta instanceof Document)){error("Metadata: Invalid metadata object")}this.metaDocument=meta;this.metadata={};this.parse()}Metadata.prototype={parse:function Metadata_parse(){var doc=this.metaDocument;var rdf=doc.documentElement;if(rdf.nodeName.toLowerCase()!=="rdf:rdf"){rdf=rdf.firstChild;while(rdf&&rdf.nodeName.toLowerCase()!=="rdf:rdf"){rdf=rdf.nextSibling}}var nodeName=rdf?rdf.nodeName.toLowerCase():null;if(!rdf||nodeName!=="rdf:rdf"||!rdf.hasChildNodes()){return}var children=rdf.childNodes,desc,entry,name,i,ii,length,iLength;for(i=0,length=children.length;i<length;i++){desc=children[i];if(desc.nodeName.toLowerCase()!=="rdf:description"){continue}for(ii=0,iLength=desc.childNodes.length;ii<iLength;ii++){if(desc.childNodes[ii].nodeName.toLowerCase()!=="#text"){entry=desc.childNodes[ii];name=entry.nodeName.toLowerCase();this.metadata[name]=entry.textContent.trim()}}}},get:function Metadata_get(name){return this.metadata[name]||null},has:function Metadata_has(name){return typeof this.metadata[name]!=="undefined"}};return Metadata}();var MIN_FONT_SIZE=16;var MAX_GROUP_SIZE=4096;var COMPILE_TYPE3_GLYPHS=true;function createScratchCanvas(width,height){var canvas=document.createElement("canvas");canvas.width=width;canvas.height=height;return canvas}function addContextCurrentTransform(ctx){if(!ctx.mozCurrentTransform){ctx._scaleX=ctx._scaleX||1;ctx._scaleY=ctx._scaleY||1;ctx._originalSave=ctx.save;ctx._originalRestore=ctx.restore;ctx._originalRotate=ctx.rotate;ctx._originalScale=ctx.scale;ctx._originalTranslate=ctx.translate;ctx._originalTransform=ctx.transform;ctx._originalSetTransform=ctx.setTransform;ctx._transformMatrix=[ctx._scaleX,0,0,ctx._scaleY,0,0];ctx._transformStack=[];Object.defineProperty(ctx,"mozCurrentTransform",{get:function getCurrentTransform(){return this._transformMatrix}});Object.defineProperty(ctx,"mozCurrentTransformInverse",{get:function getCurrentTransformInverse(){var m=this._transformMatrix;var a=m[0],b=m[1],c=m[2],d=m[3],e=m[4],f=m[5];var ad_bc=a*d-b*c;var bc_ad=b*c-a*d;return[d/ad_bc,b/bc_ad,c/bc_ad,a/ad_bc,(d*e-c*f)/bc_ad,(b*e-a*f)/ad_bc]}});ctx.save=function ctxSave(){var old=this._transformMatrix;this._transformStack.push(old);this._transformMatrix=old.slice(0,6);this._originalSave()};ctx.restore=function ctxRestore(){var prev=this._transformStack.pop();if(prev){this._transformMatrix=prev;this._originalRestore()}};ctx.translate=function ctxTranslate(x,y){var m=this._transformMatrix;m[4]=m[0]*x+m[2]*y+m[4];m[5]=m[1]*x+m[3]*y+m[5];this._originalTranslate(x,y)};ctx.scale=function ctxScale(x,y){var m=this._transformMatrix;m[0]=m[0]*x;m[1]=m[1]*x;m[2]=m[2]*y;m[3]=m[3]*y;this._originalScale(x,y)};ctx.transform=function ctxTransform(a,b,c,d,e,f){var m=this._transformMatrix;this._transformMatrix=[m[0]*a+m[2]*b,m[1]*a+m[3]*b,m[0]*c+m[2]*d,m[1]*c+m[3]*d,m[0]*e+m[2]*f+m[4],m[1]*e+m[3]*f+m[5]];ctx._originalTransform(a,b,c,d,e,f)};ctx.setTransform=function ctxSetTransform(a,b,c,d,e,f){this._transformMatrix=[a,b,c,d,e,f];ctx._originalSetTransform(a,b,c,d,e,f)};ctx.rotate=function ctxRotate(angle){var cosValue=Math.cos(angle);var sinValue=Math.sin(angle);var m=this._transformMatrix;this._transformMatrix=[m[0]*cosValue+m[2]*sinValue,m[1]*cosValue+m[3]*sinValue,m[0]*-sinValue+m[2]*cosValue,m[1]*-sinValue+m[3]*cosValue,m[4],m[5]];this._originalRotate(angle)}}}var CachedCanvases=function CachedCanvasesClosure(){var cache={};return{getCanvas:function CachedCanvases_getCanvas(id,width,height,trackTransform){var canvasEntry;if(id in cache){canvasEntry=cache[id];canvasEntry.canvas.width=width;canvasEntry.canvas.height=height;canvasEntry.context.setTransform(1,0,0,1,0,0)}else{var canvas=createScratchCanvas(width,height);var ctx=canvas.getContext("2d");if(trackTransform){addContextCurrentTransform(ctx)}cache[id]=canvasEntry={canvas:canvas,context:ctx}}return canvasEntry},clear:function(){for(var id in cache){var canvasEntry=cache[id];canvasEntry.canvas.width=0;canvasEntry.canvas.height=0;delete cache[id]}}}}();function compileType3Glyph(imgData){var POINT_TO_PROCESS_LIMIT=1e3;var width=imgData.width,height=imgData.height;var i,j,j0,width1=width+1;var points=new Uint8Array(width1*(height+1));var POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]);var lineSize=width+7&~7,data0=imgData.data;var data=new Uint8Array(lineSize*height),pos=0,ii;for(i=0,ii=data0.length;i<ii;i++){var mask=128,elem=data0[i];while(mask>0){data[pos++]=elem&mask?0:255;mask>>=1}}var count=0;pos=0;if(data[pos]!==0){points[0]=1;++count}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j]=data[pos]?2:1;++count}pos++}if(data[pos]!==0){points[j]=2;++count}for(i=1;i<height;i++){pos=i*lineSize;j0=i*width1;if(data[pos-lineSize]!==data[pos]){points[j0]=data[pos]?1:8;++count}var sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++){sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0);if(POINT_TYPES[sum]){points[j0+j]=POINT_TYPES[sum];++count}pos++}if(data[pos-lineSize]!==data[pos]){points[j0+j]=data[pos]?2:4;++count}if(count>POINT_TO_PROCESS_LIMIT){return null}}pos=lineSize*(height-1);j0=i*width1;if(data[pos]!==0){points[j0]=8;++count}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j0+j]=data[pos]?4:8;++count}pos++}if(data[pos]!==0){points[j0+j]=4;++count}if(count>POINT_TO_PROCESS_LIMIT){return null}var steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]);var outlines=[];for(i=0;count&&i<=height;i++){var p=i*width1;var end=p+width;while(p<end&&!points[p]){p++}if(p===end){continue}var coords=[p%width1,i];var type=points[p],p0=p,pp;do{var step=steps[type];do{p+=step}while(!points[p]);pp=points[p];if(pp!==5&&pp!==10){type=pp;points[p]=0}else{type=pp&51*type>>4;points[p]&=type>>2|type<<2}coords.push(p%width1);coords.push(p/width1|0);--count}while(p0!==p);outlines.push(coords);--i}var drawOutline=function(c){c.save();c.scale(1/width,-1/height);c.translate(0,-height);c.beginPath();for(var i=0,ii=outlines.length;i<ii;i++){var o=outlines[i];c.moveTo(o[0],o[1]);for(var j=2,jj=o.length;j<jj;j+=2){c.lineTo(o[j],o[j+1])}}c.fill();c.beginPath();c.restore()};return drawOutline}var CanvasExtraState=function CanvasExtraStateClosure(){function CanvasExtraState(old){this.alphaIsShape=false;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=TextRenderingMode.FILL;this.textRise=0;this.fillColor="#000000";this.strokeColor="#000000";this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.old=old}CanvasExtraState.prototype={clone:function CanvasExtraState_clone(){return Object.create(this)},setCurrentPoint:function CanvasExtraState_setCurrentPoint(x,y){this.x=x;this.y=y}};return CanvasExtraState}();var CanvasGraphics=function CanvasGraphicsClosure(){var EXECUTION_TIME=15;var EXECUTION_STEPS=10;function CanvasGraphics(canvasCtx,commonObjs,objs,imageLayer){this.ctx=canvasCtx;this.current=new CanvasExtraState;this.stateStack=[];this.pendingClip=null;this.pendingEOFill=false;this.res=null;this.xobjs=null;this.commonObjs=commonObjs;this.objs=objs;this.imageLayer=imageLayer;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;if(canvasCtx){addContextCurrentTransform(canvasCtx)}}function putBinaryImageData(ctx,imgData){if(typeof ImageData!=="undefined"&&imgData instanceof ImageData){ctx.putImageData(imgData,0,0);return}var height=imgData.height,width=imgData.width;var fullChunkHeight=16;var fracChunks=height/fullChunkHeight;var fullChunks=Math.floor(fracChunks);var totalChunks=Math.ceil(fracChunks);var partialChunkHeight=height-fullChunks*fullChunkHeight;var chunkImgData=ctx.createImageData(width,fullChunkHeight);var srcPos=0,destPos;var src=imgData.data;var dest=chunkImgData.data;var i,j,thisChunkHeight,elemsInThisChunk;if(imgData.kind===ImageKind.GRAYSCALE_1BPP){var srcLength=src.byteLength;var dest32=PDFJS.hasCanvasTypedArrays?new Uint32Array(dest.buffer):new Uint32ArrayView(dest);var dest32DataLength=dest32.length;var fullSrcDiff=width+7>>3;var white=4294967295;var black=PDFJS.isLittleEndian||!PDFJS.hasCanvasTypedArrays?4278190080:255;for(i=0;i<totalChunks;i++){thisChunkHeight=i<fullChunks?fullChunkHeight:partialChunkHeight;destPos=0;for(j=0;j<thisChunkHeight;j++){var srcDiff=srcLength-srcPos;var k=0;var kEnd=srcDiff>fullSrcDiff?width:srcDiff*8-7;var kEndUnrolled=kEnd&~7;var mask=0;var srcByte=0;for(;k<kEndUnrolled;k+=8){srcByte=src[srcPos++];dest32[destPos++]=srcByte&128?white:black;dest32[destPos++]=srcByte&64?white:black;dest32[destPos++]=srcByte&32?white:black;dest32[destPos++]=srcByte&16?white:black;dest32[destPos++]=srcByte&8?white:black;dest32[destPos++]=srcByte&4?white:black;dest32[destPos++]=srcByte&2?white:black;dest32[destPos++]=srcByte&1?white:black}for(;k<kEnd;k++){if(mask===0){srcByte=src[srcPos++];mask=128}dest32[destPos++]=srcByte&mask?white:black;mask>>=1}}while(destPos<dest32DataLength){dest32[destPos++]=0}ctx.putImageData(chunkImgData,0,i*fullChunkHeight)}}else if(imgData.kind===ImageKind.RGBA_32BPP){j=0;elemsInThisChunk=width*fullChunkHeight*4;for(i=0;i<fullChunks;i++){dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));srcPos+=elemsInThisChunk;ctx.putImageData(chunkImgData,0,j);j+=fullChunkHeight}if(i<totalChunks){elemsInThisChunk=width*partialChunkHeight*4;dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));ctx.putImageData(chunkImgData,0,j)}}else if(imgData.kind===ImageKind.RGB_24BPP){thisChunkHeight=fullChunkHeight;elemsInThisChunk=width*thisChunkHeight;for(i=0;i<totalChunks;i++){if(i>=fullChunks){thisChunkHeight=partialChunkHeight;elemsInThisChunk=width*thisChunkHeight}destPos=0;for(j=elemsInThisChunk;j--;){dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=255}ctx.putImageData(chunkImgData,0,i*fullChunkHeight)}}else{error("bad image kind: "+imgData.kind)}}function putBinaryImageMask(ctx,imgData){var height=imgData.height,width=imgData.width;var fullChunkHeight=16;var fracChunks=height/fullChunkHeight;var fullChunks=Math.floor(fracChunks);var totalChunks=Math.ceil(fracChunks);var partialChunkHeight=height-fullChunks*fullChunkHeight;var chunkImgData=ctx.createImageData(width,fullChunkHeight);var srcPos=0;var src=imgData.data;var dest=chunkImgData.data;for(var i=0;i<totalChunks;i++){var thisChunkHeight=i<fullChunks?fullChunkHeight:partialChunkHeight;var destPos=3;for(var j=0;j<thisChunkHeight;j++){var mask=0;for(var k=0;k<width;k++){if(!mask){var elem=src[srcPos++];mask=128}dest[destPos]=elem&mask?0:255;destPos+=4;mask>>=1}}ctx.putImageData(chunkImgData,0,i*fullChunkHeight)}}function copyCtxState(sourceCtx,destCtx){var properties=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(var i=0,ii=properties.length;i<ii;i++){var property=properties[i];if(property in sourceCtx){destCtx[property]=sourceCtx[property]}}if("setLineDash"in sourceCtx){destCtx.setLineDash(sourceCtx.getLineDash());destCtx.lineDashOffset=sourceCtx.lineDashOffset}else if("mozDash"in sourceCtx){destCtx.mozDash=sourceCtx.mozDash;destCtx.mozDashOffset=sourceCtx.mozDashOffset}}function composeSMaskBackdrop(bytes,r0,g0,b0){var length=bytes.length;for(var i=3;i<length;i+=4){var alpha=bytes[i];if(alpha===0){bytes[i-3]=r0;bytes[i-2]=g0;bytes[i-1]=b0}else if(alpha<255){var alpha_=255-alpha;bytes[i-3]=bytes[i-3]*alpha+r0*alpha_>>8;bytes[i-2]=bytes[i-2]*alpha+g0*alpha_>>8;bytes[i-1]=bytes[i-1]*alpha+b0*alpha_>>8}}}function composeSMaskAlpha(maskData,layerData){var length=maskData.length;var scale=1/255;for(var i=3;i<length;i+=4){var alpha=maskData[i];layerData[i]=layerData[i]*alpha*scale|0}}function composeSMaskLuminosity(maskData,layerData){var length=maskData.length;for(var i=3;i<length;i+=4){var y=maskData[i-3]*77+maskData[i-2]*152+maskData[i-1]*28|0;layerData[i]=layerData[i]*y>>16}}function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop){var hasBackdrop=!!backdrop;var r0=hasBackdrop?backdrop[0]:0;var g0=hasBackdrop?backdrop[1]:0;var b0=hasBackdrop?backdrop[2]:0;var composeFn;if(subtype==="Luminosity"){composeFn=composeSMaskLuminosity}else{composeFn=composeSMaskAlpha}var PIXELS_TO_PROCESS=65536;var chunkSize=Math.min(height,Math.ceil(PIXELS_TO_PROCESS/width));for(var row=0;row<height;row+=chunkSize){var chunkHeight=Math.min(chunkSize,height-row);var maskData=maskCtx.getImageData(0,row,width,chunkHeight);var layerData=layerCtx.getImageData(0,row,width,chunkHeight);if(hasBackdrop){composeSMaskBackdrop(maskData.data,r0,g0,b0)}composeFn(maskData.data,layerData.data);maskCtx.putImageData(layerData,0,row)}}function composeSMask(ctx,smask,layerCtx){var mask=smask.canvas;var maskCtx=smask.context;ctx.setTransform(smask.scaleX,0,0,smask.scaleY,smask.offsetX,smask.offsetY);var backdrop=smask.backdrop||null;if(WebGLUtils.isEnabled){var composed=WebGLUtils.composeSMask(layerCtx.canvas,mask,{subtype:smask.subtype,backdrop:backdrop});ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(composed,smask.offsetX,smask.offsetY);return}genericComposeSMask(maskCtx,layerCtx,mask.width,mask.height,smask.subtype,backdrop);ctx.drawImage(mask,0,0)}var LINE_CAP_STYLES=["butt","round","square"];var LINE_JOIN_STYLES=["miter","round","bevel"];var NORMAL_CLIP={};var EO_CLIP={};CanvasGraphics.prototype={beginDrawing:function CanvasGraphics_beginDrawing(viewport,transparency){var width=this.ctx.canvas.width;var height=this.ctx.canvas.height;if(transparency){this.ctx.clearRect(0,0,width,height)}else{this.ctx.mozOpaque=true;this.ctx.save();this.ctx.fillStyle="rgb(255, 255, 255)";this.ctx.fillRect(0,0,width,height);this.ctx.restore()}var transform=viewport.transform;this.ctx.save();this.ctx.transform.apply(this.ctx,transform);this.baseTransform=this.ctx.mozCurrentTransform.slice();if(this.imageLayer){this.imageLayer.beginLayout()}},executeOperatorList:function CanvasGraphics_executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){var argsArray=operatorList.argsArray;var fnArray=operatorList.fnArray;var i=executionStartIdx||0;var argsArrayLen=argsArray.length;if(argsArrayLen===i){return i}var chunkOperations=argsArrayLen-i>EXECUTION_STEPS&&typeof continueCallback==="function";var endTime=chunkOperations?Date.now()+EXECUTION_TIME:0;var steps=0;var commonObjs=this.commonObjs;var objs=this.objs;var fnId;while(true){if(stepper!==undefined&&i===stepper.nextBreakPoint){stepper.breakIt(i,continueCallback);return i}fnId=fnArray[i];if(fnId!==OPS.dependency){this[fnId].apply(this,argsArray[i])}else{var deps=argsArray[i];for(var n=0,nn=deps.length;n<nn;n++){var depObjId=deps[n];var common=depObjId[0]==="g"&&depObjId[1]==="_";var objsPool=common?commonObjs:objs;if(!objsPool.isResolved(depObjId)){objsPool.get(depObjId,continueCallback);return i}}}i++;if(i===argsArrayLen){return i}if(chunkOperations&&++steps>EXECUTION_STEPS){if(Date.now()>endTime){continueCallback();return i}steps=0}}},endDrawing:function CanvasGraphics_endDrawing(){this.ctx.restore();CachedCanvases.clear();WebGLUtils.clear();if(this.imageLayer){this.imageLayer.endLayout()}},setLineWidth:function CanvasGraphics_setLineWidth(width){this.current.lineWidth=width;this.ctx.lineWidth=width},setLineCap:function CanvasGraphics_setLineCap(style){this.ctx.lineCap=LINE_CAP_STYLES[style]},setLineJoin:function CanvasGraphics_setLineJoin(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style]},setMiterLimit:function CanvasGraphics_setMiterLimit(limit){this.ctx.miterLimit=limit},setDash:function CanvasGraphics_setDash(dashArray,dashPhase){var ctx=this.ctx;if("setLineDash"in ctx){ctx.setLineDash(dashArray);ctx.lineDashOffset=dashPhase}else{ctx.mozDash=dashArray;ctx.mozDashOffset=dashPhase}},setRenderingIntent:function CanvasGraphics_setRenderingIntent(intent){},setFlatness:function CanvasGraphics_setFlatness(flatness){},setGState:function CanvasGraphics_setGState(states){for(var i=0,ii=states.length;i<ii;i++){var state=states[i];var key=state[0];var value=state[1];switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value[0],value[1]);break;case"CA":this.current.strokeAlpha=state[1];break;case"ca":this.current.fillAlpha=state[1];this.ctx.globalAlpha=state[1];break;case"BM":if(value&&value.name&&value.name!=="Normal"){var mode=value.name.replace(/([A-Z])/g,function(c){return"-"+c.toLowerCase()}).substring(1);this.ctx.globalCompositeOperation=mode;if(this.ctx.globalCompositeOperation!==mode){warn('globalCompositeOperation "'+mode+'" is not supported')}}else{this.ctx.globalCompositeOperation="source-over"}break;case"SMask":if(this.current.activeSMask){this.endSMaskGroup()}this.current.activeSMask=value?this.tempSMask:null;if(this.current.activeSMask){this.beginSMaskGroup()}this.tempSMask=null;break}}},beginSMaskGroup:function CanvasGraphics_beginSMaskGroup(){var activeSMask=this.current.activeSMask;var drawnWidth=activeSMask.canvas.width;var drawnHeight=activeSMask.canvas.height;var cacheId="smaskGroupAt"+this.groupLevel;var scratchCanvas=CachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight,true);var currentCtx=this.ctx;var currentTransform=currentCtx.mozCurrentTransform;this.ctx.save();var groupCtx=scratchCanvas.context;groupCtx.scale(1/activeSMask.scaleX,1/activeSMask.scaleY);groupCtx.translate(-activeSMask.offsetX,-activeSMask.offsetY);groupCtx.transform.apply(groupCtx,currentTransform);copyCtxState(currentCtx,groupCtx);this.ctx=groupCtx;this.setGState([["BM","Normal"],["ca",1],["CA",1]]);this.groupStack.push(currentCtx);this.groupLevel++},endSMaskGroup:function CanvasGraphics_endSMaskGroup(){var groupCtx=this.ctx;this.groupLevel--;this.ctx=this.groupStack.pop();composeSMask(this.ctx,this.current.activeSMask,groupCtx);this.ctx.restore()},save:function CanvasGraphics_save(){this.ctx.save();var old=this.current;this.stateStack.push(old);this.current=old.clone();this.current.activeSMask=null},restore:function CanvasGraphics_restore(){if(this.stateStack.length!==0){if(this.current.activeSMask!==null){this.endSMaskGroup()}this.current=this.stateStack.pop();this.ctx.restore()}},transform:function CanvasGraphics_transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f)},constructPath:function CanvasGraphics_constructPath(ops,args){var ctx=this.ctx;var current=this.current;var x=current.x,y=current.y;for(var i=0,j=0,ii=ops.length;i<ii;i++){switch(ops[i]|0){case OPS.rectangle:x=args[j++];y=args[j++];var width=args[j++];var height=args[j++];if(width===0){width=this.getSinglePixelWidth()}if(height===0){height=this.getSinglePixelWidth()}var xw=x+width;var yh=y+height;this.ctx.moveTo(x,y);this.ctx.lineTo(xw,y);this.ctx.lineTo(xw,yh);this.ctx.lineTo(x,yh);this.ctx.lineTo(x,y);this.ctx.closePath();break;case OPS.moveTo:x=args[j++];y=args[j++];ctx.moveTo(x,y);break;case OPS.lineTo:x=args[j++];y=args[j++];ctx.lineTo(x,y);break;case OPS.curveTo:x=args[j+4];y=args[j+5];ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y);j+=6;break;case OPS.curveTo2:ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]);x=args[j+2];y=args[j+3];j+=4;break;case OPS.curveTo3:x=args[j+2];y=args[j+3];ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y);j+=4;break;case OPS.closePath:ctx.closePath();break}}current.setCurrentPoint(x,y)},closePath:function CanvasGraphics_closePath(){this.ctx.closePath()},stroke:function CanvasGraphics_stroke(consumePath){consumePath=typeof consumePath!=="undefined"?consumePath:true;var ctx=this.ctx;var strokeColor=this.current.strokeColor;if(this.current.lineWidth===0){ctx.lineWidth=this.getSinglePixelWidth()}ctx.globalAlpha=this.current.strokeAlpha;if(strokeColor&&strokeColor.hasOwnProperty("type")&&strokeColor.type==="Pattern"){ctx.save();ctx.strokeStyle=strokeColor.getPattern(ctx,this);ctx.stroke();ctx.restore()}else{ctx.stroke()}if(consumePath){this.consumePath()}ctx.globalAlpha=this.current.fillAlpha},closeStroke:function CanvasGraphics_closeStroke(){this.closePath();this.stroke()},fill:function CanvasGraphics_fill(consumePath){consumePath=typeof consumePath!=="undefined"?consumePath:true;var ctx=this.ctx;var fillColor=this.current.fillColor;var needRestore=false;if(fillColor&&fillColor.hasOwnProperty("type")&&fillColor.type==="Pattern"){ctx.save();ctx.fillStyle=fillColor.getPattern(ctx,this);needRestore=true}if(this.pendingEOFill){if(ctx.mozFillRule!==undefined){ctx.mozFillRule="evenodd";ctx.fill();ctx.mozFillRule="nonzero"}else{try{ctx.fill("evenodd")}catch(ex){ctx.fill()}}this.pendingEOFill=false}else{ctx.fill()}if(needRestore){ctx.restore()}if(consumePath){this.consumePath()}},eoFill:function CanvasGraphics_eoFill(){this.pendingEOFill=true;this.fill()},fillStroke:function CanvasGraphics_fillStroke(){this.fill(false);this.stroke(false);this.consumePath()},eoFillStroke:function CanvasGraphics_eoFillStroke(){this.pendingEOFill=true;this.fillStroke()},closeFillStroke:function CanvasGraphics_closeFillStroke(){this.closePath();this.fillStroke()},closeEOFillStroke:function CanvasGraphics_closeEOFillStroke(){this.pendingEOFill=true;this.closePath();this.fillStroke()},endPath:function CanvasGraphics_endPath(){this.consumePath()},clip:function CanvasGraphics_clip(){this.pendingClip=NORMAL_CLIP},eoClip:function CanvasGraphics_eoClip(){this.pendingClip=EO_CLIP},beginText:function CanvasGraphics_beginText(){this.current.textMatrix=IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},endText:function CanvasGraphics_endText(){var paths=this.pendingTextPaths;var ctx=this.ctx;if(paths===undefined){ctx.beginPath();return}ctx.save();ctx.beginPath();for(var i=0;i<paths.length;i++){var path=paths[i];ctx.setTransform.apply(ctx,path.transform);ctx.translate(path.x,path.y);path.addToPath(ctx,path.fontSize)}ctx.restore();ctx.clip();ctx.beginPath();delete this.pendingTextPaths},setCharSpacing:function CanvasGraphics_setCharSpacing(spacing){this.current.charSpacing=spacing},setWordSpacing:function CanvasGraphics_setWordSpacing(spacing){this.current.wordSpacing=spacing},setHScale:function CanvasGraphics_setHScale(scale){this.current.textHScale=scale/100},setLeading:function CanvasGraphics_setLeading(leading){this.current.leading=-leading},setFont:function CanvasGraphics_setFont(fontRefName,size){var fontObj=this.commonObjs.get(fontRefName);var current=this.current;if(!fontObj){error("Can't find font for "+fontRefName)}current.fontMatrix=fontObj.fontMatrix?fontObj.fontMatrix:FONT_IDENTITY_MATRIX;if(current.fontMatrix[0]===0||current.fontMatrix[3]===0){warn("Invalid font matrix for font "+fontRefName)}if(size<0){size=-size;current.fontDirection=-1}else{current.fontDirection=1}this.current.font=fontObj;this.current.fontSize=size;if(fontObj.isType3Font){return}var name=fontObj.loadedName||"sans-serif";var bold=fontObj.black?fontObj.bold?"bolder":"bold":fontObj.bold?"bold":"normal";var italic=fontObj.italic?"italic":"normal";var typeface='"'+name+'", '+fontObj.fallbackName;var browserFontSize=size>=MIN_FONT_SIZE?size:MIN_FONT_SIZE;this.current.fontSizeScale=browserFontSize!==MIN_FONT_SIZE?1:size/MIN_FONT_SIZE;var rule=italic+" "+bold+" "+browserFontSize+"px "+typeface;this.ctx.font=rule},setTextRenderingMode:function CanvasGraphics_setTextRenderingMode(mode){this.current.textRenderingMode=mode
},setTextRise:function CanvasGraphics_setTextRise(rise){this.current.textRise=rise},moveText:function CanvasGraphics_moveText(x,y){this.current.x=this.current.lineX+=x;this.current.y=this.current.lineY+=y},setLeadingMoveText:function CanvasGraphics_setLeadingMoveText(x,y){this.setLeading(-y);this.moveText(x,y)},setTextMatrix:function CanvasGraphics_setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f];this.current.textMatrixScale=Math.sqrt(a*a+b*b);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},nextLine:function CanvasGraphics_nextLine(){this.moveText(0,this.current.leading)},paintChar:function CanvasGraphics_paintChar(character,x,y){var ctx=this.ctx;var current=this.current;var font=current.font;var textRenderingMode=current.textRenderingMode;var fontSize=current.fontSize/current.fontSizeScale;var fillStrokeMode=textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;var isAddToPathSet=!!(textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG);var addToPath;if(font.disableFontFace||isAddToPathSet){addToPath=font.getPathGenerator(this.commonObjs,character)}if(font.disableFontFace){ctx.save();ctx.translate(x,y);ctx.beginPath();addToPath(ctx,fontSize);if(fillStrokeMode===TextRenderingMode.FILL||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.fill()}if(fillStrokeMode===TextRenderingMode.STROKE||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.stroke()}ctx.restore()}else{if(fillStrokeMode===TextRenderingMode.FILL||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.fillText(character,x,y)}if(fillStrokeMode===TextRenderingMode.STROKE||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.strokeText(character,x,y)}}if(isAddToPathSet){var paths=this.pendingTextPaths||(this.pendingTextPaths=[]);paths.push({transform:ctx.mozCurrentTransform,x:x,y:y,fontSize:fontSize,addToPath:addToPath})}},get isFontSubpixelAAEnabled(){var ctx=document.createElement("canvas").getContext("2d");ctx.scale(1.5,1);ctx.fillText("I",0,10);var data=ctx.getImageData(0,0,10,10).data;var enabled=false;for(var i=3;i<data.length;i+=4){if(data[i]>0&&data[i]<255){enabled=true;break}}return shadow(this,"isFontSubpixelAAEnabled",enabled)},showText:function CanvasGraphics_showText(glyphs){var current=this.current;var font=current.font;if(font.isType3Font){return this.showType3Text(glyphs)}var fontSize=current.fontSize;if(fontSize===0){return}var ctx=this.ctx;var fontSizeScale=current.fontSizeScale;var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var fontDirection=current.fontDirection;var textHScale=current.textHScale*fontDirection;var glyphsLength=glyphs.length;var vertical=font.vertical;var defaultVMetrics=font.defaultVMetrics;var widthAdvanceScale=fontSize*current.fontMatrix[0];var simpleFillText=current.textRenderingMode===TextRenderingMode.FILL&&!font.disableFontFace;ctx.save();ctx.transform.apply(ctx,current.textMatrix);ctx.translate(current.x,current.y+current.textRise);if(fontDirection>0){ctx.scale(textHScale,-1)}else{ctx.scale(textHScale,1)}var lineWidth=current.lineWidth;var scale=current.textMatrixScale;if(scale===0||lineWidth===0){lineWidth=this.getSinglePixelWidth()}else{lineWidth/=scale}if(fontSizeScale!==1){ctx.scale(fontSizeScale,fontSizeScale);lineWidth/=fontSizeScale}ctx.lineWidth=lineWidth;var x=0,i;for(i=0;i<glyphsLength;++i){var glyph=glyphs[i];if(glyph===null){x+=fontDirection*wordSpacing;continue}else if(isNum(glyph)){x+=-glyph*fontSize*.001;continue}var restoreNeeded=false;var character=glyph.fontChar;var accent=glyph.accent;var scaledX,scaledY,scaledAccentX,scaledAccentY;var width=glyph.width;if(vertical){var vmetric,vx,vy;vmetric=glyph.vmetric||defaultVMetrics;vx=glyph.vmetric?vmetric[1]:width*.5;vx=-vx*widthAdvanceScale;vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width;scaledX=vx/fontSizeScale;scaledY=(x+vy)/fontSizeScale}else{scaledX=x/fontSizeScale;scaledY=0}if(font.remeasure&&width>0&&this.isFontSubpixelAAEnabled){var measuredWidth=ctx.measureText(character).width*1e3/fontSize*fontSizeScale;var characterScaleX=width/measuredWidth;restoreNeeded=true;ctx.save();ctx.scale(characterScaleX,1);scaledX/=characterScaleX}if(simpleFillText&&!accent){ctx.fillText(character,scaledX,scaledY)}else{this.paintChar(character,scaledX,scaledY);if(accent){scaledAccentX=scaledX+accent.offset.x/fontSizeScale;scaledAccentY=scaledY-accent.offset.y/fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY)}}var charWidth=width*widthAdvanceScale+charSpacing*fontDirection;x+=charWidth;if(restoreNeeded){ctx.restore()}}if(vertical){current.y-=x*textHScale}else{current.x+=x*textHScale}ctx.restore()},showType3Text:function CanvasGraphics_showType3Text(glyphs){var ctx=this.ctx;var current=this.current;var font=current.font;var fontSize=current.fontSize;var fontDirection=current.fontDirection;var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var textHScale=current.textHScale*fontDirection;var fontMatrix=current.fontMatrix||FONT_IDENTITY_MATRIX;var glyphsLength=glyphs.length;var i,glyph,width;if(fontSize===0){return}ctx.save();ctx.transform.apply(ctx,current.textMatrix);ctx.translate(current.x,current.y);ctx.scale(textHScale,fontDirection);for(i=0;i<glyphsLength;++i){glyph=glyphs[i];if(glyph===null){this.ctx.translate(wordSpacing,0);current.x+=wordSpacing*textHScale;continue}else if(isNum(glyph)){var spacingLength=-glyph*.001*fontSize;this.ctx.translate(spacingLength,0);current.x+=spacingLength*textHScale;continue}var operatorList=font.charProcOperatorList[glyph.operatorListId];if(!operatorList){warn('Type3 character "'+glyph.operatorListId+'" is not available');continue}this.processingType3=glyph;this.save();ctx.scale(fontSize,fontSize);ctx.transform.apply(ctx,fontMatrix);this.executeOperatorList(operatorList);this.restore();var transformed=Util.applyTransform([glyph.width,0],fontMatrix);width=transformed[0]*fontSize+charSpacing;ctx.translate(width,0);current.x+=width*textHScale}ctx.restore();this.processingType3=null},setCharWidth:function CanvasGraphics_setCharWidth(xWidth,yWidth){},setCharWidthAndBounds:function CanvasGraphics_setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly);this.clip();this.endPath()},getColorN_Pattern:function CanvasGraphics_getColorN_Pattern(IR){var pattern;if(IR[0]==="TilingPattern"){var color=IR[1];pattern=new TilingPattern(IR,color,this.ctx,this.objs,this.commonObjs,this.baseTransform)}else{pattern=getShadingPatternFromIR(IR)}return pattern},setStrokeColorN:function CanvasGraphics_setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function CanvasGraphics_setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments)},setStrokeRGBColor:function CanvasGraphics_setStrokeRGBColor(r,g,b){var color=Util.makeCssRgb(arguments);this.ctx.strokeStyle=color;this.current.strokeColor=color},setFillRGBColor:function CanvasGraphics_setFillRGBColor(r,g,b){var color=Util.makeCssRgb(arguments);this.ctx.fillStyle=color;this.current.fillColor=color},shadingFill:function CanvasGraphics_shadingFill(patternIR){var ctx=this.ctx;this.save();var pattern=getShadingPatternFromIR(patternIR);ctx.fillStyle=pattern.getPattern(ctx,this,true);var inv=ctx.mozCurrentTransformInverse;if(inv){var canvas=ctx.canvas;var width=canvas.width;var height=canvas.height;var bl=Util.applyTransform([0,0],inv);var br=Util.applyTransform([0,height],inv);var ul=Util.applyTransform([width,0],inv);var ur=Util.applyTransform([width,height],inv);var x0=Math.min(bl[0],br[0],ul[0],ur[0]);var y0=Math.min(bl[1],br[1],ul[1],ur[1]);var x1=Math.max(bl[0],br[0],ul[0],ur[0]);var y1=Math.max(bl[1],br[1],ul[1],ur[1]);this.ctx.fillRect(x0,y0,x1-x0,y1-y0)}else{this.ctx.fillRect(-1e10,-1e10,2e10,2e10)}this.restore()},beginInlineImage:function CanvasGraphics_beginInlineImage(){error("Should not call beginInlineImage")},beginImageData:function CanvasGraphics_beginImageData(){error("Should not call beginImageData")},paintFormXObjectBegin:function CanvasGraphics_paintFormXObjectBegin(matrix,bbox){this.save();this.baseTransformStack.push(this.baseTransform);if(isArray(matrix)&&6===matrix.length){this.transform.apply(this,matrix)}this.baseTransform=this.ctx.mozCurrentTransform;if(isArray(bbox)&&4===bbox.length){var width=bbox[2]-bbox[0];var height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height);this.clip();this.endPath()}},paintFormXObjectEnd:function CanvasGraphics_paintFormXObjectEnd(){this.restore();this.baseTransform=this.baseTransformStack.pop()},beginGroup:function CanvasGraphics_beginGroup(group){this.save();var currentCtx=this.ctx;if(!group.isolated){info("TODO: Support non-isolated groups.")}if(group.knockout){warn("Knockout groups not supported.")}var currentTransform=currentCtx.mozCurrentTransform;if(group.matrix){currentCtx.transform.apply(currentCtx,group.matrix)}assert(group.bbox,"Bounding box is required.");var bounds=Util.getAxialAlignedBoundingBox(group.bbox,currentCtx.mozCurrentTransform);var canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=Util.intersect(bounds,canvasBounds)||[0,0,0,0];var offsetX=Math.floor(bounds[0]);var offsetY=Math.floor(bounds[1]);var drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1);var drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1);var scaleX=1,scaleY=1;if(drawnWidth>MAX_GROUP_SIZE){scaleX=drawnWidth/MAX_GROUP_SIZE;drawnWidth=MAX_GROUP_SIZE}if(drawnHeight>MAX_GROUP_SIZE){scaleY=drawnHeight/MAX_GROUP_SIZE;drawnHeight=MAX_GROUP_SIZE}var cacheId="groupAt"+this.groupLevel;if(group.smask){cacheId+="_smask_"+this.smaskCounter++%2}var scratchCanvas=CachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight,true);var groupCtx=scratchCanvas.context;groupCtx.scale(1/scaleX,1/scaleY);groupCtx.translate(-offsetX,-offsetY);groupCtx.transform.apply(groupCtx,currentTransform);if(group.smask){this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX:offsetX,offsetY:offsetY,scaleX:scaleX,scaleY:scaleY,subtype:group.smask.subtype,backdrop:group.smask.backdrop})}else{currentCtx.setTransform(1,0,0,1,0,0);currentCtx.translate(offsetX,offsetY);currentCtx.scale(scaleX,scaleY)}copyCtxState(currentCtx,groupCtx);this.ctx=groupCtx;this.setGState([["BM","Normal"],["ca",1],["CA",1]]);this.groupStack.push(currentCtx);this.groupLevel++},endGroup:function CanvasGraphics_endGroup(group){this.groupLevel--;var groupCtx=this.ctx;this.ctx=this.groupStack.pop();if(this.ctx.imageSmoothingEnabled!==undefined){this.ctx.imageSmoothingEnabled=false}else{this.ctx.mozImageSmoothingEnabled=false}if(group.smask){this.tempSMask=this.smaskStack.pop()}else{this.ctx.drawImage(groupCtx.canvas,0,0)}this.restore()},beginAnnotations:function CanvasGraphics_beginAnnotations(){this.save();this.current=new CanvasExtraState},endAnnotations:function CanvasGraphics_endAnnotations(){this.restore()},beginAnnotation:function CanvasGraphics_beginAnnotation(rect,transform,matrix){this.save();if(isArray(rect)&&4===rect.length){var width=rect[2]-rect[0];var height=rect[3]-rect[1];this.ctx.rect(rect[0],rect[1],width,height);this.clip();this.endPath()}this.transform.apply(this,transform);this.transform.apply(this,matrix)},endAnnotation:function CanvasGraphics_endAnnotation(){this.restore()},paintJpegXObject:function CanvasGraphics_paintJpegXObject(objId,w,h){var domImage=this.objs.get(objId);if(!domImage){warn("Dependent image isn't ready yet");return}this.save();var ctx=this.ctx;ctx.scale(1/w,-1/h);ctx.drawImage(domImage,0,0,domImage.width,domImage.height,0,-h,w,h);if(this.imageLayer){var currentTransform=ctx.mozCurrentTransformInverse;var position=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:objId,left:position[0],top:position[1],width:w/currentTransform[0],height:h/currentTransform[3]})}this.restore()},paintImageMaskXObject:function CanvasGraphics_paintImageMaskXObject(img){var ctx=this.ctx;var width=img.width,height=img.height;var glyph=this.processingType3;if(COMPILE_TYPE3_GLYPHS&&glyph&&!("compiled"in glyph)){var MAX_SIZE_TO_COMPILE=1e3;if(width<=MAX_SIZE_TO_COMPILE&&height<=MAX_SIZE_TO_COMPILE){glyph.compiled=compileType3Glyph({data:img.data,width:width,height:height})}else{glyph.compiled=null}}if(glyph&&glyph.compiled){glyph.compiled(ctx);return}var maskCanvas=CachedCanvases.getCanvas("maskCanvas",width,height);var maskCtx=maskCanvas.context;maskCtx.save();putBinaryImageMask(maskCtx,img);maskCtx.globalCompositeOperation="source-in";var fillColor=this.current.fillColor;maskCtx.fillStyle=fillColor&&fillColor.hasOwnProperty("type")&&fillColor.type==="Pattern"?fillColor.getPattern(maskCtx,this):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();this.paintInlineImageXObject(maskCanvas.canvas)},paintImageMaskXObjectRepeat:function CanvasGraphics_paintImageMaskXObjectRepeat(imgData,scaleX,scaleY,positions){var width=imgData.width;var height=imgData.height;var ctx=this.ctx;var maskCanvas=CachedCanvases.getCanvas("maskCanvas",width,height);var maskCtx=maskCanvas.context;maskCtx.save();putBinaryImageMask(maskCtx,imgData);maskCtx.globalCompositeOperation="source-in";var fillColor=this.current.fillColor;maskCtx.fillStyle=fillColor&&fillColor.hasOwnProperty("type")&&fillColor.type==="Pattern"?fillColor.getPattern(maskCtx,this):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();for(var i=0,ii=positions.length;i<ii;i+=2){ctx.save();ctx.transform(scaleX,0,0,scaleY,positions[i],positions[i+1]);ctx.scale(1,-1);ctx.drawImage(maskCanvas.canvas,0,0,width,height,0,-1,1,1);ctx.restore()}},paintImageMaskXObjectGroup:function CanvasGraphics_paintImageMaskXObjectGroup(images){var ctx=this.ctx;for(var i=0,ii=images.length;i<ii;i++){var image=images[i];var width=image.width,height=image.height;var maskCanvas=CachedCanvases.getCanvas("maskCanvas",width,height);var maskCtx=maskCanvas.context;maskCtx.save();putBinaryImageMask(maskCtx,image);maskCtx.globalCompositeOperation="source-in";var fillColor=this.current.fillColor;maskCtx.fillStyle=fillColor&&fillColor.hasOwnProperty("type")&&fillColor.type==="Pattern"?fillColor.getPattern(maskCtx,this):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();ctx.save();ctx.transform.apply(ctx,image.transform);ctx.scale(1,-1);ctx.drawImage(maskCanvas.canvas,0,0,width,height,0,-1,1,1);ctx.restore()}},paintImageXObject:function CanvasGraphics_paintImageXObject(objId){var imgData=this.objs.get(objId);if(!imgData){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(imgData)},paintImageXObjectRepeat:function CanvasGraphics_paintImageXObjectRepeat(objId,scaleX,scaleY,positions){var imgData=this.objs.get(objId);if(!imgData){warn("Dependent image isn't ready yet");return}var width=imgData.width;var height=imgData.height;var map=[];for(var i=0,ii=positions.length;i<ii;i+=2){map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height})}this.paintInlineImageXObjectGroup(imgData,map)},paintInlineImageXObject:function CanvasGraphics_paintInlineImageXObject(imgData){var width=imgData.width;var height=imgData.height;var ctx=this.ctx;this.save();ctx.scale(1/width,-1/height);var currentTransform=ctx.mozCurrentTransformInverse;var a=currentTransform[0],b=currentTransform[1];var widthScale=Math.max(Math.sqrt(a*a+b*b),1);var c=currentTransform[2],d=currentTransform[3];var heightScale=Math.max(Math.sqrt(c*c+d*d),1);var imgToPaint,tmpCanvas;if(imgData instanceof HTMLElement||!imgData.data){imgToPaint=imgData}else{tmpCanvas=CachedCanvases.getCanvas("inlineImage",width,height);var tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=tmpCanvas.canvas}var paintWidth=width,paintHeight=height;var tmpCanvasId="prescale1";while(widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1){var newWidth=paintWidth,newHeight=paintHeight;if(widthScale>2&&paintWidth>1){newWidth=Math.ceil(paintWidth/2);widthScale/=paintWidth/newWidth}if(heightScale>2&&paintHeight>1){newHeight=Math.ceil(paintHeight/2);heightScale/=paintHeight/newHeight}tmpCanvas=CachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight);tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,newWidth,newHeight);tmpCtx.drawImage(imgToPaint,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight);imgToPaint=tmpCanvas.canvas;paintWidth=newWidth;paintHeight=newHeight;tmpCanvasId=tmpCanvasId==="prescale1"?"prescale2":"prescale1"}ctx.drawImage(imgToPaint,0,0,paintWidth,paintHeight,0,-height,width,height);if(this.imageLayer){var position=this.getCanvasPosition(0,-height);this.imageLayer.appendImage({imgData:imgData,left:position[0],top:position[1],width:width/currentTransform[0],height:height/currentTransform[3]})}this.restore()},paintInlineImageXObjectGroup:function CanvasGraphics_paintInlineImageXObjectGroup(imgData,map){var ctx=this.ctx;var w=imgData.width;var h=imgData.height;var tmpCanvas=CachedCanvases.getCanvas("inlineImage",w,h);var tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);for(var i=0,ii=map.length;i<ii;i++){var entry=map[i];ctx.save();ctx.transform.apply(ctx,entry.transform);ctx.scale(1,-1);ctx.drawImage(tmpCanvas.canvas,entry.x,entry.y,entry.w,entry.h,0,-1,1,1);if(this.imageLayer){var position=this.getCanvasPosition(entry.x,entry.y);this.imageLayer.appendImage({imgData:imgData,left:position[0],top:position[1],width:w,height:h})}ctx.restore()}},paintSolidColorImageMask:function CanvasGraphics_paintSolidColorImageMask(){this.ctx.fillRect(0,0,1,1)},markPoint:function CanvasGraphics_markPoint(tag){},markPointProps:function CanvasGraphics_markPointProps(tag,properties){},beginMarkedContent:function CanvasGraphics_beginMarkedContent(tag){},beginMarkedContentProps:function CanvasGraphics_beginMarkedContentProps(tag,properties){},endMarkedContent:function CanvasGraphics_endMarkedContent(){},beginCompat:function CanvasGraphics_beginCompat(){},endCompat:function CanvasGraphics_endCompat(){},consumePath:function CanvasGraphics_consumePath(){var ctx=this.ctx;if(this.pendingClip){if(this.pendingClip===EO_CLIP){if(ctx.mozFillRule!==undefined){ctx.mozFillRule="evenodd";ctx.clip();ctx.mozFillRule="nonzero"}else{try{ctx.clip("evenodd")}catch(ex){ctx.clip()}}}else{ctx.clip()}this.pendingClip=null}ctx.beginPath()},getSinglePixelWidth:function CanvasGraphics_getSinglePixelWidth(scale){var inverse=this.ctx.mozCurrentTransformInverse;return Math.sqrt(Math.max(inverse[0]*inverse[0]+inverse[1]*inverse[1],inverse[2]*inverse[2]+inverse[3]*inverse[3]))},getCanvasPosition:function CanvasGraphics_getCanvasPosition(x,y){var transform=this.ctx.mozCurrentTransform;return[transform[0]*x+transform[2]*y+transform[4],transform[1]*x+transform[3]*y+transform[5]]}};for(var op in OPS){CanvasGraphics.prototype[OPS[op]]=CanvasGraphics.prototype[op]}return CanvasGraphics}();var WebGLUtils=function WebGLUtilsClosure(){function loadShader(gl,code,shaderType){var shader=gl.createShader(shaderType);gl.shaderSource(shader,code);gl.compileShader(shader);var compiled=gl.getShaderParameter(shader,gl.COMPILE_STATUS);if(!compiled){var errorMsg=gl.getShaderInfoLog(shader);throw new Error("Error during shader compilation: "+errorMsg)}return shader}function createVertexShader(gl,code){return loadShader(gl,code,gl.VERTEX_SHADER)}function createFragmentShader(gl,code){return loadShader(gl,code,gl.FRAGMENT_SHADER)}function createProgram(gl,shaders){var program=gl.createProgram();for(var i=0,ii=shaders.length;i<ii;++i){gl.attachShader(program,shaders[i])}gl.linkProgram(program);var linked=gl.getProgramParameter(program,gl.LINK_STATUS);if(!linked){var errorMsg=gl.getProgramInfoLog(program);throw new Error("Error during program linking: "+errorMsg)}return program}function createTexture(gl,image,textureId){gl.activeTexture(textureId);var texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,texture);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,image);return texture}var currentGL,currentCanvas;function generageGL(){if(currentGL){return}currentCanvas=document.createElement("canvas");currentGL=currentCanvas.getContext("webgl",{premultipliedalpha:false})}var smaskVertexShaderCode="  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ";var smaskFragmentShaderCode="  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ";var smaskCache=null;function initSmaskGL(){var canvas,gl;generageGL();canvas=currentCanvas;currentCanvas=null;gl=currentGL;currentGL=null;var vertexShader=createVertexShader(gl,smaskVertexShaderCode);var fragmentShader=createFragmentShader(gl,smaskFragmentShaderCode);var program=createProgram(gl,[vertexShader,fragmentShader]);gl.useProgram(program);var cache={};cache.gl=gl;cache.canvas=canvas;cache.resolutionLocation=gl.getUniformLocation(program,"u_resolution");cache.positionLocation=gl.getAttribLocation(program,"a_position");cache.backdropLocation=gl.getUniformLocation(program,"u_backdrop");cache.subtypeLocation=gl.getUniformLocation(program,"u_subtype");var texCoordLocation=gl.getAttribLocation(program,"a_texCoord");var texLayerLocation=gl.getUniformLocation(program,"u_image");var texMaskLocation=gl.getUniformLocation(program,"u_mask");var texCoordBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,texCoordBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),gl.STATIC_DRAW);gl.enableVertexAttribArray(texCoordLocation);gl.vertexAttribPointer(texCoordLocation,2,gl.FLOAT,false,0,0);gl.uniform1i(texLayerLocation,0);gl.uniform1i(texMaskLocation,1);smaskCache=cache}function composeSMask(layer,mask,properties){var width=layer.width,height=layer.height;if(!smaskCache){initSmaskGL()}var cache=smaskCache,canvas=cache.canvas,gl=cache.gl;canvas.width=width;canvas.height=height;gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight);gl.uniform2f(cache.resolutionLocation,width,height);if(properties.backdrop){gl.uniform4f(cache.resolutionLocation,properties.backdrop[0],properties.backdrop[1],properties.backdrop[2],1)}else{gl.uniform4f(cache.resolutionLocation,0,0,0,0)}gl.uniform1i(cache.subtypeLocation,properties.subtype==="Luminosity"?1:0);var texture=createTexture(gl,layer,gl.TEXTURE0);var maskTexture=createTexture(gl,mask,gl.TEXTURE1);var buffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,buffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,0,width,0,0,height,0,height,width,0,width,height]),gl.STATIC_DRAW);gl.enableVertexAttribArray(cache.positionLocation);gl.vertexAttribPointer(cache.positionLocation,2,gl.FLOAT,false,0,0);gl.clearColor(0,0,0,0);gl.enable(gl.BLEND);gl.blendFunc(gl.ONE,gl.ONE_MINUS_SRC_ALPHA);gl.clear(gl.COLOR_BUFFER_BIT);gl.drawArrays(gl.TRIANGLES,0,6);gl.flush();gl.deleteTexture(texture);gl.deleteTexture(maskTexture);gl.deleteBuffer(buffer);return canvas}var figuresVertexShaderCode="  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ";var figuresFragmentShaderCode="  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ";var figuresCache=null;function initFiguresGL(){var canvas,gl;generageGL();canvas=currentCanvas;currentCanvas=null;gl=currentGL;currentGL=null;var vertexShader=createVertexShader(gl,figuresVertexShaderCode);var fragmentShader=createFragmentShader(gl,figuresFragmentShaderCode);var program=createProgram(gl,[vertexShader,fragmentShader]);gl.useProgram(program);var cache={};cache.gl=gl;cache.canvas=canvas;cache.resolutionLocation=gl.getUniformLocation(program,"u_resolution");cache.scaleLocation=gl.getUniformLocation(program,"u_scale");cache.offsetLocation=gl.getUniformLocation(program,"u_offset");cache.positionLocation=gl.getAttribLocation(program,"a_position");cache.colorLocation=gl.getAttribLocation(program,"a_color");figuresCache=cache}function drawFigures(width,height,backgroundColor,figures,context){if(!figuresCache){initFiguresGL()}var cache=figuresCache,canvas=cache.canvas,gl=cache.gl;canvas.width=width;canvas.height=height;gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight);gl.uniform2f(cache.resolutionLocation,width,height);var count=0;var i,ii,rows;for(i=0,ii=figures.length;i<ii;i++){switch(figures[i].type){case"lattice":rows=figures[i].coords.length/figures[i].verticesPerRow|0;count+=(rows-1)*(figures[i].verticesPerRow-1)*6;break;case"triangles":count+=figures[i].coords.length;break}}var coords=new Float32Array(count*2);var colors=new Uint8Array(count*3);var coordsMap=context.coords,colorsMap=context.colors;var pIndex=0,cIndex=0;for(i=0,ii=figures.length;i<ii;i++){var figure=figures[i],ps=figure.coords,cs=figure.colors;switch(figure.type){case"lattice":var cols=figure.verticesPerRow;rows=ps.length/cols|0;for(var row=1;row<rows;row++){var offset=row*cols+1;for(var col=1;col<cols;col++,offset++){coords[pIndex]=coordsMap[ps[offset-cols-1]];coords[pIndex+1]=coordsMap[ps[offset-cols-1]+1];coords[pIndex+2]=coordsMap[ps[offset-cols]];coords[pIndex+3]=coordsMap[ps[offset-cols]+1];coords[pIndex+4]=coordsMap[ps[offset-1]];coords[pIndex+5]=coordsMap[ps[offset-1]+1];colors[cIndex]=colorsMap[cs[offset-cols-1]];colors[cIndex+1]=colorsMap[cs[offset-cols-1]+1];colors[cIndex+2]=colorsMap[cs[offset-cols-1]+2];colors[cIndex+3]=colorsMap[cs[offset-cols]];colors[cIndex+4]=colorsMap[cs[offset-cols]+1];colors[cIndex+5]=colorsMap[cs[offset-cols]+2];colors[cIndex+6]=colorsMap[cs[offset-1]];colors[cIndex+7]=colorsMap[cs[offset-1]+1];colors[cIndex+8]=colorsMap[cs[offset-1]+2];coords[pIndex+6]=coords[pIndex+2];coords[pIndex+7]=coords[pIndex+3];coords[pIndex+8]=coords[pIndex+4];coords[pIndex+9]=coords[pIndex+5];coords[pIndex+10]=coordsMap[ps[offset]];coords[pIndex+11]=coordsMap[ps[offset]+1];colors[cIndex+9]=colors[cIndex+3];colors[cIndex+10]=colors[cIndex+4];colors[cIndex+11]=colors[cIndex+5];colors[cIndex+12]=colors[cIndex+6];colors[cIndex+13]=colors[cIndex+7];colors[cIndex+14]=colors[cIndex+8];colors[cIndex+15]=colorsMap[cs[offset]];colors[cIndex+16]=colorsMap[cs[offset]+1];colors[cIndex+17]=colorsMap[cs[offset]+2];pIndex+=12;cIndex+=18}}break;case"triangles":for(var j=0,jj=ps.length;j<jj;j++){coords[pIndex]=coordsMap[ps[j]];coords[pIndex+1]=coordsMap[ps[j]+1];colors[cIndex]=colorsMap[cs[i]];colors[cIndex+1]=colorsMap[cs[j]+1];colors[cIndex+2]=colorsMap[cs[j]+2];pIndex+=2;cIndex+=3}break}}if(backgroundColor){gl.clearColor(backgroundColor[0]/255,backgroundColor[1]/255,backgroundColor[2]/255,1)}else{gl.clearColor(0,0,0,0)}gl.clear(gl.COLOR_BUFFER_BIT);var coordsBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,coordsBuffer);gl.bufferData(gl.ARRAY_BUFFER,coords,gl.STATIC_DRAW);gl.enableVertexAttribArray(cache.positionLocation);gl.vertexAttribPointer(cache.positionLocation,2,gl.FLOAT,false,0,0);var colorsBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,colorsBuffer);gl.bufferData(gl.ARRAY_BUFFER,colors,gl.STATIC_DRAW);gl.enableVertexAttribArray(cache.colorLocation);gl.vertexAttribPointer(cache.colorLocation,3,gl.UNSIGNED_BYTE,false,0,0);gl.uniform2f(cache.scaleLocation,context.scaleX,context.scaleY);gl.uniform2f(cache.offsetLocation,context.offsetX,context.offsetY);gl.drawArrays(gl.TRIANGLES,0,count);gl.flush();gl.deleteBuffer(coordsBuffer);gl.deleteBuffer(colorsBuffer);return canvas}function cleanup(){if(smaskCache&&smaskCache.canvas){smaskCache.canvas.width=0;smaskCache.canvas.height=0}if(figuresCache&&figuresCache.canvas){figuresCache.canvas.width=0;figuresCache.canvas.height=0}smaskCache=null;figuresCache=null}return{get isEnabled(){if(PDFJS.disableWebGL){return false}var enabled=false;try{generageGL();enabled=!!currentGL}catch(e){}return shadow(this,"isEnabled",enabled)},composeSMask:composeSMask,drawFigures:drawFigures,clear:cleanup}}();var ShadingIRs={};ShadingIRs.RadialAxial={fromIR:function RadialAxial_fromIR(raw){var type=raw[1];var colorStops=raw[2];var p0=raw[3];var p1=raw[4];var r0=raw[5];var r1=raw[6];return{type:"Pattern",getPattern:function RadialAxial_getPattern(ctx){var grad;if(type==="axial"){grad=ctx.createLinearGradient(p0[0],p0[1],p1[0],p1[1])}else if(type==="radial"){grad=ctx.createRadialGradient(p0[0],p0[1],r0,p1[0],p1[1],r1)}for(var i=0,ii=colorStops.length;i<ii;++i){var c=colorStops[i];grad.addColorStop(c[0],c[1])
}return grad}}}};var createMeshCanvas=function createMeshCanvasClosure(){function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){var coords=context.coords,colors=context.colors;var bytes=data.data,rowSize=data.width*4;var tmp;if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp}if(coords[p2+1]>coords[p3+1]){tmp=p2;p2=p3;p3=tmp;tmp=c2;c2=c3;c3=tmp}if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp}var x1=(coords[p1]+context.offsetX)*context.scaleX;var y1=(coords[p1+1]+context.offsetY)*context.scaleY;var x2=(coords[p2]+context.offsetX)*context.scaleX;var y2=(coords[p2+1]+context.offsetY)*context.scaleY;var x3=(coords[p3]+context.offsetX)*context.scaleX;var y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(y1>=y3){return}var c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2];var c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2];var c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2];var minY=Math.round(y1),maxY=Math.round(y3);var xa,car,cag,cab;var xb,cbr,cbg,cbb;var k;for(var y=minY;y<=maxY;y++){if(y<y2){k=y<y1?0:y1===y2?1:(y1-y)/(y1-y2);xa=x1-(x1-x2)*k;car=c1r-(c1r-c2r)*k;cag=c1g-(c1g-c2g)*k;cab=c1b-(c1b-c2b)*k}else{k=y>y3?1:y2===y3?0:(y2-y)/(y2-y3);xa=x2-(x2-x3)*k;car=c2r-(c2r-c3r)*k;cag=c2g-(c2g-c3g)*k;cab=c2b-(c2b-c3b)*k}k=y<y1?0:y>y3?1:(y1-y)/(y1-y3);xb=x1-(x1-x3)*k;cbr=c1r-(c1r-c3r)*k;cbg=c1g-(c1g-c3g)*k;cbb=c1b-(c1b-c3b)*k;var x1_=Math.round(Math.min(xa,xb));var x2_=Math.round(Math.max(xa,xb));var j=rowSize*y+x1_*4;for(var x=x1_;x<=x2_;x++){k=(xa-x)/(xa-xb);k=k<0?0:k>1?1:k;bytes[j++]=car-(car-cbr)*k|0;bytes[j++]=cag-(cag-cbg)*k|0;bytes[j++]=cab-(cab-cbb)*k|0;bytes[j++]=255}}}function drawFigure(data,figure,context){var ps=figure.coords;var cs=figure.colors;var i,ii;switch(figure.type){case"lattice":var verticesPerRow=figure.verticesPerRow;var rows=Math.floor(ps.length/verticesPerRow)-1;var cols=verticesPerRow-1;for(i=0;i<rows;i++){var q=i*verticesPerRow;for(var j=0;j<cols;j++,q++){drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]);drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow])}}break;case"triangles":for(i=0,ii=ps.length;i<ii;i+=3){drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2])}break;default:error("illigal figure");break}}function createMeshCanvas(bounds,combinesScale,coords,colors,figures,backgroundColor){var EXPECTED_SCALE=1.1;var MAX_PATTERN_SIZE=3e3;var offsetX=Math.floor(bounds[0]);var offsetY=Math.floor(bounds[1]);var boundsWidth=Math.ceil(bounds[2])-offsetX;var boundsHeight=Math.ceil(bounds[3])-offsetY;var width=Math.min(Math.ceil(Math.abs(boundsWidth*combinesScale[0]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);var height=Math.min(Math.ceil(Math.abs(boundsHeight*combinesScale[1]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);var scaleX=boundsWidth/width;var scaleY=boundsHeight/height;var context={coords:coords,colors:colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX,scaleY:1/scaleY};var canvas,tmpCanvas,i,ii;if(WebGLUtils.isEnabled){canvas=WebGLUtils.drawFigures(width,height,backgroundColor,figures,context);tmpCanvas=CachedCanvases.getCanvas("mesh",width,height,false);tmpCanvas.context.drawImage(canvas,0,0);canvas=tmpCanvas.canvas}else{tmpCanvas=CachedCanvases.getCanvas("mesh",width,height,false);var tmpCtx=tmpCanvas.context;var data=tmpCtx.createImageData(width,height);if(backgroundColor){var bytes=data.data;for(i=0,ii=bytes.length;i<ii;i+=4){bytes[i]=backgroundColor[0];bytes[i+1]=backgroundColor[1];bytes[i+2]=backgroundColor[2];bytes[i+3]=255}}for(i=0;i<figures.length;i++){drawFigure(data,figures[i],context)}tmpCtx.putImageData(data,0,0);canvas=tmpCanvas.canvas}return{canvas:canvas,offsetX:offsetX,offsetY:offsetY,scaleX:scaleX,scaleY:scaleY}}return createMeshCanvas}();ShadingIRs.Mesh={fromIR:function Mesh_fromIR(raw){var coords=raw[2];var colors=raw[3];var figures=raw[4];var bounds=raw[5];var matrix=raw[6];var background=raw[8];return{type:"Pattern",getPattern:function Mesh_getPattern(ctx,owner,shadingFill){var scale;if(shadingFill){scale=Util.singularValueDecompose2dScale(ctx.mozCurrentTransform)}else{scale=Util.singularValueDecompose2dScale(owner.baseTransform);if(matrix){var matrixScale=Util.singularValueDecompose2dScale(matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]]}}var temporaryPatternCanvas=createMeshCanvas(bounds,scale,coords,colors,figures,shadingFill?null:background);if(!shadingFill){ctx.setTransform.apply(ctx,owner.baseTransform);if(matrix){ctx.transform.apply(ctx,matrix)}}ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY);return ctx.createPattern(temporaryPatternCanvas.canvas,"no-repeat")}}}};ShadingIRs.Dummy={fromIR:function Dummy_fromIR(){return{type:"Pattern",getPattern:function Dummy_fromIR_getPattern(){return"hotpink"}}}};function getShadingPatternFromIR(raw){var shadingIR=ShadingIRs[raw[0]];if(!shadingIR){error("Unknown IR type: "+raw[0])}return shadingIR.fromIR(raw)}var TilingPattern=function TilingPatternClosure(){var PaintType={COLORED:1,UNCOLORED:2};var MAX_PATTERN_SIZE=3e3;function TilingPattern(IR,color,ctx,objs,commonObjs,baseTransform){this.operatorList=IR[2];this.matrix=IR[3]||[1,0,0,1,0,0];this.bbox=IR[4];this.xstep=IR[5];this.ystep=IR[6];this.paintType=IR[7];this.tilingType=IR[8];this.color=color;this.objs=objs;this.commonObjs=commonObjs;this.baseTransform=baseTransform;this.type="Pattern";this.ctx=ctx}TilingPattern.prototype={createPatternCanvas:function TilinPattern_createPatternCanvas(owner){var operatorList=this.operatorList;var bbox=this.bbox;var xstep=this.xstep;var ystep=this.ystep;var paintType=this.paintType;var tilingType=this.tilingType;var color=this.color;var objs=this.objs;var commonObjs=this.commonObjs;info("TilingType: "+tilingType);var x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3];var topLeft=[x0,y0];var botRight=[x0+xstep,y0+ystep];var width=botRight[0]-topLeft[0];var height=botRight[1]-topLeft[1];var matrixScale=Util.singularValueDecompose2dScale(this.matrix);var curMatrixScale=Util.singularValueDecompose2dScale(this.baseTransform);var combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]];width=Math.min(Math.ceil(Math.abs(width*combinedScale[0])),MAX_PATTERN_SIZE);height=Math.min(Math.ceil(Math.abs(height*combinedScale[1])),MAX_PATTERN_SIZE);var tmpCanvas=CachedCanvases.getCanvas("pattern",width,height,true);var tmpCtx=tmpCanvas.context;var graphics=new CanvasGraphics(tmpCtx,commonObjs,objs);graphics.groupLevel=owner.groupLevel;this.setFillAndStrokeStyleToContext(tmpCtx,paintType,color);this.setScale(width,height,xstep,ystep);this.transformToScale(graphics);var tmpTranslate=[1,0,0,1,-topLeft[0],-topLeft[1]];graphics.transform.apply(graphics,tmpTranslate);this.clipBbox(graphics,bbox,x0,y0,x1,y1);graphics.executeOperatorList(operatorList);return tmpCanvas.canvas},setScale:function TilingPattern_setScale(width,height,xstep,ystep){this.scale=[width/xstep,height/ystep]},transformToScale:function TilingPattern_transformToScale(graphics){var scale=this.scale;var tmpScale=[scale[0],0,0,scale[1],0,0];graphics.transform.apply(graphics,tmpScale)},scaleToContext:function TilingPattern_scaleToContext(){var scale=this.scale;this.ctx.scale(1/scale[0],1/scale[1])},clipBbox:function clipBbox(graphics,bbox,x0,y0,x1,y1){if(bbox&&isArray(bbox)&&bbox.length===4){var bboxWidth=x1-x0;var bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight);graphics.clip();graphics.endPath()}},setFillAndStrokeStyleToContext:function setFillAndStrokeStyleToContext(context,paintType,color){switch(paintType){case PaintType.COLORED:var ctx=this.ctx;context.fillStyle=ctx.fillStyle;context.strokeStyle=ctx.strokeStyle;break;case PaintType.UNCOLORED:var cssColor=Util.makeCssRgb(color);context.fillStyle=cssColor;context.strokeStyle=cssColor;break;default:error("Unsupported paint type: "+paintType)}},getPattern:function TilingPattern_getPattern(ctx,owner){var temporaryPatternCanvas=this.createPatternCanvas(owner);ctx=this.ctx;ctx.setTransform.apply(ctx,this.baseTransform);ctx.transform.apply(ctx,this.matrix);this.scaleToContext();return ctx.createPattern(temporaryPatternCanvas,"repeat")}};return TilingPattern}();PDFJS.disableFontFace=false;var FontLoader={insertRule:function fontLoaderInsertRule(rule){var styleElement=document.getElementById("PDFJS_FONT_STYLE_TAG");if(!styleElement){styleElement=document.createElement("style");styleElement.id="PDFJS_FONT_STYLE_TAG";document.documentElement.getElementsByTagName("head")[0].appendChild(styleElement)}var styleSheet=styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length)},clear:function fontLoaderClear(){var styleElement=document.getElementById("PDFJS_FONT_STYLE_TAG");if(styleElement){styleElement.parentNode.removeChild(styleElement)}},get loadTestFont(){return shadow(this,"loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQ"+"AABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwA"+"AAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbm"+"FtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAA"+"AADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6A"+"ABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAA"+"MQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAA"+"AAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAA"+"AAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQ"+"AAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMA"+"AQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAA"+"EAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAA"+"AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAA"+"AAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgc"+"A/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWF"+"hYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQA"+"AAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAg"+"ABAAAAAAAAAAAD6AAAAAAAAA=="))},loadTestFontId:0,loadingContext:{requests:[],nextRequestId:0},isSyncFontLoadingSupported:function detectSyncFontLoadingSupport(){if(isWorker){return false}var userAgent=window.navigator.userAgent;var m=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(userAgent);if(m&&m[1]>=14){return true}if(userAgent==="node"){return true}return false}(),bind:function fontLoaderBind(fonts,callback){assert(!isWorker,"bind() shall be called from main thread");var rules=[],fontsToLoad=[];for(var i=0,ii=fonts.length;i<ii;i++){var font=fonts[i];if(font.attached||font.loading===false){continue}font.attached=true;var rule=font.bindDOM();if(rule){rules.push(rule);fontsToLoad.push(font)}}var request=FontLoader.queueLoadingCallback(callback);if(rules.length>0&&!this.isSyncFontLoadingSupported){FontLoader.prepareFontLoadEvent(rules,fontsToLoad,request)}else{request.complete()}},queueLoadingCallback:function FontLoader_queueLoadingCallback(callback){function LoadLoader_completeRequest(){assert(!request.end,"completeRequest() cannot be called twice");request.end=Date.now();while(context.requests.length>0&&context.requests[0].end){var otherRequest=context.requests.shift();setTimeout(otherRequest.callback,0)}}var context=FontLoader.loadingContext;var requestId="pdfjs-font-loading-"+context.nextRequestId++;var request={id:requestId,complete:LoadLoader_completeRequest,callback:callback,started:Date.now()};context.requests.push(request);return request},prepareFontLoadEvent:function fontLoaderPrepareFontLoadEvent(rules,fonts,request){function int32(data,offset){return data.charCodeAt(offset)<<24|data.charCodeAt(offset+1)<<16|data.charCodeAt(offset+2)<<8|data.charCodeAt(offset+3)&255}function spliceString(s,offset,remove,insert){var chunk1=s.substr(0,offset);var chunk2=s.substr(offset+remove);return chunk1+insert+chunk2}var i,ii;var canvas=document.createElement("canvas");canvas.width=1;canvas.height=1;var ctx=canvas.getContext("2d");var called=0;function isFontReady(name,callback){called++;if(called>30){warn("Load test font never loaded.");callback();return}ctx.font="30px "+name;ctx.fillText(".",0,20);var imageData=ctx.getImageData(0,0,1,1);if(imageData.data[3]>0){callback();return}setTimeout(isFontReady.bind(null,name,callback))}var loadTestFontId="lt"+Date.now()+this.loadTestFontId++;var data=this.loadTestFont;var COMMENT_OFFSET=976;data=spliceString(data,COMMENT_OFFSET,loadTestFontId.length,loadTestFontId);var CFF_CHECKSUM_OFFSET=16;var XXXX_VALUE=1482184792;var checksum=int32(data,CFF_CHECKSUM_OFFSET);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4){checksum=checksum-XXXX_VALUE+int32(loadTestFontId,i)|0}if(i<loadTestFontId.length){checksum=checksum-XXXX_VALUE+int32(loadTestFontId+"XXX",i)|0}data=spliceString(data,CFF_CHECKSUM_OFFSET,4,string32(checksum));var url="url(data:font/opentype;base64,"+btoa(data)+");";var rule='@font-face { font-family:"'+loadTestFontId+'";src:'+url+"}";FontLoader.insertRule(rule);var names=[];for(i=0,ii=fonts.length;i<ii;i++){names.push(fonts[i].loadedName)}names.push(loadTestFontId);var div=document.createElement("div");div.setAttribute("style","visibility: hidden;"+"width: 10px; height: 10px;"+"position: absolute; top: 0px; left: 0px;");for(i=0,ii=names.length;i<ii;++i){var span=document.createElement("span");span.textContent="Hi";span.style.fontFamily=names[i];div.appendChild(span)}document.body.appendChild(div);isFontReady(loadTestFontId,function(){document.body.removeChild(div);request.complete()})}};var FontFace=function FontFaceClosure(){function FontFace(name,file,properties){this.compiledGlyphs={};if(arguments.length===1){var data=arguments[0];for(var i in data){this[i]=data[i]}return}}FontFace.prototype={bindDOM:function FontFace_bindDOM(){if(!this.data){return null}if(PDFJS.disableFontFace){this.disableFontFace=true;return null}var data=bytesToString(new Uint8Array(this.data));var fontName=this.loadedName;var url="url(data:"+this.mimetype+";base64,"+window.btoa(data)+");";var rule='@font-face { font-family:"'+fontName+'";src:'+url+"}";FontLoader.insertRule(rule);if(PDFJS.pdfBug&&"FontInspector"in globalScope&&globalScope["FontInspector"].enabled){globalScope["FontInspector"].fontAdded(this,url)}return rule},getPathGenerator:function(objs,character){if(!(character in this.compiledGlyphs)){var js=objs.get(this.loadedName+"_path_"+character);this.compiledGlyphs[character]=new Function("c","size",js)}return this.compiledGlyphs[character]}};return FontFace}();var HIGHLIGHT_OFFSET=4;var ANNOT_MIN_SIZE=10;var AnnotationUtils=function AnnotationUtilsClosure(){function setTextStyles(element,item,fontObj){var style=element.style;style.fontSize=item.fontSize+"px";style.direction=item.fontDirection<0?"rtl":"ltr";if(!fontObj){return}style.fontWeight=fontObj.black?fontObj.bold?"bolder":"bold":fontObj.bold?"bold":"normal";style.fontStyle=fontObj.italic?"italic":"normal";var fontName=fontObj.loadedName;var fontFamily=fontName?'"'+fontName+'", ':"";var fallbackName=fontObj.fallbackName||"Helvetica, sans-serif";style.fontFamily=fontFamily+fallbackName}function getEmptyContainer(tagName,rect,borderWidth){var bWidth=borderWidth||0;var element=document.createElement(tagName);element.style.borderWidth=bWidth+"px";var width=rect[2]-rect[0]-2*bWidth;var height=rect[3]-rect[1]-2*bWidth;element.style.width=width+"px";element.style.height=height+"px";return element}function initContainer(item){var container=getEmptyContainer("section",item.rect,item.borderWidth);container.style.backgroundColor=item.color;var color=item.color;var rgb=[];for(var i=0;i<3;++i){rgb[i]=Math.round(color[i]*255)}item.colorCssRgb=Util.makeCssRgb(rgb);var highlight=document.createElement("div");highlight.className="annotationHighlight";highlight.style.left=highlight.style.top=-HIGHLIGHT_OFFSET+"px";highlight.style.right=highlight.style.bottom=-HIGHLIGHT_OFFSET+"px";highlight.setAttribute("hidden",true);item.highlightElement=highlight;container.appendChild(item.highlightElement);return container}function getHtmlElementForTextWidgetAnnotation(item,commonObjs){var element=getEmptyContainer("div",item.rect,0);element.style.display="table";var content=document.createElement("div");content.textContent=item.fieldValue;var textAlignment=item.textAlignment;content.style.textAlign=["left","center","right"][textAlignment];content.style.verticalAlign="middle";content.style.display="table-cell";var fontObj=item.fontRefName?commonObjs.getData(item.fontRefName):null;setTextStyles(content,item,fontObj);element.appendChild(content);return element}function getHtmlElementForTextAnnotation(item){var rect=item.rect;if(rect[3]-rect[1]<ANNOT_MIN_SIZE){rect[3]=rect[1]+ANNOT_MIN_SIZE}if(rect[2]-rect[0]<ANNOT_MIN_SIZE){rect[2]=rect[0]+(rect[3]-rect[1])}var container=initContainer(item);container.className="annotText";var image=document.createElement("img");image.style.height=container.style.height;image.style.width=container.style.width;var iconName=item.name;image.src=PDFJS.imageResourcesPath+"annotation-"+iconName.toLowerCase()+".svg";image.alt="[{{type}} Annotation]";image.dataset.l10nId="text_annotation_type";image.dataset.l10nArgs=JSON.stringify({type:iconName});var contentWrapper=document.createElement("div");contentWrapper.className="annotTextContentWrapper";contentWrapper.style.left=Math.floor(rect[2]-rect[0]+5)+"px";contentWrapper.style.top="-10px";var content=document.createElement("div");content.className="annotTextContent";content.setAttribute("hidden",true);var i,ii;if(item.hasBgColor){var color=item.color;var rgb=[];for(i=0;i<3;++i){var c=Math.round(color[i]*255);rgb[i]=Math.round((255-c)*.7)+c}content.style.backgroundColor=Util.makeCssRgb(rgb)}var title=document.createElement("h1");var text=document.createElement("p");title.textContent=item.title;if(!item.content&&!item.title){content.setAttribute("hidden",true)}else{var e=document.createElement("span");var lines=item.content.split(/(?:\r\n?|\n)/);for(i=0,ii=lines.length;i<ii;++i){var line=lines[i];e.appendChild(document.createTextNode(line));if(i<ii-1){e.appendChild(document.createElement("br"))}}text.appendChild(e);var pinned=false;var showAnnotation=function showAnnotation(pin){if(pin){pinned=true}if(content.hasAttribute("hidden")){container.style.zIndex+=1;content.removeAttribute("hidden")}};var hideAnnotation=function hideAnnotation(unpin){if(unpin){pinned=false}if(!content.hasAttribute("hidden")&&!pinned){container.style.zIndex-=1;content.setAttribute("hidden",true)}};var toggleAnnotation=function toggleAnnotation(){if(pinned){hideAnnotation(true)}else{showAnnotation(true)}};image.addEventListener("click",function image_clickHandler(){toggleAnnotation()},false);image.addEventListener("mouseover",function image_mouseOverHandler(){showAnnotation()},false);image.addEventListener("mouseout",function image_mouseOutHandler(){hideAnnotation()},false);content.addEventListener("click",function content_clickHandler(){hideAnnotation(true)},false)}content.appendChild(title);content.appendChild(text);contentWrapper.appendChild(content);container.appendChild(image);container.appendChild(contentWrapper);return container}function getHtmlElementForLinkAnnotation(item){var container=initContainer(item);container.className="annotLink";container.style.borderColor=item.colorCssRgb;container.style.borderStyle="solid";var link=document.createElement("a");link.href=link.title=item.url||"";container.appendChild(link);return container}function getHtmlElement(data,objs){switch(data.annotationType){case AnnotationType.WIDGET:return getHtmlElementForTextWidgetAnnotation(data,objs);case AnnotationType.TEXT:return getHtmlElementForTextAnnotation(data);case AnnotationType.LINK:return getHtmlElementForLinkAnnotation(data);default:throw new Error("Unsupported annotationType: "+data.annotationType)}}return{getHtmlElement:getHtmlElement}}();PDFJS.AnnotationUtils=AnnotationUtils;var SVG_DEFAULTS={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"};var convertImgDataToPng=function convertImgDataToPngClosure(){var PNG_HEADER=new Uint8Array([137,80,78,71,13,10,26,10]);var CHUNK_WRAPPER_SIZE=12;var crcTable=new Int32Array(256);for(var i=0;i<256;i++){var c=i;for(var h=0;h<8;h++){if(c&1){c=3988292384^c>>1&2147483647}else{c=c>>1&2147483647}}crcTable[i]=c}function crc32(data,start,end){var crc=-1;for(var i=start;i<end;i++){var a=(crc^data[i])&255;var b=crcTable[a];crc=crc>>>8^b}return crc^-1}function writePngChunk(type,body,data,offset){var p=offset;var len=body.length;data[p]=len>>24&255;data[p+1]=len>>16&255;data[p+2]=len>>8&255;data[p+3]=len&255;p+=4;data[p]=type.charCodeAt(0)&255;data[p+1]=type.charCodeAt(1)&255;data[p+2]=type.charCodeAt(2)&255;data[p+3]=type.charCodeAt(3)&255;p+=4;data.set(body,p);p+=body.length;var crc=crc32(data,offset+4,p);data[p]=crc>>24&255;data[p+1]=crc>>16&255;data[p+2]=crc>>8&255;data[p+3]=crc&255}function adler32(data,start,end){var a=1;var b=0;for(var i=start;i<end;++i){a=(a+(data[i]&255))%65521;b=(b+a)%65521}return b<<16|a}function encode(imgData,kind){var width=imgData.width;var height=imgData.height;var bitDepth,colorType,lineSize;var bytes=imgData.data;switch(kind){case ImageKind.GRAYSCALE_1BPP:colorType=0;bitDepth=1;lineSize=width+7>>3;break;case ImageKind.RGB_24BPP:colorType=2;bitDepth=8;lineSize=width*3;break;case ImageKind.RGBA_32BPP:colorType=6;bitDepth=8;lineSize=width*4;break;default:throw new Error("invalid format")}var literals=new Uint8Array((1+lineSize)*height);var offsetLiterals=0,offsetBytes=0;var y,i;for(y=0;y<height;++y){literals[offsetLiterals++]=0;literals.set(bytes.subarray(offsetBytes,offsetBytes+lineSize),offsetLiterals);offsetBytes+=lineSize;offsetLiterals+=lineSize}if(kind===ImageKind.GRAYSCALE_1BPP){offsetLiterals=0;for(y=0;y<height;y++){offsetLiterals++;for(i=0;i<lineSize;i++){literals[offsetLiterals++]^=255}}}var ihdr=new Uint8Array([width>>24&255,width>>16&255,width>>8&255,width&255,height>>24&255,height>>16&255,height>>8&255,height&255,bitDepth,colorType,0,0,0]);var len=literals.length;var maxBlockLength=65535;var deflateBlocks=Math.ceil(len/maxBlockLength);var idat=new Uint8Array(2+len+deflateBlocks*5+4);var pi=0;idat[pi++]=120;idat[pi++]=156;var pos=0;while(len>maxBlockLength){idat[pi++]=0;idat[pi++]=255;idat[pi++]=255;idat[pi++]=0;idat[pi++]=0;idat.set(literals.subarray(pos,pos+maxBlockLength),pi);pi+=maxBlockLength;pos+=maxBlockLength;len-=maxBlockLength}idat[pi++]=1;idat[pi++]=len&255;idat[pi++]=len>>8&255;idat[pi++]=~len&65535&255;idat[pi++]=(~len&65535)>>8&255;idat.set(literals.subarray(pos),pi);pi+=literals.length-pos;var adler=adler32(literals,0,literals.length);idat[pi++]=adler>>24&255;idat[pi++]=adler>>16&255;idat[pi++]=adler>>8&255;idat[pi++]=adler&255;var pngLength=PNG_HEADER.length+CHUNK_WRAPPER_SIZE*3+ihdr.length+idat.length;var data=new Uint8Array(pngLength);var offset=0;data.set(PNG_HEADER,offset);offset+=PNG_HEADER.length;writePngChunk("IHDR",ihdr,data,offset);offset+=CHUNK_WRAPPER_SIZE+ihdr.length;writePngChunk("IDATA",idat,data,offset);offset+=CHUNK_WRAPPER_SIZE+idat.length;writePngChunk("IEND",new Uint8Array(0),data,offset);return PDFJS.createObjectURL(data,"image/png")}return function convertImgDataToPng(imgData){var kind=imgData.kind===undefined?ImageKind.GRAYSCALE_1BPP:imgData.kind;return encode(imgData,kind)}}();var SVGExtraState=function SVGExtraStateClosure(){function SVGExtraState(){this.fontSizeScale=1;this.fontWeight=SVG_DEFAULTS.fontWeight;this.fontSize=0;this.textMatrix=IDENTITY_MATRIX;this.fontMatrix=FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRise=0;this.fillColor=SVG_DEFAULTS.fillColor;this.strokeColor="#000000";this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.lineJoin="";this.lineCap="";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=[];this.clipId="";this.pendingClip=false;this.maskId=""}SVGExtraState.prototype={clone:function SVGExtraState_clone(){return Object.create(this)},setCurrentPoint:function SVGExtraState_setCurrentPoint(x,y){this.x=x;this.y=y}};return SVGExtraState}();var SVGGraphics=function SVGGraphicsClosure(){function createScratchSVG(width,height){var NS="http://www.w3.org/2000/svg";var svg=document.createElementNS(NS,"svg:svg");svg.setAttributeNS(null,"version","1.1");svg.setAttributeNS(null,"width",width+"px");svg.setAttributeNS(null,"height",height+"px");svg.setAttributeNS(null,"viewBox","0 0 "+width+" "+height);return svg}function opListToTree(opList){var opTree=[];var tmp=[];var opListLen=opList.length;for(var x=0;x<opListLen;x++){if(opList[x].fn==="save"){opTree.push({fnId:92,fn:"group",items:[]});tmp.push(opTree);opTree=opTree[opTree.length-1].items;continue}if(opList[x].fn==="restore"){opTree=tmp.pop()}else{opTree.push(opList[x])}}return opTree}function pf(value){if(value===(value|0)){return value.toString()}var s=value.toFixed(10);var i=s.length-1;if(s[i]!=="0"){return s}do{i--}while(s[i]==="0");return s.substr(0,s[i]==="."?i:i+1)}function pm(m){if(m[4]===0&&m[5]===0){if(m[1]===0&&m[2]===0){if(m[0]===1&&m[3]===1){return""}return"scale("+pf(m[0])+" "+pf(m[3])+")"}if(m[0]===m[3]&&m[1]===-m[2]){var a=Math.acos(m[0])*180/Math.PI;return"rotate("+pf(a)+")"}}else{if(m[0]===1&&m[1]===0&&m[2]===0&&m[3]===1){return"translate("+pf(m[4])+" "+pf(m[5])+")"}}return"matrix("+pf(m[0])+" "+pf(m[1])+" "+pf(m[2])+" "+pf(m[3])+" "+pf(m[4])+" "+pf(m[5])+")"}function SVGGraphics(commonObjs,objs){this.current=new SVGExtraState;this.transformMatrix=IDENTITY_MATRIX;this.transformStack=[];this.extraStack=[];this.commonObjs=commonObjs;this.objs=objs;this.pendingEOFill=false;this.embedFonts=false;this.embeddedFonts={};this.cssStyle=null}var NS="http://www.w3.org/2000/svg";var XML_NS="http://www.w3.org/XML/1998/namespace";var XLINK_NS="http://www.w3.org/1999/xlink";var LINE_CAP_STYLES=["butt","round","square"];var LINE_JOIN_STYLES=["miter","round","bevel"];var clipCount=0;var maskCount=0;SVGGraphics.prototype={save:function SVGGraphics_save(){this.transformStack.push(this.transformMatrix);var old=this.current;this.extraStack.push(old);this.current=old.clone()},restore:function SVGGraphics_restore(){this.transformMatrix=this.transformStack.pop();this.current=this.extraStack.pop();this.tgrp=document.createElementNS(NS,"svg:g");this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix));this.pgrp.appendChild(this.tgrp)},group:function SVGGraphics_group(items){this.save();this.executeOpTree(items);this.restore()},loadDependencies:function SVGGraphics_loadDependencies(operatorList){var fnArray=operatorList.fnArray;var fnArrayLen=fnArray.length;var argsArray=operatorList.argsArray;var self=this;for(var i=0;i<fnArrayLen;i++){if(OPS.dependency===fnArray[i]){var deps=argsArray[i];for(var n=0,nn=deps.length;n<nn;n++){var obj=deps[n];var common=obj.substring(0,2)==="g_";var promise;if(common){promise=new Promise(function(resolve){self.commonObjs.get(obj,resolve)})}else{promise=new Promise(function(resolve){self.objs.get(obj,resolve)})}this.current.dependencies.push(promise)}}}return Promise.all(this.current.dependencies)},transform:function SVGGraphics_transform(a,b,c,d,e,f){var transformMatrix=[a,b,c,d,e,f];this.transformMatrix=PDFJS.Util.transform(this.transformMatrix,transformMatrix);this.tgrp=document.createElementNS(NS,"svg:g");this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix))},getSVG:function SVGGraphics_getSVG(operatorList,viewport){this.svg=createScratchSVG(viewport.width,viewport.height);this.viewport=viewport;return this.loadDependencies(operatorList).then(function(){this.transformMatrix=IDENTITY_MATRIX;this.pgrp=document.createElementNS(NS,"svg:g");this.pgrp.setAttributeNS(null,"transform",pm(viewport.transform));this.tgrp=document.createElementNS(NS,"svg:g");this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix));this.defs=document.createElementNS(NS,"svg:defs");this.pgrp.appendChild(this.defs);this.pgrp.appendChild(this.tgrp);this.svg.appendChild(this.pgrp);var opTree=this.convertOpList(operatorList);this.executeOpTree(opTree);return this.svg}.bind(this))},convertOpList:function SVGGraphics_convertOpList(operatorList){var argsArray=operatorList.argsArray;var fnArray=operatorList.fnArray;var fnArrayLen=fnArray.length;var REVOPS=[];var opList=[];for(var op in OPS){REVOPS[OPS[op]]=op}for(var x=0;x<fnArrayLen;x++){var fnId=fnArray[x];opList.push({fnId:fnId,fn:REVOPS[fnId],args:argsArray[x]})}return opListToTree(opList)},executeOpTree:function SVGGraphics_executeOpTree(opTree){var opTreeLen=opTree.length;for(var x=0;x<opTreeLen;x++){var fn=opTree[x].fn;var fnId=opTree[x].fnId;var args=opTree[x].args;switch(fnId|0){case OPS.beginText:this.beginText();break;case OPS.setLeading:this.setLeading(args);break;case OPS.setLeadingMoveText:this.setLeadingMoveText(args[0],args[1]);break;case OPS.setFont:this.setFont(args);break;case OPS.showText:this.showText(args[0]);break;case OPS.showSpacedText:this.showText(args[0]);break;case OPS.endText:this.endText();break;case OPS.moveText:this.moveText(args[0],args[1]);break;case OPS.setCharSpacing:this.setCharSpacing(args[0]);break;case OPS.setWordSpacing:this.setWordSpacing(args[0]);break;case OPS.setTextMatrix:this.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);break;case OPS.setLineWidth:this.setLineWidth(args[0]);break;case OPS.setLineJoin:this.setLineJoin(args[0]);break;case OPS.setLineCap:this.setLineCap(args[0]);break;case OPS.setMiterLimit:this.setMiterLimit(args[0]);break;case OPS.setFillRGBColor:this.setFillRGBColor(args[0],args[1],args[2]);break;case OPS.setStrokeRGBColor:this.setStrokeRGBColor(args[0],args[1],args[2]);break;case OPS.setDash:this.setDash(args[0],args[1]);break;case OPS.setGState:this.setGState(args[0]);break;case OPS.fill:this.fill();break;case OPS.eoFill:this.eoFill();break;case OPS.stroke:this.stroke();break;case OPS.fillStroke:this.fillStroke();break;case OPS.eoFillStroke:this.eoFillStroke();break;case OPS.clip:this.clip("nonzero");break;case OPS.eoClip:this.clip("evenodd");break;case OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case OPS.paintJpegXObject:this.paintJpegXObject(args[0],args[1],args[2]);break;case OPS.paintImageXObject:this.paintImageXObject(args[0]);break;case OPS.paintInlineImageXObject:this.paintInlineImageXObject(args[0]);break;case OPS.paintImageMaskXObject:this.paintImageMaskXObject(args[0]);break;case OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(args[0],args[1]);break;case OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case OPS.closePath:this.closePath();break;case OPS.closeStroke:this.closeStroke();break;case OPS.closeFillStroke:this.closeFillStroke();break;case OPS.nextLine:this.nextLine();break;case OPS.transform:this.transform(args[0],args[1],args[2],args[3],args[4],args[5]);break;case OPS.constructPath:this.constructPath(args[0],args[1]);break;case OPS.endPath:this.endPath();break;case 92:this.group(opTree[x].items);break;default:warn("Unimplemented method "+fn);break}}},setWordSpacing:function SVGGraphics_setWordSpacing(wordSpacing){this.current.wordSpacing=wordSpacing},setCharSpacing:function SVGGraphics_setCharSpacing(charSpacing){this.current.charSpacing=charSpacing},nextLine:function SVGGraphics_nextLine(){this.moveText(0,this.current.leading)},setTextMatrix:function SVGGraphics_setTextMatrix(a,b,c,d,e,f){var current=this.current;this.current.textMatrix=this.current.lineMatrix=[a,b,c,d,e,f];this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;current.xcoords=[];current.tspan=document.createElementNS(NS,"svg:tspan");
current.tspan.setAttributeNS(null,"font-family",current.fontFamily);current.tspan.setAttributeNS(null,"font-size",pf(current.fontSize)+"px");current.tspan.setAttributeNS(null,"y",pf(-current.y));current.txtElement=document.createElementNS(NS,"svg:text");current.txtElement.appendChild(current.tspan)},beginText:function SVGGraphics_beginText(){this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;this.current.textMatrix=IDENTITY_MATRIX;this.current.lineMatrix=IDENTITY_MATRIX;this.current.tspan=document.createElementNS(NS,"svg:tspan");this.current.txtElement=document.createElementNS(NS,"svg:text");this.current.txtgrp=document.createElementNS(NS,"svg:g");this.current.xcoords=[]},moveText:function SVGGraphics_moveText(x,y){var current=this.current;this.current.x=this.current.lineX+=x;this.current.y=this.current.lineY+=y;current.xcoords=[];current.tspan=document.createElementNS(NS,"svg:tspan");current.tspan.setAttributeNS(null,"font-family",current.fontFamily);current.tspan.setAttributeNS(null,"font-size",pf(current.fontSize)+"px");current.tspan.setAttributeNS(null,"y",pf(-current.y))},showText:function SVGGraphics_showText(glyphs){var current=this.current;var font=current.font;var fontSize=current.fontSize;if(fontSize===0){return}var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var fontDirection=current.fontDirection;var textHScale=current.textHScale*fontDirection;var glyphsLength=glyphs.length;var vertical=font.vertical;var widthAdvanceScale=fontSize*current.fontMatrix[0];var x=0,i;for(i=0;i<glyphsLength;++i){var glyph=glyphs[i];if(glyph===null){x+=fontDirection*wordSpacing;continue}else if(isNum(glyph)){x+=-glyph*fontSize*.001;continue}current.xcoords.push(current.x+x*textHScale);var width=glyph.width;var character=glyph.fontChar;var charWidth=width*widthAdvanceScale+charSpacing*fontDirection;x+=charWidth;current.tspan.textContent+=character}if(vertical){current.y-=x*textHScale}else{current.x+=x*textHScale}current.tspan.setAttributeNS(null,"x",current.xcoords.map(pf).join(" "));current.tspan.setAttributeNS(null,"y",pf(-current.y));current.tspan.setAttributeNS(null,"font-family",current.fontFamily);current.tspan.setAttributeNS(null,"font-size",pf(current.fontSize)+"px");if(current.fontStyle!==SVG_DEFAULTS.fontStyle){current.tspan.setAttributeNS(null,"font-style",current.fontStyle)}if(current.fontWeight!==SVG_DEFAULTS.fontWeight){current.tspan.setAttributeNS(null,"font-weight",current.fontWeight)}if(current.fillColor!==SVG_DEFAULTS.fillColor){current.tspan.setAttributeNS(null,"fill",current.fillColor)}current.txtElement.setAttributeNS(null,"transform",pm(current.textMatrix)+" scale(1, -1)");current.txtElement.setAttributeNS(XML_NS,"xml:space","preserve");current.txtElement.appendChild(current.tspan);current.txtgrp.appendChild(current.txtElement);this.tgrp.appendChild(current.txtElement)},setLeadingMoveText:function SVGGraphics_setLeadingMoveText(x,y){this.setLeading(-y);this.moveText(x,y)},addFontStyle:function SVGGraphics_addFontStyle(fontObj){if(!this.cssStyle){this.cssStyle=document.createElementNS(NS,"svg:style");this.cssStyle.setAttributeNS(null,"type","text/css");this.defs.appendChild(this.cssStyle)}var url=PDFJS.createObjectURL(fontObj.data,fontObj.mimetype);this.cssStyle.textContent+='@font-face { font-family: "'+fontObj.loadedName+'";'+" src: url("+url+"); }\n"},setFont:function SVGGraphics_setFont(details){var current=this.current;var fontObj=this.commonObjs.get(details[0]);var size=details[1];this.current.font=fontObj;if(this.embedFonts&&fontObj.data&&!this.embeddedFonts[fontObj.loadedName]){this.addFontStyle(fontObj);this.embeddedFonts[fontObj.loadedName]=fontObj}current.fontMatrix=fontObj.fontMatrix?fontObj.fontMatrix:FONT_IDENTITY_MATRIX;var bold=fontObj.black?fontObj.bold?"bolder":"bold":fontObj.bold?"bold":"normal";var italic=fontObj.italic?"italic":"normal";if(size<0){size=-size;current.fontDirection=-1}else{current.fontDirection=1}current.fontSize=size;current.fontFamily=fontObj.loadedName;current.fontWeight=bold;current.fontStyle=italic;current.tspan=document.createElementNS(NS,"svg:tspan");current.tspan.setAttributeNS(null,"y",pf(-current.y));current.xcoords=[]},endText:function SVGGraphics_endText(){if(this.current.pendingClip){this.cgrp.appendChild(this.tgrp);this.pgrp.appendChild(this.cgrp)}else{this.pgrp.appendChild(this.tgrp)}this.tgrp=document.createElementNS(NS,"svg:g");this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix))},setLineWidth:function SVGGraphics_setLineWidth(width){this.current.lineWidth=width},setLineCap:function SVGGraphics_setLineCap(style){this.current.lineCap=LINE_CAP_STYLES[style]},setLineJoin:function SVGGraphics_setLineJoin(style){this.current.lineJoin=LINE_JOIN_STYLES[style]},setMiterLimit:function SVGGraphics_setMiterLimit(limit){this.current.miterLimit=limit},setStrokeRGBColor:function SVGGraphics_setStrokeRGBColor(r,g,b){var color=Util.makeCssRgb(arguments);this.current.strokeColor=color},setFillRGBColor:function SVGGraphics_setFillRGBColor(r,g,b){var color=Util.makeCssRgb(arguments);this.current.fillColor=color;this.current.tspan=document.createElementNS(NS,"svg:tspan");this.current.xcoords=[]},setDash:function SVGGraphics_setDash(dashArray,dashPhase){this.current.dashArray=dashArray;this.current.dashPhase=dashPhase},constructPath:function SVGGraphics_constructPath(ops,args){var current=this.current;var x=current.x,y=current.y;current.path=document.createElementNS(NS,"svg:path");var d=[];var opLength=ops.length;for(var i=0,j=0;i<opLength;i++){switch(ops[i]|0){case OPS.rectangle:x=args[j++];y=args[j++];var width=args[j++];var height=args[j++];var xw=x+width;var yh=y+height;d.push("M",pf(x),pf(y),"L",pf(xw),pf(y),"L",pf(xw),pf(yh),"L",pf(x),pf(yh),"Z");break;case OPS.moveTo:x=args[j++];y=args[j++];d.push("M",pf(x),pf(y));break;case OPS.lineTo:x=args[j++];y=args[j++];d.push("L",pf(x),pf(y));break;case OPS.curveTo:x=args[j+4];y=args[j+5];d.push("C",pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]),pf(x),pf(y));j+=6;break;case OPS.curveTo2:x=args[j+2];y=args[j+3];d.push("C",pf(x),pf(y),pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]));j+=4;break;case OPS.curveTo3:x=args[j+2];y=args[j+3];d.push("C",pf(args[j]),pf(args[j+1]),pf(x),pf(y),pf(x),pf(y));j+=4;break;case OPS.closePath:d.push("Z");break}}current.path.setAttributeNS(null,"d",d.join(" "));current.path.setAttributeNS(null,"stroke-miterlimit",pf(current.miterLimit));current.path.setAttributeNS(null,"stroke-linecap",current.lineCap);current.path.setAttributeNS(null,"stroke-linejoin",current.lineJoin);current.path.setAttributeNS(null,"stroke-width",pf(current.lineWidth)+"px");current.path.setAttributeNS(null,"stroke-dasharray",current.dashArray.map(pf).join(" "));current.path.setAttributeNS(null,"stroke-dashoffset",pf(current.dashPhase)+"px");current.path.setAttributeNS(null,"fill","none");this.tgrp.appendChild(current.path);if(current.pendingClip){this.cgrp.appendChild(this.tgrp);this.pgrp.appendChild(this.cgrp)}else{this.pgrp.appendChild(this.tgrp)}current.element=current.path;current.setCurrentPoint(x,y)},endPath:function SVGGraphics_endPath(){var current=this.current;if(current.pendingClip){this.cgrp.appendChild(this.tgrp);this.pgrp.appendChild(this.cgrp)}else{this.pgrp.appendChild(this.tgrp)}this.tgrp=document.createElementNS(NS,"svg:g");this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix))},clip:function SVGGraphics_clip(type){var current=this.current;current.clipId="clippath"+clipCount;clipCount++;this.clippath=document.createElementNS(NS,"svg:clipPath");this.clippath.setAttributeNS(null,"id",current.clipId);var clipElement=current.element.cloneNode();if(type==="evenodd"){clipElement.setAttributeNS(null,"clip-rule","evenodd")}else{clipElement.setAttributeNS(null,"clip-rule","nonzero")}this.clippath.setAttributeNS(null,"transform",pm(this.transformMatrix));this.clippath.appendChild(clipElement);this.defs.appendChild(this.clippath);current.pendingClip=true;this.cgrp=document.createElementNS(NS,"svg:g");this.cgrp.setAttributeNS(null,"clip-path","url(#"+current.clipId+")");this.pgrp.appendChild(this.cgrp)},closePath:function SVGGraphics_closePath(){var current=this.current;var d=current.path.getAttributeNS(null,"d");d+="Z";current.path.setAttributeNS(null,"d",d)},setLeading:function SVGGraphics_setLeading(leading){this.current.leading=-leading},setTextRise:function SVGGraphics_setTextRise(textRise){this.current.textRise=textRise},setHScale:function SVGGraphics_setHScale(scale){this.current.textHScale=scale/100},setGState:function SVGGraphics_setGState(states){for(var i=0,ii=states.length;i<ii;i++){var state=states[i];var key=state[0];var value=state[1];switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":break;case"FL":break;case"Font":this.setFont(value);break;case"CA":break;case"ca":break;case"BM":break;case"SMask":break}}},fill:function SVGGraphics_fill(){var current=this.current;current.element.setAttributeNS(null,"fill",current.fillColor)},stroke:function SVGGraphics_stroke(){var current=this.current;current.element.setAttributeNS(null,"stroke",current.strokeColor);current.element.setAttributeNS(null,"fill","none")},eoFill:function SVGGraphics_eoFill(){var current=this.current;current.element.setAttributeNS(null,"fill",current.fillColor);current.element.setAttributeNS(null,"fill-rule","evenodd")},fillStroke:function SVGGraphics_fillStroke(){this.stroke();this.fill()},eoFillStroke:function SVGGraphics_eoFillStroke(){this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fillStroke()},closeStroke:function SVGGraphics_closeStroke(){this.closePath();this.stroke()},closeFillStroke:function SVGGraphics_closeFillStroke(){this.closePath();this.fillStroke()},paintSolidColorImageMask:function SVGGraphics_paintSolidColorImageMask(){var current=this.current;var rect=document.createElementNS(NS,"svg:rect");rect.setAttributeNS(null,"x","0");rect.setAttributeNS(null,"y","0");rect.setAttributeNS(null,"width","1px");rect.setAttributeNS(null,"height","1px");rect.setAttributeNS(null,"fill",current.fillColor);this.tgrp.appendChild(rect)},paintJpegXObject:function SVGGraphics_paintJpegXObject(objId,w,h){var current=this.current;var imgObj=this.objs.get(objId);var imgEl=document.createElementNS(NS,"svg:image");imgEl.setAttributeNS(XLINK_NS,"xlink:href",imgObj.src);imgEl.setAttributeNS(null,"width",imgObj.width+"px");imgEl.setAttributeNS(null,"height",imgObj.height+"px");imgEl.setAttributeNS(null,"x","0");imgEl.setAttributeNS(null,"y",pf(-h));imgEl.setAttributeNS(null,"transform","scale("+pf(1/w)+" "+pf(-1/h)+")");this.tgrp.appendChild(imgEl);if(current.pendingClip){this.cgrp.appendChild(this.tgrp);this.pgrp.appendChild(this.cgrp)}else{this.pgrp.appendChild(this.tgrp)}},paintImageXObject:function SVGGraphics_paintImageXObject(objId){var imgData=this.objs.get(objId);if(!imgData){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(imgData)},paintInlineImageXObject:function SVGGraphics_paintInlineImageXObject(imgData,mask){var current=this.current;var width=imgData.width;var height=imgData.height;var imgSrc=convertImgDataToPng(imgData);var cliprect=document.createElementNS(NS,"svg:rect");cliprect.setAttributeNS(null,"x","0");cliprect.setAttributeNS(null,"y","0");cliprect.setAttributeNS(null,"width",pf(width));cliprect.setAttributeNS(null,"height",pf(height));current.element=cliprect;this.clip("nonzero");var imgEl=document.createElementNS(NS,"svg:image");imgEl.setAttributeNS(XLINK_NS,"xlink:href",imgSrc);imgEl.setAttributeNS(null,"x","0");imgEl.setAttributeNS(null,"y",pf(-height));imgEl.setAttributeNS(null,"width",pf(width)+"px");imgEl.setAttributeNS(null,"height",pf(height)+"px");imgEl.setAttributeNS(null,"transform","scale("+pf(1/width)+" "+pf(-1/height)+")");if(mask){mask.appendChild(imgEl)}else{this.tgrp.appendChild(imgEl)}if(current.pendingClip){this.cgrp.appendChild(this.tgrp);this.pgrp.appendChild(this.cgrp)}else{this.pgrp.appendChild(this.tgrp)}},paintImageMaskXObject:function SVGGraphics_paintImageMaskXObject(imgData){var current=this.current;var width=imgData.width;var height=imgData.height;var fillColor=current.fillColor;current.maskId="mask"+maskCount++;var mask=document.createElementNS(NS,"svg:mask");mask.setAttributeNS(null,"id",current.maskId);var rect=document.createElementNS(NS,"svg:rect");rect.setAttributeNS(null,"x","0");rect.setAttributeNS(null,"y","0");rect.setAttributeNS(null,"width",pf(width));rect.setAttributeNS(null,"height",pf(height));rect.setAttributeNS(null,"fill",fillColor);rect.setAttributeNS(null,"mask","url(#"+current.maskId+")");this.defs.appendChild(mask);this.tgrp.appendChild(rect);this.paintInlineImageXObject(imgData,mask)},paintFormXObjectBegin:function SVGGraphics_paintFormXObjectBegin(matrix,bbox){this.save();if(isArray(matrix)&&matrix.length===6){this.transform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5])}if(isArray(bbox)&&bbox.length===4){var width=bbox[2]-bbox[0];var height=bbox[3]-bbox[1];var cliprect=document.createElementNS(NS,"svg:rect");cliprect.setAttributeNS(null,"x",bbox[0]);cliprect.setAttributeNS(null,"y",bbox[1]);cliprect.setAttributeNS(null,"width",pf(width));cliprect.setAttributeNS(null,"height",pf(height));this.current.element=cliprect;this.clip("nonzero");this.endPath()}},paintFormXObjectEnd:function SVGGraphics_paintFormXObjectEnd(){this.restore()}};return SVGGraphics}();PDFJS.SVGGraphics=SVGGraphics}).call(typeof window==="undefined"?this:window);if(!PDFJS.workerSrc&&typeof document!=="undefined"){PDFJS.workerSrc=function(){"use strict";var scriptTagContainer=document.body||document.getElementsByTagName("head")[0];var pdfjsSrc=scriptTagContainer.lastChild.src;return pdfjsSrc&&pdfjsSrc.replace(/\.js$/i,".worker.js")}()}"use strict";var FontInspector=function FontInspectorClosure(){var fonts;var active=false;var fontAttribute="data-font-name";function removeSelection(){var divs=document.querySelectorAll("div["+fontAttribute+"]");for(var i=0,ii=divs.length;i<ii;++i){var div=divs[i];div.className=""}}function resetSelection(){var divs=document.querySelectorAll("div["+fontAttribute+"]");for(var i=0,ii=divs.length;i<ii;++i){var div=divs[i];div.className="debuggerHideText"}}function selectFont(fontName,show){var divs=document.querySelectorAll("div["+fontAttribute+"="+fontName+"]");for(var i=0,ii=divs.length;i<ii;++i){var div=divs[i];div.className=show?"debuggerShowText":"debuggerHideText"}}function textLayerClick(e){if(!e.target.dataset.fontName||e.target.tagName.toUpperCase()!=="DIV"){return}var fontName=e.target.dataset.fontName;var selects=document.getElementsByTagName("input");for(var i=0;i<selects.length;++i){var select=selects[i];if(select.dataset.fontName!==fontName){continue}select.checked=!select.checked;selectFont(fontName,select.checked);select.scrollIntoView()}}return{id:"FontInspector",name:"Font Inspector",panel:null,manager:null,init:function init(){var panel=this.panel;panel.setAttribute("style","padding: 5px;");var tmp=document.createElement("button");tmp.addEventListener("click",resetSelection);tmp.textContent="Refresh";panel.appendChild(tmp);fonts=document.createElement("div");panel.appendChild(fonts)},cleanup:function cleanup(){fonts.textContent=""},enabled:false,get active(){return active},set active(value){active=value;if(active){document.body.addEventListener("click",textLayerClick,true);resetSelection()}else{document.body.removeEventListener("click",textLayerClick,true);removeSelection()}},fontAdded:function fontAdded(fontObj,url){function properties(obj,list){var moreInfo=document.createElement("table");for(var i=0;i<list.length;i++){var tr=document.createElement("tr");var td1=document.createElement("td");td1.textContent=list[i];tr.appendChild(td1);var td2=document.createElement("td");td2.textContent=obj[list[i]].toString();tr.appendChild(td2);moreInfo.appendChild(tr)}return moreInfo}var moreInfo=properties(fontObj,["name","type"]);var m=/url\(['"]?([^\)"']+)/.exec(url);var fontName=fontObj.loadedName;var font=document.createElement("div");var name=document.createElement("span");name.textContent=fontName;var download=document.createElement("a");download.href=m[1];download.textContent="Download";var logIt=document.createElement("a");logIt.href="";logIt.textContent="Log";logIt.addEventListener("click",function(event){event.preventDefault();console.log(fontObj)});var select=document.createElement("input");select.setAttribute("type","checkbox");select.dataset.fontName=fontName;select.addEventListener("click",function(select,fontName){return function(){selectFont(fontName,select.checked)}}(select,fontName));font.appendChild(select);font.appendChild(name);font.appendChild(document.createTextNode(" "));font.appendChild(download);font.appendChild(document.createTextNode(" "));font.appendChild(logIt);font.appendChild(moreInfo);fonts.appendChild(font);setTimeout(function(){if(this.active){resetSelection()}}.bind(this),2e3)}}}();var StepperManager=function StepperManagerClosure(){var steppers=[];var stepperDiv=null;var stepperControls=null;var stepperChooser=null;var breakPoints={};return{id:"Stepper",name:"Stepper",panel:null,manager:null,init:function init(){var self=this;this.panel.setAttribute("style","padding: 5px;");stepperControls=document.createElement("div");stepperChooser=document.createElement("select");stepperChooser.addEventListener("change",function(event){self.selectStepper(this.value)});stepperControls.appendChild(stepperChooser);stepperDiv=document.createElement("div");this.panel.appendChild(stepperControls);this.panel.appendChild(stepperDiv);if(sessionStorage.getItem("pdfjsBreakPoints")){breakPoints=JSON.parse(sessionStorage.getItem("pdfjsBreakPoints"))}},cleanup:function cleanup(){stepperChooser.textContent="";stepperDiv.textContent="";steppers=[]},enabled:false,active:false,create:function create(pageIndex){var debug=document.createElement("div");debug.id="stepper"+pageIndex;debug.setAttribute("hidden",true);debug.className="stepper";stepperDiv.appendChild(debug);var b=document.createElement("option");b.textContent="Page "+(pageIndex+1);b.value=pageIndex;stepperChooser.appendChild(b);var initBreakPoints=breakPoints[pageIndex]||[];var stepper=new Stepper(debug,pageIndex,initBreakPoints);steppers.push(stepper);if(steppers.length===1){this.selectStepper(pageIndex,false)}return stepper},selectStepper:function selectStepper(pageIndex,selectPanel){var i;if(selectPanel){this.manager.selectPanel(this)}for(i=0;i<steppers.length;++i){var stepper=steppers[i];if(stepper.pageIndex===pageIndex){stepper.panel.removeAttribute("hidden")}else{stepper.panel.setAttribute("hidden",true)}}var options=stepperChooser.options;for(i=0;i<options.length;++i){var option=options[i];option.selected=(option.value|0)===pageIndex}},saveBreakPoints:function saveBreakPoints(pageIndex,bps){breakPoints[pageIndex]=bps;sessionStorage.setItem("pdfjsBreakPoints",JSON.stringify(breakPoints))}}}();var Stepper=function StepperClosure(){function c(tag,textContent){var d=document.createElement(tag);if(textContent){d.textContent=textContent}return d}var opMap=null;function simplifyArgs(args){if(typeof args==="string"){var MAX_STRING_LENGTH=75;return args.length<=MAX_STRING_LENGTH?args:args.substr(0,MAX_STRING_LENGTH)+"..."}if(typeof args!=="object"||args===null){return args}if("length"in args){var simpleArgs=[],i,ii;var MAX_ITEMS=10;for(i=0,ii=Math.min(MAX_ITEMS,args.length);i<ii;i++){simpleArgs.push(simplifyArgs(args[i]))}if(i<args.length){simpleArgs.push("...")}return simpleArgs}var simpleObj={};for(var key in args){simpleObj[key]=simplifyArgs(args[key])}return simpleObj}function Stepper(panel,pageIndex,initialBreakPoints){this.panel=panel;this.breakPoint=0;this.nextBreakPoint=null;this.pageIndex=pageIndex;this.breakPoints=initialBreakPoints;this.currentIdx=-1;this.operatorListIdx=0}Stepper.prototype={init:function init(){var panel=this.panel;var content=c("div","c=continue, s=step");var table=c("table");content.appendChild(table);table.cellSpacing=0;var headerRow=c("tr");table.appendChild(headerRow);headerRow.appendChild(c("th","Break"));headerRow.appendChild(c("th","Idx"));headerRow.appendChild(c("th","fn"));headerRow.appendChild(c("th","args"));panel.appendChild(content);this.table=table;if(!opMap){opMap=Object.create(null);for(var key in PDFJS.OPS){opMap[PDFJS.OPS[key]]=key}}},updateOperatorList:function updateOperatorList(operatorList){var self=this;function cboxOnClick(){var x=+this.dataset.idx;if(this.checked){self.breakPoints.push(x)}else{self.breakPoints.splice(self.breakPoints.indexOf(x),1)}StepperManager.saveBreakPoints(self.pageIndex,self.breakPoints)}var MAX_OPERATORS_COUNT=15e3;if(this.operatorListIdx>MAX_OPERATORS_COUNT){return}var chunk=document.createDocumentFragment();var operatorsToDisplay=Math.min(MAX_OPERATORS_COUNT,operatorList.fnArray.length);for(var i=this.operatorListIdx;i<operatorsToDisplay;i++){var line=c("tr");line.className="line";line.dataset.idx=i;chunk.appendChild(line);var checked=this.breakPoints.indexOf(i)!==-1;var args=operatorList.argsArray[i]||[];var breakCell=c("td");var cbox=c("input");cbox.type="checkbox";cbox.className="points";cbox.checked=checked;cbox.dataset.idx=i;cbox.onclick=cboxOnClick;breakCell.appendChild(cbox);line.appendChild(breakCell);line.appendChild(c("td",i.toString()));var fn=opMap[operatorList.fnArray[i]];var decArgs=args;if(fn==="showText"){var glyphs=args[0];var newArgs=[];var str=[];for(var j=0;j<glyphs.length;j++){var glyph=glyphs[j];if(typeof glyph==="object"&&glyph!==null){str.push(glyph.fontChar)}else{if(str.length>0){newArgs.push(str.join(""));str=[]}newArgs.push(glyph)}}if(str.length>0){newArgs.push(str.join(""))}decArgs=[newArgs]}line.appendChild(c("td",fn));line.appendChild(c("td",JSON.stringify(simplifyArgs(decArgs))))}if(operatorsToDisplay<operatorList.fnArray.length){line=c("tr");var lastCell=c("td","...");lastCell.colspan=4;chunk.appendChild(lastCell)}this.operatorListIdx=operatorList.fnArray.length;this.table.appendChild(chunk)},getNextBreakPoint:function getNextBreakPoint(){this.breakPoints.sort(function(a,b){return a-b});for(var i=0;i<this.breakPoints.length;i++){if(this.breakPoints[i]>this.currentIdx){return this.breakPoints[i]}}return null},breakIt:function breakIt(idx,callback){StepperManager.selectStepper(this.pageIndex,true);var self=this;var dom=document;self.currentIdx=idx;var listener=function(e){switch(e.keyCode){case 83:dom.removeEventListener("keydown",listener,false);self.nextBreakPoint=self.currentIdx+1;self.goTo(-1);callback();break;case 67:dom.removeEventListener("keydown",listener,false);var breakPoint=self.getNextBreakPoint();self.nextBreakPoint=breakPoint;self.goTo(-1);callback();break}};dom.addEventListener("keydown",listener,false);self.goTo(idx)},goTo:function goTo(idx){var allRows=this.panel.getElementsByClassName("line");for(var x=0,xx=allRows.length;x<xx;++x){var row=allRows[x];if(parseInt(row.dataset.idx,10)===idx){row.style.backgroundColor="rgb(251,250,207)";row.scrollIntoView()}else{row.style.backgroundColor=null}}}};return Stepper}();var Stats=function Stats(){var stats=[];function clear(node){while(node.hasChildNodes()){node.removeChild(node.lastChild)}}function getStatIndex(pageNumber){for(var i=0,ii=stats.length;i<ii;++i){if(stats[i].pageNumber===pageNumber){return i}}return false}return{id:"Stats",name:"Stats",panel:null,manager:null,init:function init(){this.panel.setAttribute("style","padding: 5px;");PDFJS.enableStats=true},enabled:false,active:false,add:function(pageNumber,stat){if(!stat){return}var statsIndex=getStatIndex(pageNumber);if(statsIndex!==false){var b=stats[statsIndex];this.panel.removeChild(b.div);stats.splice(statsIndex,1)}var wrapper=document.createElement("div");wrapper.className="stats";var title=document.createElement("div");title.className="title";title.textContent="Page: "+pageNumber;var statsDiv=document.createElement("div");statsDiv.textContent=stat.toString();wrapper.appendChild(title);wrapper.appendChild(statsDiv);stats.push({pageNumber:pageNumber,div:wrapper});stats.sort(function(a,b){return a.pageNumber-b.pageNumber});clear(this.panel);for(var i=0,ii=stats.length;i<ii;++i){this.panel.appendChild(stats[i].div)}},cleanup:function(){stats=[];clear(this.panel)}}}();var PDFBug=function PDFBugClosure(){var panelWidth=300;var buttons=[];var activePanel=null;return{tools:[FontInspector,StepperManager,Stats],enable:function(ids){var all=false,tools=this.tools;if(ids.length===1&&ids[0]==="all"){all=true}for(var i=0;i<tools.length;++i){var tool=tools[i];if(all||ids.indexOf(tool.id)!==-1){tool.enabled=true}}if(!all){tools.sort(function(a,b){var indexA=ids.indexOf(a.id);indexA=indexA<0?tools.length:indexA;var indexB=ids.indexOf(b.id);indexB=indexB<0?tools.length:indexB;return indexA-indexB})}},init:function init(){var ui=document.createElement("div");ui.id="PDFBug";var controls=document.createElement("div");controls.setAttribute("class","controls");ui.appendChild(controls);var panels=document.createElement("div");panels.setAttribute("class","panels");ui.appendChild(panels);var container=document.getElementById("viewerContainer");container.appendChild(ui);container.style.right=panelWidth+"px";var tools=this.tools;var self=this;for(var i=0;i<tools.length;++i){var tool=tools[i];var panel=document.createElement("div");var panelButton=document.createElement("button");panelButton.textContent=tool.name;panelButton.addEventListener("click",function(selected){return function(event){event.preventDefault();self.selectPanel(selected)}}(i));controls.appendChild(panelButton);panels.appendChild(panel);tool.panel=panel;tool.manager=this;if(tool.enabled){tool.init()}else{panel.textContent=tool.name+" is disabled. To enable add "+' "'+tool.id+'" to the pdfBug parameter '+"and refresh (seperate multiple by commas)."}buttons.push(panelButton)}this.selectPanel(0)},cleanup:function cleanup(){for(var i=0,ii=this.tools.length;i<ii;i++){if(this.tools[i].enabled){this.tools[i].cleanup()}}},selectPanel:function selectPanel(index){if(typeof index!=="number"){index=this.tools.indexOf(index)}if(index===activePanel){return}activePanel=index;var tools=this.tools;for(var j=0;j<tools.length;++j){if(j===index){buttons[j].setAttribute("class","active");tools[j].active=true;tools[j].panel.removeAttribute("hidden")}else{buttons[j].setAttribute("class","");tools[j].active=false;tools[j].panel.setAttribute("hidden","true")}}}}}();"use strict";var DEFAULT_URL="/other/pdfjs/Hinweis_fuer_Internet.pdf";var DEFAULT_SCALE="auto";var DEFAULT_SCALE_DELTA=1.1;var UNKNOWN_SCALE=0;var DEFAULT_CACHE_SIZE=10;var CSS_UNITS=96/72;var SCROLLBAR_PADDING=0;var VERTICAL_PADDING=5;var MAX_AUTO_SCALE=1.25;var MIN_SCALE=.25;var MAX_SCALE=10;var VIEW_HISTORY_MEMORY=20;var SCALE_SELECT_CONTAINER_PADDING=8;var SCALE_SELECT_PADDING=22;var THUMBNAIL_SCROLL_MARGIN=-19;var CLEANUP_TIMEOUT=3e4;var IGNORE_CURRENT_POSITION_ON_ZOOM=false;var RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};var FindStates={FIND_FOUND:0,FIND_NOTFOUND:1,FIND_WRAPPED:2,FIND_PENDING:3};PDFJS.imageResourcesPath="/other/pdfjs/images/";PDFJS.workerSrc="/other/pdfjs/worker.js";PDFJS.cMapUrl="/other/pdfjs/cmaps/";PDFJS.cMapPacked=true;var mozL10n=document.mozL10n||document.webL10n;var CustomStyle=function CustomStyleClosure(){var prefixes=["ms","Moz","Webkit","O"];var _cache={};function CustomStyle(){}CustomStyle.getProp=function get(propName,element){if(arguments.length===1&&typeof _cache[propName]==="string"){return _cache[propName]}element=element||document.documentElement;var style=element.style,prefixed,uPropName;if(typeof style[propName]==="string"){return _cache[propName]=propName}uPropName=propName.charAt(0).toUpperCase()+propName.slice(1);for(var i=0,l=prefixes.length;i<l;i++){prefixed=prefixes[i]+uPropName;if(typeof style[prefixed]==="string"){return _cache[propName]=prefixed}}return _cache[propName]="undefined"};CustomStyle.setProp=function set(propName,element,str){var prop=this.getProp(propName);if(prop!=="undefined"){element.style[prop]=str}};return CustomStyle}();function getFileName(url){var anchor=url.indexOf("#");var query=url.indexOf("?");var end=Math.min(anchor>0?anchor:url.length,query>0?query:url.length);return url.substring(url.lastIndexOf("/",end)+1,end)}function getOutputScale(ctx){var devicePixelRatio=window.devicePixelRatio||1;var backingStoreRatio=ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1;var pixelRatio=devicePixelRatio/backingStoreRatio;return{sx:pixelRatio,sy:pixelRatio,scaled:pixelRatio!==1}}function scrollIntoView(element,spot){var parent=element.offsetParent;var offsetY=element.offsetTop+element.clientTop;var offsetX=element.offsetLeft+element.clientLeft;if(!parent){console.error("offsetParent is not set -- cannot scroll");return}while(parent.clientHeight===parent.scrollHeight){if(parent.dataset._scaleY){offsetY/=parent.dataset._scaleY;offsetX/=parent.dataset._scaleX}offsetY+=parent.offsetTop;offsetX+=parent.offsetLeft;parent=parent.offsetParent;if(!parent){return}}if(spot){if(spot.top!==undefined){offsetY+=spot.top}if(spot.left!==undefined){offsetX+=spot.left;parent.scrollLeft=offsetX}}parent.scrollTop=offsetY}function noContextMenuHandler(e){e.preventDefault()}function getPDFFileNameFromURL(url){var reURI=/^(?:([^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/;var reFilename=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i;var splitURI=reURI.exec(url);var suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename){suggestedFilename=suggestedFilename[0];if(suggestedFilename.indexOf("%")!==-1){try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0]}catch(e){}}}return suggestedFilename||"Namenlos.pdf"}var ProgressBar=function ProgressBarClosure(){function clamp(v,min,max){return Math.min(Math.max(v,min),max)}function ProgressBar(id,opts){this.div=document.querySelector(id+" .progress");this.bar=this.div.parentNode;this.height=opts.height||100;this.width=opts.width||100;this.units=opts.units||"%";this.div.style.height=this.height+this.units;this.percent=0}ProgressBar.prototype={updateBar:function ProgressBar_updateBar(){if(this._indeterminate){this.div.classList.add("indeterminate");this.div.style.width=this.width+this.units;return}this.div.classList.remove("indeterminate");var progressSize=this.width*this._percent/100;this.div.style.width=progressSize+this.units},get percent(){return this._percent},set percent(val){this._indeterminate=isNaN(val);this._percent=clamp(val,0,100);this.updateBar()},setWidth:function ProgressBar_setWidth(viewer){if(viewer){var container=viewer.parentNode;var scrollbarWidth=container.offsetWidth-viewer.offsetWidth;if(scrollbarWidth>0){this.bar.setAttribute("style","width: calc(100% - "+scrollbarWidth+"px);")}}},hide:function ProgressBar_hide(){this.bar.classList.add("hidden");this.bar.removeAttribute("style")}};return ProgressBar}();var Cache=function cacheCache(size){var data=[];this.push=function cachePush(view){var i=data.indexOf(view);if(i>=0){data.splice(i,1)}data.push(view);if(data.length>size){data.shift().destroy()}};this.resize=function(newSize){size=newSize;while(data.length>size){data.shift().destroy()}}};var DEFAULT_PREFERENCES={showPreviousViewOnLoad:true,defaultZoomValue:"",sidebarViewOnLoad:0,enableHandToolOnLoad:false,enableWebGL:false,disableRange:false,disableAutoFetch:false,disableFontFace:false,disableTextLayer:false,useOnlyCssZoom:false};var SidebarView={NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3};var Preferences={prefs:Object.create(DEFAULT_PREFERENCES),isInitializedPromiseResolved:false,initializedPromise:null,initialize:function preferencesInitialize(){return this.initializedPromise=this._readFromStorage(DEFAULT_PREFERENCES).then(function(prefObj){this.isInitializedPromiseResolved=true;
if(prefObj){this.prefs=prefObj}}.bind(this))},_writeToStorage:function preferences_writeToStorage(prefObj){return Promise.resolve()},_readFromStorage:function preferences_readFromStorage(prefObj){return Promise.resolve()},reset:function preferencesReset(){return this.initializedPromise.then(function(){this.prefs=Object.create(DEFAULT_PREFERENCES);return this._writeToStorage(DEFAULT_PREFERENCES)}.bind(this))},reload:function preferencesReload(){return this.initializedPromise.then(function(){this._readFromStorage(DEFAULT_PREFERENCES).then(function(prefObj){if(prefObj){this.prefs=prefObj}}.bind(this))}.bind(this))},set:function preferencesSet(name,value){return this.initializedPromise.then(function(){if(DEFAULT_PREFERENCES[name]===undefined){throw new Error("preferencesSet: '"+name+"' is undefined.")}else if(value===undefined){throw new Error("preferencesSet: no value is specified.")}var valueType=typeof value;var defaultType=typeof DEFAULT_PREFERENCES[name];if(valueType!==defaultType){if(valueType==="number"&&defaultType==="string"){value=value.toString()}else{throw new Error("Preferences_set: '"+value+"' is a \""+valueType+'", expected "'+defaultType+'".')}}else{if(valueType==="number"&&(value|0)!==value){throw new Error("Preferences_set: '"+value+'\' must be an "integer".')}}this.prefs[name]=value;return this._writeToStorage(this.prefs)}.bind(this))},get:function preferencesGet(name){return this.initializedPromise.then(function(){var defaultValue=DEFAULT_PREFERENCES[name];if(defaultValue===undefined){throw new Error("preferencesGet: '"+name+"' is undefined.")}else{var prefValue=this.prefs[name];if(prefValue!==undefined){return prefValue}}return defaultValue}.bind(this))}};Preferences._writeToStorage=function(prefObj){return new Promise(function(resolve){localStorage.setItem("pdfjs.preferences",JSON.stringify(prefObj));resolve()})};Preferences._readFromStorage=function(prefObj){return new Promise(function(resolve){var readPrefs=JSON.parse(localStorage.getItem("pdfjs.preferences"));resolve(readPrefs)})};(function mozPrintCallbackPolyfillClosure(){if("mozPrintCallback"in document.createElement("canvas")){return}HTMLCanvasElement.prototype.mozPrintCallback=undefined;var canvases;var index;var print=window.print;window.print=function print(){if(canvases){console.warn("Ignored window.print() because of a pending print job.");return}try{dispatchEvent("beforeprint")}finally{canvases=document.querySelectorAll("canvas");index=-1;next()}};function dispatchEvent(eventType){var event=document.createEvent("CustomEvent");event.initCustomEvent(eventType,false,false,"custom");window.dispatchEvent(event)}function next(){if(!canvases){return}renderProgress();if(++index<canvases.length){var canvas=canvases[index];if(typeof canvas.mozPrintCallback==="function"){canvas.mozPrintCallback({context:canvas.getContext("2d"),abort:abort,done:next})}else{next()}}else{renderProgress();print.call(window);setTimeout(abort,20)}}function abort(){if(canvases){canvases=null;renderProgress();dispatchEvent("afterprint")}}function renderProgress(){var progressContainer=document.getElementById("mozPrintCallback-shim");if(canvases){var progress=Math.round(100*index/canvases.length);var progressBar=progressContainer.querySelector("progress");var progressPerc=progressContainer.querySelector(".relative-progress");progressBar.value=progress;progressPerc.textContent=progress+"%";progressContainer.removeAttribute("hidden");progressContainer.onclick=abort}else{progressContainer.setAttribute("hidden","")}}var hasAttachEvent=!!document.attachEvent;window.addEventListener("keydown",function(event){if(event.keyCode===80&&(event.ctrlKey||event.metaKey)&&!event.altKey&&(!event.shiftKey||window.chrome||window.opera)){window.print();if(hasAttachEvent){return}event.preventDefault();if(event.stopImmediatePropagation){event.stopImmediatePropagation()}else{event.stopPropagation()}return}if(event.keyCode===27&&canvases){abort()}},true);if(hasAttachEvent){document.attachEvent("onkeydown",function(event){event=event||window.event;if(event.keyCode===80&&event.ctrlKey){event.keyCode=0;return false}})}if("onbeforeprint"in window){var stopPropagationIfNeeded=function(event){if(event.detail!=="custom"&&event.stopImmediatePropagation){event.stopImmediatePropagation()}};window.addEventListener("beforeprint",stopPropagationIfNeeded,false);window.addEventListener("afterprint",stopPropagationIfNeeded,false)}})();var DownloadManager=function DownloadManagerClosure(){function download(blobUrl,filename){var a=document.createElement("a");if(a.click){a.href=blobUrl;a.target="_parent";if("download"in a){a.download=filename}(document.body||document.documentElement).appendChild(a);a.click();a.parentNode.removeChild(a)}else{if(window.top===window&&blobUrl.split("#")[0]===window.location.href.split("#")[0]){var padCharacter=blobUrl.indexOf("?")===-1?"?":"&";blobUrl=blobUrl.replace(/#|$/,padCharacter+"$&")}window.open(blobUrl,"_parent")}}function DownloadManager(){}DownloadManager.prototype={downloadUrl:function DownloadManager_downloadUrl(url,filename){if(!PDFJS.isValidUrl(url,true)){return}download(url+"#pdfjs.action=download",filename)},downloadData:function DownloadManager_downloadData(data,filename,contentType){if(navigator.msSaveBlob){return navigator.msSaveBlob(new Blob([data],{type:contentType}),filename)}var blobUrl=PDFJS.createObjectURL(data,contentType);download(blobUrl,filename)},download:function DownloadManager_download(blob,url,filename){if(!URL){this.downloadUrl(url,filename);return}if(navigator.msSaveBlob){if(!navigator.msSaveBlob(blob,filename)){this.downloadUrl(url,filename)}return}var blobUrl=URL.createObjectURL(blob);download(blobUrl,filename)}};return DownloadManager}();var cache=new Cache(DEFAULT_CACHE_SIZE);var currentPageNumber=1;var ViewHistory=function ViewHistoryClosure(){function ViewHistory(fingerprint){this.fingerprint=fingerprint;this.isInitializedPromiseResolved=false;this.initializedPromise=this._readFromStorage().then(function(databaseStr){this.isInitializedPromiseResolved=true;var database=JSON.parse(databaseStr||"{}");if(!("files"in database)){database.files=[]}if(database.files.length>=VIEW_HISTORY_MEMORY){database.files.shift()}var index;for(var i=0,length=database.files.length;i<length;i++){var branch=database.files[i];if(branch.fingerprint===this.fingerprint){index=i;break}}if(typeof index!=="number"){index=database.files.push({fingerprint:this.fingerprint})-1}this.file=database.files[index];this.database=database}.bind(this))}ViewHistory.prototype={_writeToStorage:function ViewHistory_writeToStorage(){return new Promise(function(resolve){var databaseStr=JSON.stringify(this.database);localStorage.setItem("database",databaseStr);resolve()}.bind(this))},_readFromStorage:function ViewHistory_readFromStorage(){return new Promise(function(resolve){resolve(localStorage.getItem("database"))})},set:function ViewHistory_set(name,val){if(!this.isInitializedPromiseResolved){return}this.file[name]=val;return this._writeToStorage()},setMultiple:function ViewHistory_setMultiple(properties){if(!this.isInitializedPromiseResolved){return}for(var name in properties){this.file[name]=properties[name]}return this._writeToStorage()},get:function ViewHistory_get(name,defaultValue){if(!this.isInitializedPromiseResolved){return defaultValue}return this.file[name]||defaultValue}};return ViewHistory}();var PDFFindBar=function PDFFindBarClosure(){function PDFFindBar(options){this.opened=false;this.bar=options.bar||null;this.toggleButton=options.toggleButton||null;this.findField=options.findField||null;this.highlightAll=options.highlightAllCheckbox||null;this.caseSensitive=options.caseSensitiveCheckbox||null;this.findMsg=options.findMsg||null;this.findStatusIcon=options.findStatusIcon||null;this.findPreviousButton=options.findPreviousButton||null;this.findNextButton=options.findNextButton||null;this.findController=options.findController||null;if(this.findController===null){throw new Error("PDFFindBar cannot be used without a "+"PDFFindController instance.")}var self=this;this.toggleButton.addEventListener("click",function(){self.toggle()});this.findField.addEventListener("input",function(){self.dispatchEvent("")});this.bar.addEventListener("keydown",function(evt){switch(evt.keyCode){case 13:if(evt.target===self.findField){self.dispatchEvent("again",evt.shiftKey)}break;case 27:self.close();break}});this.findPreviousButton.addEventListener("click",function(){self.dispatchEvent("again",true)});this.findNextButton.addEventListener("click",function(){self.dispatchEvent("again",false)});this.highlightAll.addEventListener("click",function(){self.dispatchEvent("highlightallchange")});this.caseSensitive.addEventListener("click",function(){self.dispatchEvent("casesensitivitychange")})}PDFFindBar.prototype={dispatchEvent:function PDFFindBar_dispatchEvent(type,findPrev){var event=document.createEvent("CustomEvent");event.initCustomEvent("find"+type,true,true,{query:this.findField.value,caseSensitive:this.caseSensitive.checked,highlightAll:this.highlightAll.checked,findPrevious:findPrev});return window.dispatchEvent(event)},updateUIState:function PDFFindBar_updateUIState(state,previous){var notFound=false;var findMsg="";var status="";switch(state){case FindStates.FIND_FOUND:break;case FindStates.FIND_PENDING:status="pending";break;case FindStates.FIND_NOTFOUND:findMsg=mozL10n.get("find_not_found",null,"Phrase not found");notFound=true;break;case FindStates.FIND_WRAPPED:if(previous){findMsg=mozL10n.get("find_reached_top",null,"Reached top of document, continued from bottom")}else{findMsg=mozL10n.get("find_reached_bottom",null,"Reached end of document, continued from top")}break}if(notFound){this.findField.classList.add("notFound")}else{this.findField.classList.remove("notFound")}this.findField.setAttribute("data-status",status);this.findMsg.textContent=findMsg},open:function PDFFindBar_open(){if(!this.opened){this.opened=true;this.toggleButton.classList.add("toggled");this.bar.classList.remove("hidden")}this.findField.select();this.findField.focus()},close:function PDFFindBar_close(){if(!this.opened){return}this.opened=false;this.toggleButton.classList.remove("toggled");this.bar.classList.add("hidden");this.findController.active=false},toggle:function PDFFindBar_toggle(){if(this.opened){this.close()}else{this.open()}}};return PDFFindBar}();var PDFFindController=function PDFFindControllerClosure(){function PDFFindController(options){this.startedTextExtraction=false;this.extractTextPromises=[];this.pendingFindMatches={};this.active=false;this.pageContents=[];this.pageMatches=[];this.selected={pageIdx:-1,matchIdx:-1};this.offset={pageIdx:null,matchIdx:null};this.resumePageIdx=null;this.state=null;this.dirtyMatch=false;this.findTimeout=null;this.pdfPageSource=options.pdfPageSource||null;this.integratedFind=options.integratedFind||false;this.charactersToNormalize={"‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"};this.findBar=options.findBar||null;var replace=Object.keys(this.charactersToNormalize).join("");this.normalizationRegex=new RegExp("["+replace+"]","g");var events=["find","findagain","findhighlightallchange","findcasesensitivitychange"];this.firstPagePromise=new Promise(function(resolve){this.resolveFirstPage=resolve}.bind(this));this.handleEvent=this.handleEvent.bind(this);for(var i=0,len=events.length;i<len;i++){window.addEventListener(events[i],this.handleEvent)}}PDFFindController.prototype={setFindBar:function PDFFindController_setFindBar(findBar){this.findBar=findBar},reset:function PDFFindController_reset(){this.startedTextExtraction=false;this.extractTextPromises=[];this.active=false},normalize:function PDFFindController_normalize(text){var self=this;return text.replace(this.normalizationRegex,function(ch){return self.charactersToNormalize[ch]})},calcFindMatch:function PDFFindController_calcFindMatch(pageIndex){var pageContent=this.normalize(this.pageContents[pageIndex]);var query=this.normalize(this.state.query);var caseSensitive=this.state.caseSensitive;var queryLen=query.length;if(queryLen===0){return}if(!caseSensitive){pageContent=pageContent.toLowerCase();query=query.toLowerCase()}var matches=[];var matchIdx=-queryLen;while(true){matchIdx=pageContent.indexOf(query,matchIdx+queryLen);if(matchIdx===-1){break}matches.push(matchIdx)}this.pageMatches[pageIndex]=matches;this.updatePage(pageIndex);if(this.resumePageIdx===pageIndex){this.resumePageIdx=null;this.nextPageMatch()}},extractText:function PDFFindController_extractText(){if(this.startedTextExtraction){return}this.startedTextExtraction=true;this.pageContents=[];var extractTextPromisesResolves=[];var numPages=this.pdfPageSource.pdfDocument.numPages;for(var i=0;i<numPages;i++){this.extractTextPromises.push(new Promise(function(resolve){extractTextPromisesResolves.push(resolve)}))}var self=this;function extractPageText(pageIndex){self.pdfPageSource.pages[pageIndex].getTextContent().then(function textContentResolved(textContent){var textItems=textContent.items;var str=[];for(var i=0,len=textItems.length;i<len;i++){str.push(textItems[i].str)}self.pageContents.push(str.join(""));extractTextPromisesResolves[pageIndex](pageIndex);if(pageIndex+1<self.pdfPageSource.pages.length){extractPageText(pageIndex+1)}})}extractPageText(0)},handleEvent:function PDFFindController_handleEvent(e){if(this.state===null||e.type!=="findagain"){this.dirtyMatch=true}this.state=e.detail;this.updateUIState(FindStates.FIND_PENDING);this.firstPagePromise.then(function(){this.extractText();clearTimeout(this.findTimeout);if(e.type==="find"){this.findTimeout=setTimeout(this.nextMatch.bind(this),250)}else{this.nextMatch()}}.bind(this))},updatePage:function PDFFindController_updatePage(index){var page=this.pdfPageSource.pages[index];if(this.selected.pageIdx===index){page.scrollIntoView()}if(page.textLayer){page.textLayer.updateMatches()}},nextMatch:function PDFFindController_nextMatch(){var previous=this.state.findPrevious;var currentPageIndex=this.pdfPageSource.page-1;var numPages=this.pdfPageSource.pages.length;this.active=true;if(this.dirtyMatch){this.dirtyMatch=false;this.selected.pageIdx=this.selected.matchIdx=-1;this.offset.pageIdx=currentPageIndex;this.offset.matchIdx=null;this.hadMatch=false;this.resumePageIdx=null;this.pageMatches=[];var self=this;for(var i=0;i<numPages;i++){this.updatePage(i);if(!(i in this.pendingFindMatches)){this.pendingFindMatches[i]=true;this.extractTextPromises[i].then(function(pageIdx){delete self.pendingFindMatches[pageIdx];self.calcFindMatch(pageIdx)})}}}if(this.state.query===""){this.updateUIState(FindStates.FIND_FOUND);return}if(this.resumePageIdx){return}var offset=this.offset;if(offset.matchIdx!==null){var numPageMatches=this.pageMatches[offset.pageIdx].length;if(!previous&&offset.matchIdx+1<numPageMatches||previous&&offset.matchIdx>0){this.hadMatch=true;offset.matchIdx=previous?offset.matchIdx-1:offset.matchIdx+1;this.updateMatch(true);return}this.advanceOffsetPage(previous)}this.nextPageMatch()},matchesReady:function PDFFindController_matchesReady(matches){var offset=this.offset;var numMatches=matches.length;var previous=this.state.findPrevious;if(numMatches){this.hadMatch=true;offset.matchIdx=previous?numMatches-1:0;this.updateMatch(true);return true}else{this.advanceOffsetPage(previous);if(offset.wrapped){offset.matchIdx=null;if(!this.hadMatch){this.updateMatch(false);return true}}return false}},nextPageMatch:function PDFFindController_nextPageMatch(){if(this.resumePageIdx!==null){console.error("There can only be one pending page.")}do{var pageIdx=this.offset.pageIdx;var matches=this.pageMatches[pageIdx];if(!matches){this.resumePageIdx=pageIdx;break}}while(!this.matchesReady(matches))},advanceOffsetPage:function PDFFindController_advanceOffsetPage(previous){var offset=this.offset;var numPages=this.extractTextPromises.length;offset.pageIdx=previous?offset.pageIdx-1:offset.pageIdx+1;offset.matchIdx=null;if(offset.pageIdx>=numPages||offset.pageIdx<0){offset.pageIdx=previous?numPages-1:0;offset.wrapped=true;return}},updateMatch:function PDFFindController_updateMatch(found){var state=FindStates.FIND_NOTFOUND;var wrapped=this.offset.wrapped;this.offset.wrapped=false;if(found){var previousPage=this.selected.pageIdx;this.selected.pageIdx=this.offset.pageIdx;this.selected.matchIdx=this.offset.matchIdx;state=wrapped?FindStates.FIND_WRAPPED:FindStates.FIND_FOUND;if(previousPage!==-1&&previousPage!==this.selected.pageIdx){this.updatePage(previousPage)}}this.updateUIState(state,this.state.findPrevious);if(this.selected.pageIdx!==-1){this.updatePage(this.selected.pageIdx,true)}},updateUIState:function PDFFindController_updateUIState(state,previous){if(this.integratedFind){FirefoxCom.request("updateFindControlState",{result:state,findPrevious:previous});return}if(this.findBar===null){throw new Error("PDFFindController is not initialized with a "+"PDFFindBar instance.")}this.findBar.updateUIState(state,previous)}};return PDFFindController}();var PDFHistory={initialized:false,initialDestination:null,initialize:function pdfHistoryInitialize(fingerprint){if(PDFJS.disableHistory||PDFView.isViewerEmbedded){return}this.initialized=true;this.reInitialized=false;this.allowHashChange=true;this.historyUnlocked=true;this.previousHash=window.location.hash.substring(1);this.currentBookmark="";this.currentPage=0;this.updatePreviousBookmark=false;this.previousBookmark="";this.previousPage=0;this.nextHashParam="";this.fingerprint=fingerprint;this.currentUid=this.uid=0;this.current={};var state=window.history.state;if(this._isStateObjectDefined(state)){if(state.target.dest){this.initialDestination=state.target.dest}else{PDFView.initialBookmark=state.target.hash}this.currentUid=state.uid;this.uid=state.uid+1;this.current=state.target}else{if(state&&state.fingerprint&&this.fingerprint!==state.fingerprint){this.reInitialized=true}this._pushOrReplaceState({fingerprint:this.fingerprint},true)}var self=this;window.addEventListener("popstate",function pdfHistoryPopstate(evt){evt.preventDefault();evt.stopPropagation();if(!self.historyUnlocked){return}if(evt.state){self._goTo(evt.state)}else{self.previousHash=window.location.hash.substring(1);if(self.uid===0){var previousParams=self.previousHash&&self.currentBookmark&&self.previousHash!==self.currentBookmark?{hash:self.currentBookmark,page:self.currentPage}:{page:1};self.historyUnlocked=false;self.allowHashChange=false;window.history.back();self._pushToHistory(previousParams,false,true);window.history.forward();self.historyUnlocked=true}self._pushToHistory({hash:self.previousHash},false,true);self._updatePreviousBookmark()}},false);function pdfHistoryBeforeUnload(){var previousParams=self._getPreviousParams(null,true);if(previousParams){var replacePrevious=!self.current.dest&&self.current.hash!==self.previousHash;self._pushToHistory(previousParams,false,replacePrevious);self._updatePreviousBookmark()}window.removeEventListener("beforeunload",pdfHistoryBeforeUnload,false)}window.addEventListener("beforeunload",pdfHistoryBeforeUnload,false);window.addEventListener("pageshow",function pdfHistoryPageShow(evt){window.addEventListener("beforeunload",pdfHistoryBeforeUnload,false)},false)},_isStateObjectDefined:function pdfHistory_isStateObjectDefined(state){return state&&state.uid>=0&&state.fingerprint&&this.fingerprint===state.fingerprint&&state.target&&state.target.hash?true:false},_pushOrReplaceState:function pdfHistory_pushOrReplaceState(stateObj,replace){if(replace){window.history.replaceState(stateObj,"",document.URL)}else{window.history.pushState(stateObj,"",document.URL)}},get isHashChangeUnlocked(){if(!this.initialized){return true}var temp=this.allowHashChange;this.allowHashChange=true;return temp},_updatePreviousBookmark:function pdfHistory_updatePreviousBookmark(){if(this.updatePreviousBookmark&&this.currentBookmark&&this.currentPage){this.previousBookmark=this.currentBookmark;this.previousPage=this.currentPage;this.updatePreviousBookmark=false}},updateCurrentBookmark:function pdfHistoryUpdateCurrentBookmark(bookmark,pageNum){if(this.initialized){this.currentBookmark=bookmark.substring(1);this.currentPage=pageNum|0;this._updatePreviousBookmark()}},updateNextHashParam:function pdfHistoryUpdateNextHashParam(param){if(this.initialized){this.nextHashParam=param}},push:function pdfHistoryPush(params,isInitialBookmark){if(!(this.initialized&&this.historyUnlocked)){return}if(params.dest&&!params.hash){params.hash=this.current.hash&&this.current.dest&&this.current.dest===params.dest?this.current.hash:PDFView.getDestinationHash(params.dest).split("#")[1]}if(params.page){params.page|=0}if(isInitialBookmark){var target=window.history.state.target;if(!target){this._pushToHistory(params,false);this.previousHash=window.location.hash.substring(1)}this.updatePreviousBookmark=this.nextHashParam?false:true;if(target){this._updatePreviousBookmark()}return}if(this.nextHashParam){if(this.nextHashParam===params.hash){this.nextHashParam=null;this.updatePreviousBookmark=true;return}else{this.nextHashParam=null}}if(params.hash){if(this.current.hash){if(this.current.hash!==params.hash){this._pushToHistory(params,true)}else{if(!this.current.page&&params.page){this._pushToHistory(params,false,true)}this.updatePreviousBookmark=true}}else{this._pushToHistory(params,true)}}else if(this.current.page&&params.page&&this.current.page!==params.page){this._pushToHistory(params,true)}},_getPreviousParams:function pdfHistory_getPreviousParams(onlyCheckPage,beforeUnload){if(!(this.currentBookmark&&this.currentPage)){return null}else if(this.updatePreviousBookmark){this.updatePreviousBookmark=false}if(this.uid>0&&!(this.previousBookmark&&this.previousPage)){return null}if(!this.current.dest&&!onlyCheckPage||beforeUnload){if(this.previousBookmark===this.currentBookmark){return null}}else if(this.current.page||onlyCheckPage){if(this.previousPage===this.currentPage){return null}}else{return null}var params={hash:this.currentBookmark,page:this.currentPage};if(PresentationMode.active){params.hash=null}return params},_stateObj:function pdfHistory_stateObj(params){return{fingerprint:this.fingerprint,uid:this.uid,target:params}},_pushToHistory:function pdfHistory_pushToHistory(params,addPrevious,overwrite){if(!this.initialized){return}if(!params.hash&&params.page){params.hash="page="+params.page}if(addPrevious&&!overwrite){var previousParams=this._getPreviousParams();if(previousParams){var replacePrevious=!this.current.dest&&this.current.hash!==this.previousHash;this._pushToHistory(previousParams,false,replacePrevious)}}this._pushOrReplaceState(this._stateObj(params),overwrite||this.uid===0);this.currentUid=this.uid++;this.current=params;this.updatePreviousBookmark=true},_goTo:function pdfHistory_goTo(state){if(!(this.initialized&&this.historyUnlocked&&this._isStateObjectDefined(state))){return}if(!this.reInitialized&&state.uid<this.currentUid){var previousParams=this._getPreviousParams(true);if(previousParams){this._pushToHistory(this.current,false);this._pushToHistory(previousParams,false);this.currentUid=state.uid;window.history.back();return}}this.historyUnlocked=false;if(state.target.dest){PDFView.navigateTo(state.target.dest)}else{PDFView.setHash(state.target.hash)}this.currentUid=state.uid;if(state.uid>this.uid){this.uid=state.uid}this.current=state.target;this.updatePreviousBookmark=true;var currentHash=window.location.hash.substring(1);if(this.previousHash!==currentHash){this.allowHashChange=false}this.previousHash=currentHash;this.historyUnlocked=true},back:function pdfHistoryBack(){this.go(-1)},forward:function pdfHistoryForward(){this.go(1)},go:function pdfHistoryGo(direction){if(this.initialized&&this.historyUnlocked){var state=window.history.state;if(direction===-1&&state&&state.uid>0){window.history.back()}else if(direction===1&&state&&state.uid<this.uid-1){window.history.forward()}}}};var SecondaryToolbar={opened:false,previousContainerHeight:null,newContainerHeight:null,initialize:function secondaryToolbarInitialize(options){this.toolbar=options.toolbar;this.presentationMode=options.presentationMode;this.documentProperties=options.documentProperties;this.buttonContainer=this.toolbar.firstElementChild;this.toggleButton=options.toggleButton;this.presentationModeButton=options.presentationModeButton;this.print=options.print;this.download=options.download;this.firstPage=options.firstPage;this.lastPage=options.lastPage;this.pageRotateCw=options.pageRotateCw;this.pageRotateCcw=options.pageRotateCcw;this.documentPropertiesButton=options.documentPropertiesButton;var elements=[{element:this.toggleButton,handler:this.toggle},{element:this.presentationModeButton,handler:this.presentationModeClick},{element:this.print,handler:this.printClick},{element:this.download,handler:this.downloadClick},{element:this.firstPage,handler:this.firstPageClick},{element:this.lastPage,handler:this.lastPageClick},{element:this.pageRotateCw,handler:this.pageRotateCwClick},{element:this.pageRotateCcw,handler:this.pageRotateCcwClick},{element:this.documentPropertiesButton,handler:this.documentPropertiesClick}];for(var item in elements){var element=elements[item].element;if(element){element.addEventListener("click",elements[item].handler.bind(this))}}},presentationModeClick:function secondaryToolbarPresentationModeClick(evt){this.presentationMode.request();this.close()},printClick:function secondaryToolbarPrintClick(evt){window.print();this.close()},downloadClick:function secondaryToolbarDownloadClick(evt){PDFView.download();this.close()},firstPageClick:function secondaryToolbarFirstPageClick(evt){PDFView.page=1;this.close()},lastPageClick:function secondaryToolbarLastPageClick(evt){if(PDFView.pdfDocument){PDFView.page=PDFView.pdfDocument.numPages}this.close()},pageRotateCwClick:function secondaryToolbarPageRotateCwClick(evt){PDFView.rotatePages(90)},pageRotateCcwClick:function secondaryToolbarPageRotateCcwClick(evt){PDFView.rotatePages(-90)},documentPropertiesClick:function secondaryToolbarDocumentPropsClick(evt){this.documentProperties.open();this.close()},setMaxHeight:function secondaryToolbarSetMaxHeight(container){if(!container||!this.buttonContainer){return}this.newContainerHeight=container.clientHeight;if(this.previousContainerHeight===this.newContainerHeight){return}this.buttonContainer.setAttribute("style","max-height: "+(this.newContainerHeight-SCROLLBAR_PADDING)+"px;");this.previousContainerHeight=this.newContainerHeight},open:function secondaryToolbarOpen(){if(this.opened){return}this.opened=true;this.toggleButton.classList.add("toggled");this.toolbar.classList.remove("hidden")},close:function secondaryToolbarClose(target){if(!this.opened){return}else if(target&&!this.toolbar.contains(target)){return}this.opened=false;this.toolbar.classList.add("hidden");this.toggleButton.classList.remove("toggled")},toggle:function secondaryToolbarToggle(){if(this.opened){this.close()}else{this.open()}}};var DELAY_BEFORE_HIDING_CONTROLS=3e3;var SELECTOR="presentationControls";var DELAY_BEFORE_RESETTING_SWITCH_IN_PROGRESS=1e3;var PresentationMode={active:false,args:null,contextMenuOpen:false,prevCoords:{x:null,y:null},initialize:function presentationModeInitialize(options){this.container=options.container;this.secondaryToolbar=options.secondaryToolbar;this.viewer=this.container.firstElementChild;this.firstPage=options.firstPage;this.lastPage=options.lastPage;this.pageRotateCw=options.pageRotateCw;this.pageRotateCcw=options.pageRotateCcw;this.firstPage.addEventListener("click",function(){this.contextMenuOpen=false;this.secondaryToolbar.firstPageClick()}.bind(this));this.lastPage.addEventListener("click",function(){this.contextMenuOpen=false;this.secondaryToolbar.lastPageClick()}.bind(this));this.pageRotateCw.addEventListener("click",function(){this.contextMenuOpen=false;this.secondaryToolbar.pageRotateCwClick()}.bind(this));this.pageRotateCcw.addEventListener("click",function(){this.contextMenuOpen=false;this.secondaryToolbar.pageRotateCcwClick()}.bind(this))},get isFullscreen(){return document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement},_setSwitchInProgress:function presentationMode_setSwitchInProgress(){if(this.switchInProgress){clearTimeout(this.switchInProgress)}this.switchInProgress=setTimeout(function switchInProgressTimeout(){delete this.switchInProgress}.bind(this),DELAY_BEFORE_RESETTING_SWITCH_IN_PROGRESS);PDFView.currentPosition=null},_resetSwitchInProgress:function presentationMode_resetSwitchInProgress(){if(this.switchInProgress){clearTimeout(this.switchInProgress);delete this.switchInProgress}},request:function presentationModeRequest(){if(!PDFView.supportsFullscreen||this.isFullscreen||!this.viewer.hasChildNodes()){return false}this._setSwitchInProgress();if(this.container.requestFullscreen){this.container.requestFullscreen()}else if(this.container.mozRequestFullScreen){this.container.mozRequestFullScreen()}else if(this.container.webkitRequestFullScreen){this.container.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}else if(this.container.msRequestFullscreen){this.container.msRequestFullscreen()}else{return false}this.args={page:PDFView.page,previousScale:PDFView.currentScaleValue};return true},enter:function presentationModeEnter(){this.active=true;this._resetSwitchInProgress();setTimeout(function enterPresentationModeTimeout(){PDFView.page=this.args.page;PDFView.setScale("page-fit",true)}.bind(this),0);window.addEventListener("mousemove",this.mouseMove,false);window.addEventListener("mousedown",this.mouseDown,false);window.addEventListener("contextmenu",this.contextMenu,false);this.showControls();HandTool.enterPresentationMode();this.contextMenuOpen=false;this.container.setAttribute("contextmenu","viewerContextMenu")},exit:function presentationModeExit(){var page=PDFView.page;setTimeout(function exitPresentationModeTimeout(){this.active=false;PDFView.setScale(this.args.previousScale);PDFView.page=page;this.args=null}.bind(this),0);window.removeEventListener("mousemove",this.mouseMove,false);window.removeEventListener("mousedown",this.mouseDown,false);window.removeEventListener("contextmenu",this.contextMenu,false);this.hideControls();PDFView.clearMouseScrollState();HandTool.exitPresentationMode();this.container.removeAttribute("contextmenu");this.contextMenuOpen=false;scrollIntoView(document.getElementById("thumbnailContainer"+page))},showControls:function presentationModeShowControls(){if(this.controlsTimeout){clearTimeout(this.controlsTimeout)}else{this.container.classList.add(SELECTOR)}this.controlsTimeout=setTimeout(function hideControlsTimeout(){this.container.classList.remove(SELECTOR);delete this.controlsTimeout}.bind(this),DELAY_BEFORE_HIDING_CONTROLS)},hideControls:function presentationModeHideControls(){if(!this.controlsTimeout){return}this.container.classList.remove(SELECTOR);clearTimeout(this.controlsTimeout);delete this.controlsTimeout},mouseMove:function presentationModeMouseMove(evt){var currCoords={x:evt.clientX,y:evt.clientY};var prevCoords=PresentationMode.prevCoords;PresentationMode.prevCoords=currCoords;if(currCoords.x===prevCoords.x&&currCoords.y===prevCoords.y){return}PresentationMode.showControls()},mouseDown:function presentationModeMouseDown(evt){var self=PresentationMode;if(self.contextMenuOpen){self.contextMenuOpen=false;evt.preventDefault();return}if(evt.button===0){var isInternalLink=evt.target.href&&evt.target.classList.contains("internalLink");if(!isInternalLink){evt.preventDefault();PDFView.page+=evt.shiftKey?-1:1}}},contextMenu:function presentationModeContextMenu(evt){PresentationMode.contextMenuOpen=true}};(function presentationModeClosure(){function presentationModeChange(e){if(PresentationMode.isFullscreen){PresentationMode.enter()}else{PresentationMode.exit()}}window.addEventListener("fullscreenchange",presentationModeChange,false);window.addEventListener("mozfullscreenchange",presentationModeChange,false);window.addEventListener("webkitfullscreenchange",presentationModeChange,false);window.addEventListener("MSFullscreenChange",presentationModeChange,false)
})();"use strict";var GrabToPan=function GrabToPanClosure(){function GrabToPan(options){this.element=options.element;this.document=options.element.ownerDocument;if(typeof options.ignoreTarget==="function"){this.ignoreTarget=options.ignoreTarget}this.onActiveChanged=options.onActiveChanged;this.activate=this.activate.bind(this);this.deactivate=this.deactivate.bind(this);this.toggle=this.toggle.bind(this);this._onmousedown=this._onmousedown.bind(this);this._onmousemove=this._onmousemove.bind(this);this._endPan=this._endPan.bind(this);var overlay=this.overlay=document.createElement("div");overlay.className="grab-to-pan-grabbing"}GrabToPan.prototype={CSS_CLASS_GRAB:"grab-to-pan-grab",activate:function GrabToPan_activate(){if(!this.active){this.active=true;this.element.addEventListener("mousedown",this._onmousedown,true);this.element.classList.add(this.CSS_CLASS_GRAB);if(this.onActiveChanged){this.onActiveChanged(true)}}},deactivate:function GrabToPan_deactivate(){if(this.active){this.active=false;this.element.removeEventListener("mousedown",this._onmousedown,true);this._endPan();this.element.classList.remove(this.CSS_CLASS_GRAB);if(this.onActiveChanged){this.onActiveChanged(false)}}},toggle:function GrabToPan_toggle(){if(this.active){this.deactivate()}else{this.activate()}},ignoreTarget:function GrabToPan_ignoreTarget(node){return node[matchesSelector]("a[href], a[href] *, input, textarea, button, button *, select, option")},_onmousedown:function GrabToPan__onmousedown(event){if(event.button!==0||this.ignoreTarget(event.target)){return}if(event.originalTarget){try{event.originalTarget.tagName}catch(e){return}}this.scrollLeftStart=this.element.scrollLeft;this.scrollTopStart=this.element.scrollTop;this.clientXStart=event.clientX;this.clientYStart=event.clientY;this.document.addEventListener("mousemove",this._onmousemove,true);this.document.addEventListener("mouseup",this._endPan,true);this.element.addEventListener("scroll",this._endPan,true);event.preventDefault();event.stopPropagation();this.document.documentElement.classList.add(this.CSS_CLASS_GRABBING)},_onmousemove:function GrabToPan__onmousemove(event){this.element.removeEventListener("scroll",this._endPan,true);if(isLeftMouseReleased(event)){this._endPan();return}var xDiff=event.clientX-this.clientXStart;var yDiff=event.clientY-this.clientYStart;this.element.scrollTop=this.scrollTopStart-yDiff;this.element.scrollLeft=this.scrollLeftStart-xDiff;if(!this.overlay.parentNode){document.body.appendChild(this.overlay)}},_endPan:function GrabToPan__endPan(){this.element.removeEventListener("scroll",this._endPan,true);this.document.removeEventListener("mousemove",this._onmousemove,true);this.document.removeEventListener("mouseup",this._endPan,true);if(this.overlay.parentNode){this.overlay.parentNode.removeChild(this.overlay)}}};var matchesSelector;["webkitM","mozM","msM","oM","m"].some(function(prefix){var name=prefix+"atches";if(name in document.documentElement){matchesSelector=name}name+="Selector";if(name in document.documentElement){matchesSelector=name}return matchesSelector});var isNotIEorIsIE10plus=!document.documentMode||document.documentMode>9;var chrome=window.chrome;var isChrome15OrOpera15plus=chrome&&(chrome.webstore||chrome.app);var isSafari6plus=/Apple/.test(navigator.vendor)&&/Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent);function isLeftMouseReleased(event){if("buttons"in event&&isNotIEorIsIE10plus){return!(event.buttons|1)}if(isChrome15OrOpera15plus||isSafari6plus){return event.which===0}}return GrabToPan}();var HandTool={initialize:function handToolInitialize(options){var toggleHandTool=options.toggleHandTool;this.handTool=new GrabToPan({element:options.container,onActiveChanged:function(isActive){if(!toggleHandTool){return}if(isActive){toggleHandTool.title=mozL10n.get("hand_tool_disable.title",null,"Disable hand tool");toggleHandTool.firstElementChild.textContent=mozL10n.get("hand_tool_disable_label",null,"Disable hand tool")}else{toggleHandTool.title=mozL10n.get("hand_tool_enable.title",null,"Enable hand tool");toggleHandTool.firstElementChild.textContent=mozL10n.get("hand_tool_enable_label",null,"Enable hand tool")}}});if(toggleHandTool){toggleHandTool.addEventListener("click",this.toggle.bind(this),false);window.addEventListener("localized",function(evt){Preferences.get("enableHandToolOnLoad").then(function resolved(value){if(value){this.handTool.activate()}}.bind(this),function rejected(reason){})}.bind(this))}},toggle:function handToolToggle(){this.handTool.toggle();SecondaryToolbar.close()},enterPresentationMode:function handToolEnterPresentationMode(){if(this.handTool.active){this.wasActive=true;this.handTool.deactivate()}},exitPresentationMode:function handToolExitPresentationMode(){if(this.wasActive){this.wasActive=null;this.handTool.activate()}}};var OverlayManager={overlays:{},active:null,register:function overlayManagerRegister(name,callerCloseMethod,canForceClose){return new Promise(function(resolve){var element,container;if(!name||!(element=document.getElementById(name))||!(container=element.parentNode)){throw new Error("Not enough parameters.")}else if(this.overlays[name]){throw new Error("The overlay is already registered.")}this.overlays[name]={element:element,container:container,callerCloseMethod:callerCloseMethod||null,canForceClose:canForceClose||false};resolve()}.bind(this))},unregister:function overlayManagerUnregister(name){return new Promise(function(resolve){if(!this.overlays[name]){throw new Error("The overlay does not exist.")}else if(this.active===name){throw new Error("The overlay cannot be removed while it is active.")}delete this.overlays[name];resolve()}.bind(this))},open:function overlayManagerOpen(name){return new Promise(function(resolve){if(!this.overlays[name]){throw new Error("The overlay does not exist.")}else if(this.active){if(this.overlays[name].canForceClose){this._closeThroughCaller()}else if(this.active===name){throw new Error("The overlay is already active.")}else{throw new Error("Another overlay is currently active.")}}this.active=name;this.overlays[this.active].element.classList.remove("hidden");this.overlays[this.active].container.classList.remove("hidden");window.addEventListener("keydown",this._keyDown);resolve()}.bind(this))},close:function overlayManagerClose(name){return new Promise(function(resolve){if(!this.overlays[name]){throw new Error("The overlay does not exist.")}else if(!this.active){throw new Error("The overlay is currently not active.")}else if(this.active!==name){throw new Error("Another overlay is currently active.")}this.overlays[this.active].container.classList.add("hidden");this.overlays[this.active].element.classList.add("hidden");this.active=null;window.removeEventListener("keydown",this._keyDown);resolve()}.bind(this))},_keyDown:function overlayManager_keyDown(evt){var self=OverlayManager;if(self.active&&evt.keyCode===27){self._closeThroughCaller();evt.preventDefault()}},_closeThroughCaller:function overlayManager_closeThroughCaller(){if(this.overlays[this.active].callerCloseMethod){this.overlays[this.active].callerCloseMethod()}if(this.active){this.close(this.active)}}};var PasswordPrompt={overlayName:null,updatePassword:null,reason:null,passwordField:null,passwordText:null,passwordSubmit:null,passwordCancel:null,initialize:function secondaryToolbarInitialize(options){this.overlayName=options.overlayName;this.passwordField=options.passwordField;this.passwordText=options.passwordText;this.passwordSubmit=options.passwordSubmit;this.passwordCancel=options.passwordCancel;this.passwordSubmit.addEventListener("click",this.verifyPassword.bind(this));this.passwordCancel.addEventListener("click",this.close.bind(this));this.passwordField.addEventListener("keydown",function(e){if(e.keyCode===13){this.verifyPassword()}}.bind(this));OverlayManager.register(this.overlayName,this.close.bind(this),true)},open:function passwordPromptOpen(){OverlayManager.open(this.overlayName).then(function(){this.passwordField.focus();var promptString=mozL10n.get("password_label",null,"Enter the password to open this PDF file.");if(this.reason===PDFJS.PasswordResponses.INCORRECT_PASSWORD){promptString=mozL10n.get("password_invalid",null,"Invalid password. Please try again.")}this.passwordText.textContent=promptString}.bind(this))},close:function passwordPromptClose(){OverlayManager.close(this.overlayName).then(function(){this.passwordField.value=""}.bind(this))},verifyPassword:function passwordPromptVerifyPassword(){var password=this.passwordField.value;if(password&&password.length>0){this.close();return this.updatePassword(password)}}};var DocumentProperties={overlayName:null,rawFileSize:0,fileNameField:null,fileSizeField:null,titleField:null,authorField:null,subjectField:null,keywordsField:null,creationDateField:null,modificationDateField:null,creatorField:null,producerField:null,versionField:null,pageCountField:null,initialize:function documentPropertiesInitialize(options){this.overlayName=options.overlayName;this.fileNameField=options.fileNameField;this.fileSizeField=options.fileSizeField;this.titleField=options.titleField;this.authorField=options.authorField;this.subjectField=options.subjectField;this.keywordsField=options.keywordsField;this.creationDateField=options.creationDateField;this.modificationDateField=options.modificationDateField;this.creatorField=options.creatorField;this.producerField=options.producerField;this.versionField=options.versionField;this.pageCountField=options.pageCountField;if(options.closeButton){options.closeButton.addEventListener("click",this.close.bind(this))}this.dataAvailablePromise=new Promise(function(resolve){this.resolveDataAvailable=resolve}.bind(this));OverlayManager.register(this.overlayName,this.close.bind(this))},getProperties:function documentPropertiesGetProperties(){if(!OverlayManager.active){return}PDFView.pdfDocument.getDownloadInfo().then(function(data){if(data.length===this.rawFileSize){return}this.setFileSize(data.length);this.updateUI(this.fileSizeField,this.parseFileSize())}.bind(this));PDFView.pdfDocument.getMetadata().then(function(data){var fields=[{field:this.fileNameField,content:getPDFFileNameFromURL(PDFView.url)},{field:this.fileSizeField,content:this.parseFileSize()},{field:this.titleField,content:data.info.Title},{field:this.authorField,content:data.info.Author},{field:this.subjectField,content:data.info.Subject},{field:this.keywordsField,content:data.info.Keywords},{field:this.creationDateField,content:this.parseDate(data.info.CreationDate)},{field:this.modificationDateField,content:this.parseDate(data.info.ModDate)},{field:this.creatorField,content:data.info.Creator},{field:this.producerField,content:data.info.Producer},{field:this.versionField,content:data.info.PDFFormatVersion},{field:this.pageCountField,content:PDFView.pdfDocument.numPages}];for(var item in fields){var element=fields[item];this.updateUI(element.field,element.content)}}.bind(this))},updateUI:function documentPropertiesUpdateUI(field,content){if(field&&content!==undefined&&content!==""){field.textContent=content}},setFileSize:function documentPropertiesSetFileSize(fileSize){if(fileSize>0){this.rawFileSize=fileSize}},parseFileSize:function documentPropertiesParseFileSize(){var fileSize=this.rawFileSize,kb=fileSize/1024;if(!kb){return}else if(kb<1024){return mozL10n.get("document_properties_kb",{size_kb:(+kb.toPrecision(3)).toLocaleString(),size_b:fileSize.toLocaleString()},"{{size_kb}} KB ({{size_b}} bytes)")}else{return mozL10n.get("document_properties_mb",{size_mb:(+(kb/1024).toPrecision(3)).toLocaleString(),size_b:fileSize.toLocaleString()},"{{size_mb}} MB ({{size_b}} bytes)")}},open:function documentPropertiesOpen(){Promise.all([OverlayManager.open(this.overlayName),this.dataAvailablePromise]).then(function(){this.getProperties()}.bind(this))},close:function documentPropertiesClose(){OverlayManager.close(this.overlayName)},parseDate:function documentPropertiesParseDate(inputDate){var dateToParse=inputDate;if(dateToParse===undefined){return""}if(dateToParse.substring(0,2)==="D:"){dateToParse=dateToParse.substring(2)}var year=parseInt(dateToParse.substring(0,4),10);var month=parseInt(dateToParse.substring(4,6),10)-1;var day=parseInt(dateToParse.substring(6,8),10);var hours=parseInt(dateToParse.substring(8,10),10);var minutes=parseInt(dateToParse.substring(10,12),10);var seconds=parseInt(dateToParse.substring(12,14),10);var utRel=dateToParse.substring(14,15);var offsetHours=parseInt(dateToParse.substring(15,17),10);var offsetMinutes=parseInt(dateToParse.substring(18,20),10);if(utRel==="-"){hours+=offsetHours;minutes+=offsetMinutes}else if(utRel==="+"){hours-=offsetHours;minutes+=offsetMinutes}var date=new Date(Date.UTC(year,month,day,hours,minutes,seconds));var dateString=date.toLocaleDateString();var timeString=date.toLocaleTimeString();return mozL10n.get("document_properties_date_string",{date:dateString,time:timeString},"{{date}}, {{time}}")}};var PDFView={pages:[],thumbnails:[],currentScale:UNKNOWN_SCALE,currentScaleValue:null,initialBookmark:document.location.hash.substring(1),container:null,thumbnailContainer:null,initialized:false,fellback:false,pdfDocument:null,sidebarOpen:false,printing:false,pageViewScroll:null,thumbnailViewScroll:null,pageRotation:0,mouseScrollTimeStamp:0,mouseScrollDelta:0,lastScroll:0,previousPageNumber:1,isViewerEmbedded:window.parent!==window,idleTimeout:null,currentPosition:null,url:"",initialize:function pdfViewInitialize(){var self=this;var container=this.container=document.getElementById("viewerContainer");this.pageViewScroll={};this.watchScroll(container,this.pageViewScroll,updateViewarea);var thumbnailContainer=this.thumbnailContainer=document.getElementById("thumbnailView");this.thumbnailViewScroll={};this.watchScroll(thumbnailContainer,this.thumbnailViewScroll,this.renderHighestPriority.bind(this));Preferences.initialize();this.findController=new PDFFindController({pdfPageSource:this,integratedFind:this.supportsIntegratedFind});this.findBar=new PDFFindBar({bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),highlightAllCheckbox:document.getElementById("findHighlightAll"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),findMsg:document.getElementById("findMsg"),findStatusIcon:document.getElementById("findStatusIcon"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext"),findController:this.findController});this.findController.setFindBar(this.findBar);HandTool.initialize({container:container,toggleHandTool:document.getElementById("toggleHandTool")});SecondaryToolbar.initialize({toolbar:document.getElementById("secondaryToolbar"),presentationMode:PresentationMode,toggleButton:document.getElementById("secondaryToolbarToggle"),presentationModeButton:document.getElementById("secondaryPresentationMode"),print:document.getElementById("secondaryPrint"),download:document.getElementById("secondaryDownload"),firstPage:document.getElementById("firstPage"),lastPage:document.getElementById("lastPage"),pageRotateCw:document.getElementById("pageRotateCw"),pageRotateCcw:document.getElementById("pageRotateCcw"),documentProperties:DocumentProperties,documentPropertiesButton:document.getElementById("documentProperties")});PresentationMode.initialize({container:container,secondaryToolbar:SecondaryToolbar,firstPage:document.getElementById("contextFirstPage"),lastPage:document.getElementById("contextLastPage"),pageRotateCw:document.getElementById("contextPageRotateCw"),pageRotateCcw:document.getElementById("contextPageRotateCcw")});PasswordPrompt.initialize({overlayName:"passwordOverlay",passwordField:document.getElementById("password"),passwordText:document.getElementById("passwordText"),passwordSubmit:document.getElementById("passwordSubmit"),passwordCancel:document.getElementById("passwordCancel")});DocumentProperties.initialize({overlayName:"documentPropertiesOverlay",closeButton:document.getElementById("documentPropertiesClose"),fileNameField:document.getElementById("fileNameField"),fileSizeField:document.getElementById("fileSizeField"),titleField:document.getElementById("titleField"),authorField:document.getElementById("authorField"),subjectField:document.getElementById("subjectField"),keywordsField:document.getElementById("keywordsField"),creationDateField:document.getElementById("creationDateField"),modificationDateField:document.getElementById("modificationDateField"),creatorField:document.getElementById("creatorField"),producerField:document.getElementById("producerField"),versionField:document.getElementById("versionField"),pageCountField:document.getElementById("pageCountField")});container.addEventListener("scroll",function(){self.lastScroll=Date.now()},false);var initializedPromise=Promise.all([Preferences.get("enableWebGL").then(function resolved(value){PDFJS.disableWebGL=!value}),Preferences.get("sidebarViewOnLoad").then(function resolved(value){self.preferenceSidebarViewOnLoad=value}),Preferences.get("disableTextLayer").then(function resolved(value){if(PDFJS.disableTextLayer===true){return}PDFJS.disableTextLayer=value}),Preferences.get("disableRange").then(function resolved(value){if(PDFJS.disableRange===true){return}PDFJS.disableRange=value}),Preferences.get("disableAutoFetch").then(function resolved(value){PDFJS.disableAutoFetch=value}),Preferences.get("disableFontFace").then(function resolved(value){if(PDFJS.disableFontFace===true){return}PDFJS.disableFontFace=value}),Preferences.get("useOnlyCssZoom").then(function resolved(value){PDFJS.useOnlyCssZoom=value})]).catch(function(reason){});return initializedPromise.then(function(){PDFView.initialized=true})},getPage:function pdfViewGetPage(n){return this.pdfDocument.getPage(n)},watchScroll:function pdfViewWatchScroll(viewAreaElement,state,callback){state.down=true;state.lastY=viewAreaElement.scrollTop;state.rAF=null;viewAreaElement.addEventListener("scroll",function debounceScroll(evt){if(state.rAF){return}state.rAF=window.requestAnimationFrame(function webViewerScrolled(){state.rAF=null;if(!PDFView.pdfDocument){return}var currentY=viewAreaElement.scrollTop;var lastY=state.lastY;if(currentY>lastY){state.down=true}else if(currentY<lastY){state.down=false}state.lastY=currentY;callback()})},true)},_setScaleUpdatePages:function pdfView_setScaleUpdatePages(newScale,newValue,resetAutoSettings,noScroll){this.currentScaleValue=newValue;if(newScale===this.currentScale){return}for(var i=0,ii=this.pages.length;i<ii;i++){this.pages[i].update(newScale)}this.currentScale=newScale;if(!noScroll){var page=this.page,dest;if(this.currentPosition&&!IGNORE_CURRENT_POSITION_ON_ZOOM){page=this.currentPosition.page;dest=[null,{name:"XYZ"},this.currentPosition.left,this.currentPosition.top,null]}this.pages[page-1].scrollIntoView(dest)}var event=document.createEvent("UIEvents");event.initUIEvent("scalechange",false,false,window,0);event.scale=newScale;event.resetAutoSettings=resetAutoSettings;window.dispatchEvent(event)},setScale:function pdfViewSetScale(value,resetAutoSettings,noScroll){if(value==="custom"){return}var scale=parseFloat(value);if(scale>0){this._setScaleUpdatePages(scale,value,true,noScroll)}else{var currentPage=this.pages[this.page-1];if(!currentPage){return}var hPadding=PresentationMode.active?0:SCROLLBAR_PADDING;var vPadding=PresentationMode.active?0:VERTICAL_PADDING;var pageWidthScale=(this.container.clientWidth-hPadding)/currentPage.width*currentPage.scale;var pageHeightScale=(this.container.clientHeight-vPadding)/currentPage.height*currentPage.scale;switch(value){case"page-actual":scale=1;break;case"page-width":scale=pageWidthScale;break;case"page-height":scale=pageHeightScale;break;case"page-fit":scale=Math.min(pageWidthScale,pageHeightScale);break;case"auto":scale=Math.min(MAX_AUTO_SCALE,pageWidthScale);break;default:console.error("pdfViewSetScale: '"+value+"' is an unknown zoom value.");return}this._setScaleUpdatePages(scale,value,resetAutoSettings,noScroll);selectScaleOption(value)}},zoomIn:function pdfViewZoomIn(ticks){var newScale=this.currentScale;do{newScale=(newScale*DEFAULT_SCALE_DELTA).toFixed(2);newScale=Math.ceil(newScale*10)/10;newScale=Math.min(MAX_SCALE,newScale)}while(--ticks&&newScale<MAX_SCALE);this.setScale(newScale,true)},zoomOut:function pdfViewZoomOut(ticks){var newScale=this.currentScale;do{newScale=(newScale/DEFAULT_SCALE_DELTA).toFixed(2);newScale=Math.floor(newScale*10)/10;newScale=Math.max(MIN_SCALE,newScale)}while(--ticks&&newScale>MIN_SCALE);this.setScale(newScale,true)},set page(val){var pages=this.pages;var event=document.createEvent("UIEvents");event.initUIEvent("pagechange",false,false,window,0);if(!(0<val&&val<=pages.length)){this.previousPageNumber=val;event.pageNumber=this.page;window.dispatchEvent(event);return}pages[val-1].updateStats();this.previousPageNumber=currentPageNumber;currentPageNumber=val;event.pageNumber=val;window.dispatchEvent(event);if(updateViewarea.inProgress){return}if(this.loading&&val===1){return}pages[val-1].scrollIntoView()},get page(){return currentPageNumber},get supportsPrinting(){var canvas=document.createElement("canvas");var value="mozPrintCallback"in canvas;Object.defineProperty(this,"supportsPrinting",{value:value,enumerable:true,configurable:true,writable:false});return value},get supportsFullscreen(){var doc=document.documentElement;var support=doc.requestFullscreen||doc.mozRequestFullScreen||doc.webkitRequestFullScreen||doc.msRequestFullscreen;if(document.fullscreenEnabled===false||document.mozFullScreenEnabled===false||document.webkitFullscreenEnabled===false||document.msFullscreenEnabled===false){support=false}Object.defineProperty(this,"supportsFullscreen",{value:support,enumerable:true,configurable:true,writable:false});return support},get supportsIntegratedFind(){var support=false;Object.defineProperty(this,"supportsIntegratedFind",{value:support,enumerable:true,configurable:true,writable:false});return support},get supportsDocumentFonts(){var support=true;Object.defineProperty(this,"supportsDocumentFonts",{value:support,enumerable:true,configurable:true,writable:false});return support},get supportsDocumentColors(){var support=true;Object.defineProperty(this,"supportsDocumentColors",{value:support,enumerable:true,configurable:true,writable:false});return support},get loadingBar(){var bar=new ProgressBar("#loadingBar",{});Object.defineProperty(this,"loadingBar",{value:bar,enumerable:true,configurable:true,writable:false});return bar},get isHorizontalScrollbarEnabled(){return PresentationMode.active?false:this.container.scrollWidth>this.container.clientWidth},setTitleUsingUrl:function pdfViewSetTitleUsingUrl(url){this.url=url;try{this.setTitle((decodeURIComponent(getFileName(url))||url)+" (Ratsinformant)")}catch(e){this.setTitle("Dokumentenanzeige (Ratsinformant)")}},setTitle:function pdfViewSetTitle(title){document.title=title},close:function pdfViewClose(){var errorWrapper=document.getElementById("errorWrapper");errorWrapper.setAttribute("hidden","true");if(!this.pdfDocument){return}this.pdfDocument.destroy();this.pdfDocument=null;var thumbsView=document.getElementById("thumbnailView");while(thumbsView.hasChildNodes()){thumbsView.removeChild(thumbsView.lastChild)}var container=document.getElementById("viewer");while(container.hasChildNodes()){container.removeChild(container.lastChild)}if(typeof PDFBug!=="undefined"){PDFBug.cleanup()}},open:function pdfViewOpen(url,scale,password,pdfDataRangeTransport,args){if(this.pdfDocument){Preferences.reload()}this.close();var parameters={password:password};if(typeof url==="string"){this.setTitleUsingUrl(url);parameters.url=url}else if(url&&"byteLength"in url){parameters.data=url}if(args){for(var prop in args){parameters[prop]=args[prop]}}var self=this;self.loading=true;self.downloadComplete=false;var passwordNeeded=function passwordNeeded(updatePassword,reason){PasswordPrompt.updatePassword=updatePassword;PasswordPrompt.reason=reason;PasswordPrompt.open()};function getDocumentProgress(progressData){self.progress(progressData.loaded/progressData.total)}PDFJS.getDocument(parameters,pdfDataRangeTransport,passwordNeeded,getDocumentProgress).then(function getDocumentCallback(pdfDocument){self.load(pdfDocument,scale);self.loading=false},function getDocumentError(message,exception){var loadingErrorMessage=mozL10n.get("loading_error",null,"An error occurred while loading the PDF.");if(exception&&exception.name==="InvalidPDFException"){loadingErrorMessage=mozL10n.get("invalid_file_error",null,"Invalid or corrupted PDF file.")}if(exception&&exception.name==="MissingPDFException"){loadingErrorMessage=mozL10n.get("missing_file_error",null,"Missing PDF file.")}var moreInfo={message:message};self.error(loadingErrorMessage,moreInfo);self.loading=false});if(args&&args.length){DocumentProperties.setFileSize(args.length)}},download:function pdfViewDownload(){function downloadByUrl(){downloadManager.downloadUrl(url,filename)}var url=this.url.split("#")[0];var filename=getPDFFileNameFromURL(url);var downloadManager=new DownloadManager;downloadManager.onerror=function(err){PDFView.error("PDF failed to download.")};if(!this.pdfDocument){downloadByUrl();return}if(!this.downloadComplete){downloadByUrl();return}this.pdfDocument.getData().then(function getDataSuccess(data){var blob=PDFJS.createBlob(data,"application/pdf");downloadManager.download(blob,url,filename)},downloadByUrl).then(null,downloadByUrl)},fallback:function pdfViewFallback(featureId){return},navigateTo:function pdfViewNavigateTo(dest){var destString="";var self=this;var goToDestination=function(destRef){self.pendingRefStr=null;var pageNumber=destRef instanceof Object?self.pagesRefMap[destRef.num+" "+destRef.gen+" R"]:destRef+1;if(pageNumber){if(pageNumber>self.pages.length){pageNumber=self.pages.length}var currentPage=self.pages[pageNumber-1];currentPage.scrollIntoView(dest);PDFHistory.push({dest:dest,hash:destString,page:pageNumber})}else{self.pdfDocument.getPageIndex(destRef).then(function(pageIndex){var pageNum=pageIndex+1;self.pagesRefMap[destRef.num+" "+destRef.gen+" R"]=pageNum;goToDestination(destRef)})}};this.destinationsPromise.then(function(){if(typeof dest==="string"){destString=dest;dest=self.destinations[dest]}if(!(dest instanceof Array)){return}goToDestination(dest[0])})},getDestinationHash:function pdfViewGetDestinationHash(dest){if(typeof dest==="string"){return PDFView.getAnchorUrl("#"+escape(dest))}if(dest instanceof Array){var destRef=dest[0];var pageNumber=destRef instanceof Object?this.pagesRefMap[destRef.num+" "+destRef.gen+" R"]:destRef+1;if(pageNumber){var pdfOpenParams=PDFView.getAnchorUrl("#page="+pageNumber);var destKind=dest[1];if(typeof destKind==="object"&&"name"in destKind&&destKind.name==="XYZ"){var scale=dest[4]||this.currentScaleValue;var scaleNumber=parseFloat(scale);if(scaleNumber){scale=scaleNumber*100}pdfOpenParams+="&zoom="+scale;if(dest[2]||dest[3]){pdfOpenParams+=","+(dest[2]||0)+","+(dest[3]||0)}}return pdfOpenParams}}return""},getAnchorUrl:function getAnchorUrl(anchor){return anchor},error:function pdfViewError(message,moreInfo){var moreInfoText=mozL10n.get("error_version_info",{version:PDFJS.version||"?",build:PDFJS.build||"?"},"PDF.js v{{version}} (build: {{build}})")+"\n";if(moreInfo){moreInfoText+=mozL10n.get("error_message",{message:moreInfo.message},"Message: {{message}}");if(moreInfo.stack){moreInfoText+="\n"+mozL10n.get("error_stack",{stack:moreInfo.stack},"Stack: {{stack}}")}else{if(moreInfo.filename){moreInfoText+="\n"+mozL10n.get("error_file",{file:moreInfo.filename},"File: {{file}}")}if(moreInfo.lineNumber){moreInfoText+="\n"+mozL10n.get("error_line",{line:moreInfo.lineNumber},"Line: {{line}}")}}}var errorWrapper=document.getElementById("errorWrapper");errorWrapper.removeAttribute("hidden");var errorMessage=document.getElementById("errorMessage");errorMessage.textContent=message;var closeButton=document.getElementById("errorClose");closeButton.onclick=function(){errorWrapper.setAttribute("hidden","true")};var errorMoreInfo=document.getElementById("errorMoreInfo");var moreInfoButton=document.getElementById("errorShowMore");var lessInfoButton=document.getElementById("errorShowLess");moreInfoButton.onclick=function(){errorMoreInfo.removeAttribute("hidden");moreInfoButton.setAttribute("hidden","true");lessInfoButton.removeAttribute("hidden");errorMoreInfo.style.height=errorMoreInfo.scrollHeight+"px"};lessInfoButton.onclick=function(){errorMoreInfo.setAttribute("hidden","true");moreInfoButton.removeAttribute("hidden");lessInfoButton.setAttribute("hidden","true")};moreInfoButton.oncontextmenu=noContextMenuHandler;lessInfoButton.oncontextmenu=noContextMenuHandler;closeButton.oncontextmenu=noContextMenuHandler;moreInfoButton.removeAttribute("hidden");lessInfoButton.setAttribute("hidden","true");errorMoreInfo.value=moreInfoText},progress:function pdfViewProgress(level){var percent=Math.round(level*100);if(percent>PDFView.loadingBar.percent||isNaN(percent)){PDFView.loadingBar.percent=percent}},load:function pdfViewLoad(pdfDocument,scale){var self=this;var isOnePageRenderedResolved=false;var resolveOnePageRendered=null;var onePageRendered=new Promise(function(resolve){resolveOnePageRendered=resolve});function bindOnAfterDraw(pageView,thumbnailView){pageView.onAfterDraw=function pdfViewLoadOnAfterDraw(){if(!isOnePageRenderedResolved){isOnePageRenderedResolved=true;resolveOnePageRendered()}thumbnailView.setImage(pageView.canvas)}}PDFView.findController.reset();this.pdfDocument=pdfDocument;DocumentProperties.resolveDataAvailable();var downloadedPromise=pdfDocument.getDownloadInfo().then(function(){self.downloadComplete=true;PDFView.loadingBar.hide();var outerContainer=document.getElementById("outerContainer");outerContainer.classList.remove("loadingInProgress")});var pagesCount=pdfDocument.numPages;var id=pdfDocument.fingerprint;document.getElementById("numPages").textContent=mozL10n.get("page_of",{pageCount:pagesCount},"of {{pageCount}}");document.getElementById("pageNumber").max=pagesCount;PDFView.documentFingerprint=id;var store=PDFView.store=new ViewHistory(id);this.pageRotation=0;var pages=this.pages=[];var pagesRefMap=this.pagesRefMap={};var thumbnails=this.thumbnails=[];var resolvePagesPromise;var pagesPromise=new Promise(function(resolve){resolvePagesPromise=resolve});this.pagesPromise=pagesPromise;var firstPagePromise=pdfDocument.getPage(1);var container=document.getElementById("viewer");var thumbsView=document.getElementById("thumbnailView");firstPagePromise.then(function(pdfPage){var viewport=pdfPage.getViewport((scale||1)*CSS_UNITS);for(var pageNum=1;pageNum<=pagesCount;++pageNum){var viewportClone=viewport.clone();var pageView=new PageView(container,pageNum,scale,self.navigateTo.bind(self),viewportClone);var thumbnailView=new ThumbnailView(thumbsView,pageNum,viewportClone);bindOnAfterDraw(pageView,thumbnailView);pages.push(pageView);thumbnails.push(thumbnailView)}onePageRendered.then(function(){if(!PDFJS.disableAutoFetch){var getPagesLeft=pagesCount;for(var pageNum=1;pageNum<=pagesCount;++pageNum){pdfDocument.getPage(pageNum).then(function(pageNum,pdfPage){var pageView=pages[pageNum-1];if(!pageView.pdfPage){pageView.setPdfPage(pdfPage)}var refStr=pdfPage.ref.num+" "+pdfPage.ref.gen+" R";pagesRefMap[refStr]=pageNum;getPagesLeft--;if(!getPagesLeft){resolvePagesPromise()}}.bind(null,pageNum))}}else{resolvePagesPromise()}});downloadedPromise.then(function(){var event=document.createEvent("CustomEvent");event.initCustomEvent("documentload",true,true,{});window.dispatchEvent(event)});PDFView.loadingBar.setWidth(container);PDFView.findController.resolveFirstPage();PDFHistory.initialize(self.documentFingerprint)});var showPreviousViewOnLoad;var showPreviousViewOnLoadPromise=Preferences.get("showPreviousViewOnLoad").then(function(prefValue){showPreviousViewOnLoad=prefValue});var defaultZoomValue;var defaultZoomValuePromise=Preferences.get("defaultZoomValue").then(function(prefValue){defaultZoomValue=prefValue
});var storePromise=store.initializedPromise;Promise.all([firstPagePromise,storePromise,showPreviousViewOnLoadPromise,defaultZoomValuePromise]).then(function resolved(){var storedHash=null;if(showPreviousViewOnLoad&&store.get("exists",false)){var pageNum=store.get("page","1");var zoom=defaultZoomValue||store.get("zoom",PDFView.currentScale);var left=store.get("scrollLeft","0");var top=store.get("scrollTop","0");storedHash="page="+pageNum+"&zoom="+zoom+","+left+","+top}else if(defaultZoomValue){storedHash="page=1&zoom="+defaultZoomValue}self.setInitialView(storedHash,scale);if(!self.isViewerEmbedded){self.container.focus()}},function rejected(reason){console.error(reason);firstPagePromise.then(function(){self.setInitialView(null,scale)})});pagesPromise.then(function(){if(PDFView.supportsPrinting){pdfDocument.getJavaScript().then(function(javaScript){if(javaScript.length){console.warn("Warning: JavaScript is not supported");PDFView.fallback(PDFJS.UNSUPPORTED_FEATURES.javaScript)}var regex=/\bprint\s*\(/g;for(var i=0,ii=javaScript.length;i<ii;i++){var js=javaScript[i];if(js&&regex.test(js)){setTimeout(function(){window.print()});return}}})}});var destinationsPromise=this.destinationsPromise=pdfDocument.getDestinations();destinationsPromise.then(function(destinations){self.destinations=destinations});var promises=[pagesPromise,destinationsPromise,PDFView.animationStartedPromise];Promise.all(promises).then(function(){pdfDocument.getOutline().then(function(outline){self.outline=new DocumentOutlineView(outline);document.getElementById("viewOutline").disabled=!outline;if(outline&&self.preferenceSidebarViewOnLoad===SidebarView.OUTLINE){self.switchSidebarView("outline",true)}});pdfDocument.getAttachments().then(function(attachments){self.attachments=new DocumentAttachmentsView(attachments);document.getElementById("viewAttachments").disabled=!attachments;if(attachments&&self.preferenceSidebarViewOnLoad===SidebarView.ATTACHMENTS){self.switchSidebarView("attachments",true)}})});if(self.preferenceSidebarViewOnLoad===SidebarView.THUMBS){Promise.all([firstPagePromise,onePageRendered]).then(function(){self.switchSidebarView("thumbs",true)})}pdfDocument.getMetadata().then(function(data){var info=data.info,metadata=data.metadata;self.documentInfo=info;self.metadata=metadata;console.log("PDF "+pdfDocument.fingerprint+" ["+info.PDFFormatVersion+" "+(info.Producer||"-").trim()+" / "+(info.Creator||"-").trim()+"]"+" (PDF.js: "+(PDFJS.version||"-")+(!PDFJS.disableWebGL?" [WebGL]":"")+")");var pdfTitle;if(metadata&&metadata.has("dc:title")){pdfTitle=metadata.get("dc:title")}if(!pdfTitle&&info&&info["Title"]){pdfTitle=info["Title"]}if(pdfTitle){self.setTitle(pdfTitle+" - "+document.title)}if(info.IsAcroFormPresent){console.warn("Warning: AcroForm/XFA is not supported");PDFView.fallback(PDFJS.UNSUPPORTED_FEATURES.forms)}})},setInitialView:function pdfViewSetInitialView(storedHash,scale){this.currentScale=0;this.currentScaleValue=null;document.getElementById("pageNumber").value=currentPageNumber=1;this.currentPosition=null;if(PDFHistory.initialDestination){this.navigateTo(PDFHistory.initialDestination);PDFHistory.initialDestination=null}else if(this.initialBookmark){this.setHash(this.initialBookmark);PDFHistory.push({hash:this.initialBookmark},!!this.initialBookmark);this.initialBookmark=null}else if(storedHash){this.setHash(storedHash)}else if(scale){this.setScale(scale,true);this.page=1}if(PDFView.currentScale===UNKNOWN_SCALE){this.setScale(DEFAULT_SCALE,true)}},renderHighestPriority:function pdfViewRenderHighestPriority(currentlyVisiblePages){if(PDFView.idleTimeout){clearTimeout(PDFView.idleTimeout);PDFView.idleTimeout=null}var visiblePages=currentlyVisiblePages||this.getVisiblePages();var pageView=this.getHighestPriority(visiblePages,this.pages,this.pageViewScroll.down);if(pageView){this.renderView(pageView,"page");return}if(this.sidebarOpen){var visibleThumbs=this.getVisibleThumbs();var thumbView=this.getHighestPriority(visibleThumbs,this.thumbnails,this.thumbnailViewScroll.down);if(thumbView){this.renderView(thumbView,"thumbnail");return}}if(this.printing){return}PDFView.idleTimeout=setTimeout(function(){PDFView.cleanup()},CLEANUP_TIMEOUT)},cleanup:function pdfViewCleanup(){for(var i=0,ii=this.pages.length;i<ii;i++){if(this.pages[i]&&this.pages[i].renderingState!==RenderingStates.FINISHED){this.pages[i].reset()}}this.pdfDocument.cleanup();ThumbnailView.tempImageCache=null},getHighestPriority:function pdfViewGetHighestPriority(visible,views,scrolledDown){var visibleViews=visible.views;var numVisible=visibleViews.length;if(numVisible===0){return false}for(var i=0;i<numVisible;++i){var view=visibleViews[i].view;if(!this.isViewFinished(view)){return view}}if(scrolledDown){var nextPageIndex=visible.last.id;if(views[nextPageIndex]&&!this.isViewFinished(views[nextPageIndex])){return views[nextPageIndex]}}else{var previousPageIndex=visible.first.id-2;if(views[previousPageIndex]&&!this.isViewFinished(views[previousPageIndex])){return views[previousPageIndex]}}return false},isViewFinished:function pdfViewIsViewFinished(view){return view.renderingState===RenderingStates.FINISHED},renderView:function pdfViewRender(view,type){var state=view.renderingState;switch(state){case RenderingStates.FINISHED:return false;case RenderingStates.PAUSED:PDFView.highestPriorityPage=type+view.id;view.resume();break;case RenderingStates.RUNNING:PDFView.highestPriorityPage=type+view.id;break;case RenderingStates.INITIAL:PDFView.highestPriorityPage=type+view.id;view.draw(this.renderHighestPriority.bind(this));break}return true},setHash:function pdfViewSetHash(hash){var validFitZoomValues=["Fit","FitB","FitH","FitBH","FitV","FitBV","FitR"];if(!hash){return}if(hash.indexOf("=")>=0){var params=PDFView.parseQueryString(hash);if("nameddest"in params){PDFHistory.updateNextHashParam(params.nameddest);PDFView.navigateTo(params.nameddest);return}var pageNumber,dest;if("page"in params){pageNumber=params.page|0||1}if("zoom"in params){var zoomArgs=params.zoom.split(",");var zoomArg=zoomArgs[0];var zoomArgNumber=parseFloat(zoomArg);var destName="XYZ";if(zoomArgNumber){zoomArg=zoomArgNumber/100}else if(validFitZoomValues.indexOf(zoomArg)>=0){destName=zoomArg}dest=[null,{name:destName},zoomArgs.length>1?zoomArgs[1]|0:null,zoomArgs.length>2?zoomArgs[2]|0:null,zoomArg]}if(dest){var currentPage=this.pages[(pageNumber||this.page)-1];currentPage.scrollIntoView(dest)}else if(pageNumber){this.page=pageNumber}if("pagemode"in params){if(params.pagemode==="thumbs"||params.pagemode==="bookmarks"||params.pagemode==="attachments"){this.switchSidebarView(params.pagemode==="bookmarks"?"outline":params.pagemode,true)}else if(params.pagemode==="none"&&this.sidebarOpen){document.getElementById("sidebarToggle").click()}}}else if(/^\d+$/.test(hash)){this.page=hash}else{PDFHistory.updateNextHashParam(unescape(hash));PDFView.navigateTo(unescape(hash))}},switchSidebarView:function pdfViewSwitchSidebarView(view,openSidebar){if(openSidebar&&!this.sidebarOpen){document.getElementById("sidebarToggle").click()}var thumbsView=document.getElementById("thumbnailView");var outlineView=document.getElementById("outlineView");var attachmentsView=document.getElementById("attachmentsView");var thumbsButton=document.getElementById("viewThumbnail");var outlineButton=document.getElementById("viewOutline");var attachmentsButton=document.getElementById("viewAttachments");switch(view){case"thumbs":var wasAnotherViewVisible=thumbsView.classList.contains("hidden");thumbsButton.classList.add("toggled");outlineButton.classList.remove("toggled");attachmentsButton.classList.remove("toggled");thumbsView.classList.remove("hidden");outlineView.classList.add("hidden");attachmentsView.classList.add("hidden");PDFView.renderHighestPriority();if(wasAnotherViewVisible){scrollIntoView(document.getElementById("thumbnailContainer"+this.page))}break;case"outline":thumbsButton.classList.remove("toggled");outlineButton.classList.add("toggled");attachmentsButton.classList.remove("toggled");thumbsView.classList.add("hidden");outlineView.classList.remove("hidden");attachmentsView.classList.add("hidden");if(outlineButton.getAttribute("disabled")){return}break;case"attachments":thumbsButton.classList.remove("toggled");outlineButton.classList.remove("toggled");attachmentsButton.classList.add("toggled");thumbsView.classList.add("hidden");outlineView.classList.add("hidden");attachmentsView.classList.remove("hidden");if(attachmentsButton.getAttribute("disabled")){return}break}},getVisiblePages:function pdfViewGetVisiblePages(){if(!PresentationMode.active){return this.getVisibleElements(this.container,this.pages,true)}else{var visible=[];var currentPage=this.pages[this.page-1];visible.push({id:currentPage.id,view:currentPage});return{first:currentPage,last:currentPage,views:visible}}},getVisibleThumbs:function pdfViewGetVisibleThumbs(){return this.getVisibleElements(this.thumbnailContainer,this.thumbnails)},getVisibleElements:function pdfViewGetVisibleElements(scrollEl,views,sortByVisibility){var top=scrollEl.scrollTop,bottom=top+scrollEl.clientHeight;var left=scrollEl.scrollLeft,right=left+scrollEl.clientWidth;var visible=[],view;var currentHeight,viewHeight,hiddenHeight,percentHeight;var currentWidth,viewWidth;for(var i=0,ii=views.length;i<ii;++i){view=views[i];currentHeight=view.el.offsetTop+view.el.clientTop;viewHeight=view.el.clientHeight;if(currentHeight+viewHeight<top){continue}if(currentHeight>bottom){break}currentWidth=view.el.offsetLeft+view.el.clientLeft;viewWidth=view.el.clientWidth;if(currentWidth+viewWidth<left||currentWidth>right){continue}hiddenHeight=Math.max(0,top-currentHeight)+Math.max(0,currentHeight+viewHeight-bottom);percentHeight=(viewHeight-hiddenHeight)*100/viewHeight|0;visible.push({id:view.id,x:currentWidth,y:currentHeight,view:view,percent:percentHeight})}var first=visible[0];var last=visible[visible.length-1];if(sortByVisibility){visible.sort(function(a,b){var pc=a.percent-b.percent;if(Math.abs(pc)>.001){return-pc}return a.id-b.id})}return{first:first,last:last,views:visible}},parseQueryString:function pdfViewParseQueryString(query){var parts=query.split("&");var params={};for(var i=0,ii=parts.length;i<ii;++i){var param=parts[i].split("=");var key=param[0];var value=param.length>1?param[1]:null;params[decodeURIComponent(key)]=decodeURIComponent(value)}return params},beforePrint:function pdfViewSetupBeforePrint(){if(!this.supportsPrinting){var printMessage=mozL10n.get("printing_not_supported",null,"Warning: Printing is not fully supported by this browser.");this.error(printMessage);return}var alertNotReady=false;var i,ii;if(!this.pages.length){alertNotReady=true}else{for(i=0,ii=this.pages.length;i<ii;++i){if(!this.pages[i].pdfPage){alertNotReady=true;break}}}if(alertNotReady){var notReadyMessage=mozL10n.get("printing_not_ready",null,"Warning: The PDF is not fully loaded for printing.");window.alert(notReadyMessage);return}this.printing=true;this.renderHighestPriority();var body=document.querySelector("body");body.setAttribute("data-mozPrintCallback",true);for(i=0,ii=this.pages.length;i<ii;++i){this.pages[i].beforePrint()}},afterPrint:function pdfViewSetupAfterPrint(){var div=document.getElementById("printContainer");while(div.hasChildNodes()){div.removeChild(div.lastChild)}this.printing=false;this.renderHighestPriority()},rotatePages:function pdfViewRotatePages(delta){var currentPage=this.pages[this.page-1];var i,l;this.pageRotation=(this.pageRotation+360+delta)%360;for(i=0,l=this.pages.length;i<l;i++){var page=this.pages[i];page.update(page.scale,this.pageRotation)}for(i=0,l=this.thumbnails.length;i<l;i++){var thumb=this.thumbnails[i];thumb.update(this.pageRotation)}this.setScale(this.currentScaleValue,true,true);this.renderHighestPriority();if(currentPage){currentPage.scrollIntoView()}},mouseScroll:function pdfViewMouseScroll(mouseScrollDelta){var MOUSE_SCROLL_COOLDOWN_TIME=50;var currentTime=(new Date).getTime();var storedTime=this.mouseScrollTimeStamp;if(currentTime>storedTime&&currentTime-storedTime<MOUSE_SCROLL_COOLDOWN_TIME){return}if(this.mouseScrollDelta>0&&mouseScrollDelta<0||this.mouseScrollDelta<0&&mouseScrollDelta>0){this.clearMouseScrollState()}this.mouseScrollDelta+=mouseScrollDelta;var PAGE_FLIP_THRESHOLD=120;if(Math.abs(this.mouseScrollDelta)>=PAGE_FLIP_THRESHOLD){var PageFlipDirection={UP:-1,DOWN:1};var pageFlipDirection=this.mouseScrollDelta>0?PageFlipDirection.UP:PageFlipDirection.DOWN;this.clearMouseScrollState();var currentPage=this.page;if(currentPage===1&&pageFlipDirection===PageFlipDirection.UP||currentPage===this.pages.length&&pageFlipDirection===PageFlipDirection.DOWN){return}this.page+=pageFlipDirection;this.mouseScrollTimeStamp=currentTime}},clearMouseScrollState:function pdfViewClearMouseScrollState(){this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0}};var PageView=function pageView(container,id,scale,navigateTo,defaultViewport){this.id=id;this.rotation=0;this.scale=scale||1;this.viewport=defaultViewport;this.pdfPageRotate=defaultViewport.rotation;this.hasRestrictedScaling=false;this.renderingState=RenderingStates.INITIAL;this.resume=null;this.textLayer=null;this.zoomLayer=null;this.annotationLayer=null;var anchor=document.createElement("a");anchor.name=""+this.id;var div=this.el=document.createElement("div");div.id="pageContainer"+this.id;div.className="page";div.style.width=Math.floor(this.viewport.width)+"px";div.style.height=Math.floor(this.viewport.height)+"px";container.appendChild(anchor);container.appendChild(div);this.setPdfPage=function pageViewSetPdfPage(pdfPage){this.pdfPage=pdfPage;this.pdfPageRotate=pdfPage.rotate;var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=pdfPage.getViewport(this.scale*CSS_UNITS,totalRotation);this.stats=pdfPage.stats;this.reset()};this.destroy=function pageViewDestroy(){this.zoomLayer=null;this.reset();if(this.pdfPage){this.pdfPage.destroy()}};this.reset=function pageViewReset(keepAnnotations){if(this.renderTask){this.renderTask.cancel()}this.resume=null;this.renderingState=RenderingStates.INITIAL;div.style.width=Math.floor(this.viewport.width)+"px";div.style.height=Math.floor(this.viewport.height)+"px";var childNodes=div.childNodes;for(var i=div.childNodes.length-1;i>=0;i--){var node=childNodes[i];if(this.zoomLayer&&this.zoomLayer===node||keepAnnotations&&this.annotationLayer===node){continue}div.removeChild(node)}div.removeAttribute("data-loaded");if(keepAnnotations){if(this.annotationLayer){this.annotationLayer.setAttribute("hidden","true")}}else{this.annotationLayer=null}if(this.canvas){this.canvas.width=0;this.canvas.height=0;delete this.canvas}this.loadingIconDiv=document.createElement("div");this.loadingIconDiv.className="loadingIcon";div.appendChild(this.loadingIconDiv)};this.update=function pageViewUpdate(scale,rotation){this.scale=scale||this.scale;if(typeof rotation!=="undefined"){this.rotation=rotation}var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*CSS_UNITS,rotation:totalRotation});var isScalingRestricted=false;if(this.canvas&&PDFJS.maxCanvasPixels>0){var ctx=this.canvas.getContext("2d");var outputScale=getOutputScale(ctx);var pixelsInViewport=this.viewport.width*this.viewport.height;var maxScale=Math.sqrt(PDFJS.maxCanvasPixels/pixelsInViewport);if((Math.floor(this.viewport.width)*outputScale.sx|0)*(Math.floor(this.viewport.height)*outputScale.sy|0)>PDFJS.maxCanvasPixels){isScalingRestricted=true}}if(this.canvas&&(PDFJS.useOnlyCssZoom||this.hasRestrictedScaling&&isScalingRestricted)){this.cssTransform(this.canvas,true);return}else if(this.canvas&&!this.zoomLayer){this.zoomLayer=this.canvas.parentNode;this.zoomLayer.style.position="absolute"}if(this.zoomLayer){this.cssTransform(this.zoomLayer.firstChild)}this.reset(true)};this.cssTransform=function pageCssTransform(canvas,redrawAnnotations){var width=this.viewport.width;var height=this.viewport.height;canvas.style.width=canvas.parentNode.style.width=div.style.width=Math.floor(width)+"px";canvas.style.height=canvas.parentNode.style.height=div.style.height=Math.floor(height)+"px";var relativeRotation=this.viewport.rotation-canvas._viewport.rotation;var absRotation=Math.abs(relativeRotation);var scaleX=1,scaleY=1;if(absRotation===90||absRotation===270){scaleX=height/width;scaleY=width/height}var cssTransform="rotate("+relativeRotation+"deg) "+"scale("+scaleX+","+scaleY+")";CustomStyle.setProp("transform",canvas,cssTransform);if(this.textLayer){var textLayerViewport=this.textLayer.viewport;var textRelativeRotation=this.viewport.rotation-textLayerViewport.rotation;var textAbsRotation=Math.abs(textRelativeRotation);var scale=width/textLayerViewport.width;if(textAbsRotation===90||textAbsRotation===270){scale=width/textLayerViewport.height}var textLayerDiv=this.textLayer.textLayerDiv;var transX,transY;switch(textAbsRotation){case 0:transX=transY=0;break;case 90:transX=0;transY="-"+textLayerDiv.style.height;break;case 180:transX="-"+textLayerDiv.style.width;transY="-"+textLayerDiv.style.height;break;case 270:transX="-"+textLayerDiv.style.width;transY=0;break;default:console.error("Bad rotation value.");break}CustomStyle.setProp("transform",textLayerDiv,"rotate("+textAbsRotation+"deg) "+"scale("+scale+", "+scale+") "+"translate("+transX+", "+transY+")");CustomStyle.setProp("transformOrigin",textLayerDiv,"0% 0%")}if(redrawAnnotations&&this.annotationLayer){setupAnnotations(div,this.pdfPage,this.viewport)}};Object.defineProperty(this,"width",{get:function PageView_getWidth(){return this.viewport.width},enumerable:true});Object.defineProperty(this,"height",{get:function PageView_getHeight(){return this.viewport.height},enumerable:true});var self=this;function setupAnnotations(pageDiv,pdfPage,viewport){function bindLink(link,dest){link.href=PDFView.getDestinationHash(dest);link.onclick=function pageViewSetupLinksOnclick(){if(dest){PDFView.navigateTo(dest)}return false};if(dest){link.className="internalLink"}}function bindNamedAction(link,action){link.href=PDFView.getAnchorUrl("");link.onclick=function pageViewSetupNamedActionOnClick(){switch(action){case"GoToPage":document.getElementById("pageNumber").focus();break;case"GoBack":PDFHistory.back();break;case"GoForward":PDFHistory.forward();break;case"Find":if(!PDFView.supportsIntegratedFind){PDFView.findBar.toggle()}break;case"NextPage":PDFView.page++;break;case"PrevPage":PDFView.page--;break;case"LastPage":PDFView.page=PDFView.pages.length;break;case"FirstPage":PDFView.page=1;break;default:break}return false};link.className="internalLink"}pdfPage.getAnnotations().then(function(annotationsData){viewport=viewport.clone({dontFlip:true});var transform=viewport.transform;var transformStr="matrix("+transform.join(",")+")";var data,element,i,ii;if(self.annotationLayer){for(i=0,ii=annotationsData.length;i<ii;i++){data=annotationsData[i];element=self.annotationLayer.querySelector('[data-annotation-id="'+data.id+'"]');if(element){CustomStyle.setProp("transform",element,transformStr)}}self.annotationLayer.removeAttribute("hidden")}else{for(i=0,ii=annotationsData.length;i<ii;i++){data=annotationsData[i];if(!data||!data.hasHtml){continue}element=PDFJS.AnnotationUtils.getHtmlElement(data,pdfPage.commonObjs);element.setAttribute("data-annotation-id",data.id);mozL10n.translate(element);var rect=data.rect;var view=pdfPage.view;rect=PDFJS.Util.normalizeRect([rect[0],view[3]-rect[1]+view[1],rect[2],view[3]-rect[3]+view[1]]);element.style.left=rect[0]+"px";element.style.top=rect[1]+"px";element.style.position="absolute";CustomStyle.setProp("transform",element,transformStr);var transformOriginStr=-rect[0]+"px "+-rect[1]+"px";CustomStyle.setProp("transformOrigin",element,transformOriginStr);if(data.subtype==="Link"&&!data.url){var link=element.getElementsByTagName("a")[0];if(link){if(data.action){bindNamedAction(link,data.action)}else{bindLink(link,"dest"in data?data.dest:null)}}}if(!self.annotationLayer){var annotationLayerDiv=document.createElement("div");annotationLayerDiv.className="annotationLayer";pageDiv.appendChild(annotationLayerDiv);self.annotationLayer=annotationLayerDiv}self.annotationLayer.appendChild(element)}}})}this.getPagePoint=function pageViewGetPagePoint(x,y){return this.viewport.convertToPdfPoint(x,y)};this.scrollIntoView=function pageViewScrollIntoView(dest){if(PresentationMode.active){if(PDFView.page!==this.id){PDFView.page=this.id;return}dest=null;PDFView.setScale(PDFView.currentScaleValue,true,true)}if(!dest){scrollIntoView(div);return}var x=0,y=0;var width=0,height=0,widthScale,heightScale;var changeOrientation=this.rotation%180===0?false:true;var pageWidth=(changeOrientation?this.height:this.width)/this.scale/CSS_UNITS;var pageHeight=(changeOrientation?this.width:this.height)/this.scale/CSS_UNITS;var scale=0;switch(dest[1].name){case"XYZ":x=dest[2];y=dest[3];scale=dest[4];x=x!==null?x:0;y=y!==null?y:pageHeight;break;case"Fit":case"FitB":scale="page-fit";break;case"FitH":case"FitBH":y=dest[2];scale="page-width";break;case"FitV":case"FitBV":x=dest[2];width=pageWidth;height=pageHeight;scale="page-height";break;case"FitR":x=dest[2];y=dest[3];width=dest[4]-x;height=dest[5]-y;widthScale=(PDFView.container.clientWidth-SCROLLBAR_PADDING)/width/CSS_UNITS;heightScale=(PDFView.container.clientHeight-SCROLLBAR_PADDING)/height/CSS_UNITS;scale=Math.min(Math.abs(widthScale),Math.abs(heightScale));break;default:return}if(scale&&scale!==PDFView.currentScale){PDFView.setScale(scale,true,true)}else if(PDFView.currentScale===UNKNOWN_SCALE){PDFView.setScale(DEFAULT_SCALE,true,true)}if(scale==="page-fit"&&!dest[4]){scrollIntoView(div);return}var boundingRect=[this.viewport.convertToViewportPoint(x,y),this.viewport.convertToViewportPoint(x+width,y+height)];var left=Math.min(boundingRect[0][0],boundingRect[1][0]);var top=Math.min(boundingRect[0][1],boundingRect[1][1]);scrollIntoView(div,{left:left,top:top})};this.getTextContent=function pageviewGetTextContent(){return PDFView.getPage(this.id).then(function(pdfPage){return pdfPage.getTextContent()})};this.draw=function pageviewDraw(callback){var pdfPage=this.pdfPage;if(this.pagePdfPromise){return}if(!pdfPage){var promise=PDFView.getPage(this.id);promise.then(function(pdfPage){delete this.pagePdfPromise;this.setPdfPage(pdfPage);this.draw(callback)}.bind(this));this.pagePdfPromise=promise;return}if(this.renderingState!==RenderingStates.INITIAL){console.error("Must be in new state before drawing")}this.renderingState=RenderingStates.RUNNING;var viewport=this.viewport;var canvasWrapper=document.createElement("div");canvasWrapper.style.width=div.style.width;canvasWrapper.style.height=div.style.height;canvasWrapper.classList.add("canvasWrapper");var canvas=document.createElement("canvas");canvas.id="page"+this.id;canvasWrapper.appendChild(canvas);if(this.annotationLayer){div.insertBefore(canvasWrapper,this.annotationLayer)}else{div.appendChild(canvasWrapper)}this.canvas=canvas;var ctx=canvas.getContext("2d");var outputScale=getOutputScale(ctx);if(PDFJS.useOnlyCssZoom){var actualSizeViewport=viewport.clone({scale:CSS_UNITS});outputScale.sx*=actualSizeViewport.width/viewport.width;outputScale.sy*=actualSizeViewport.height/viewport.height;outputScale.scaled=true}if(PDFJS.maxCanvasPixels>0){var pixelsInViewport=viewport.width*viewport.height;var maxScale=Math.sqrt(PDFJS.maxCanvasPixels/pixelsInViewport);if(outputScale.sx>maxScale||outputScale.sy>maxScale){outputScale.sx=maxScale;outputScale.sy=maxScale;outputScale.scaled=true;this.hasRestrictedScaling=true}else{this.hasRestrictedScaling=false}}canvas.width=Math.floor(viewport.width)*outputScale.sx|0;canvas.height=Math.floor(viewport.height)*outputScale.sy|0;canvas.style.width=Math.floor(viewport.width)+"px";canvas.style.height=Math.floor(viewport.height)+"px";canvas._viewport=viewport;var textLayerDiv=null;if(!PDFJS.disableTextLayer){textLayerDiv=document.createElement("div");textLayerDiv.className="textLayer";textLayerDiv.style.width=canvas.style.width;textLayerDiv.style.height=canvas.style.height;if(this.annotationLayer){div.insertBefore(textLayerDiv,this.annotationLayer)}else{div.appendChild(textLayerDiv)}}var textLayer=this.textLayer=textLayerDiv?new TextLayerBuilder({textLayerDiv:textLayerDiv,pageIndex:this.id-1,lastScrollSource:PDFView,viewport:this.viewport,isViewerInPresentationMode:PresentationMode.active,findController:PDFView.findController}):null;ctx._scaleX=outputScale.sx;ctx._scaleY=outputScale.sy;if(outputScale.scaled){ctx.scale(outputScale.sx,outputScale.sy)}var self=this;function pageViewDrawCallback(error){if(renderTask===self.renderTask){self.renderTask=null}if(error==="cancelled"){return}self.renderingState=RenderingStates.FINISHED;if(self.loadingIconDiv){div.removeChild(self.loadingIconDiv);delete self.loadingIconDiv}if(self.zoomLayer){div.removeChild(self.zoomLayer);self.zoomLayer=null}if(error){PDFView.error(mozL10n.get("rendering_error",null,"An error occurred while rendering the page."),error)}self.stats=pdfPage.stats;self.updateStats();if(self.onAfterDraw){self.onAfterDraw()}var event=document.createEvent("CustomEvent");event.initCustomEvent("pagerender",true,true,{pageNumber:pdfPage.pageNumber});div.dispatchEvent(event);callback()}var renderContext={canvasContext:ctx,viewport:this.viewport,textLayer:textLayer,continueCallback:function pdfViewcContinueCallback(cont){if(PDFView.highestPriorityPage!=="page"+self.id){self.renderingState=RenderingStates.PAUSED;self.resume=function resumeCallback(){self.renderingState=RenderingStates.RUNNING;cont()};return}cont()}};var renderTask=this.renderTask=this.pdfPage.render(renderContext);this.renderTask.promise.then(function pdfPageRenderCallback(){pageViewDrawCallback(null);if(textLayer){self.getTextContent().then(function textContentResolved(textContent){textLayer.setTextContent(textContent)})}},function pdfPageRenderError(error){pageViewDrawCallback(error)});setupAnnotations(div,pdfPage,this.viewport);div.setAttribute("data-loaded",true);cache.push(this)};this.beforePrint=function pageViewBeforePrint(){var pdfPage=this.pdfPage;var viewport=pdfPage.getViewport(1);var PRINT_OUTPUT_SCALE=2;var canvas=document.createElement("canvas");canvas.width=Math.floor(viewport.width)*PRINT_OUTPUT_SCALE;canvas.height=Math.floor(viewport.height)*PRINT_OUTPUT_SCALE;canvas.style.width=PRINT_OUTPUT_SCALE*viewport.width+"pt";canvas.style.height=PRINT_OUTPUT_SCALE*viewport.height+"pt";var cssScale="scale("+1/PRINT_OUTPUT_SCALE+", "+1/PRINT_OUTPUT_SCALE+")";CustomStyle.setProp("transform",canvas,cssScale);CustomStyle.setProp("transformOrigin",canvas,"0% 0%");var printContainer=document.getElementById("printContainer");var canvasWrapper=document.createElement("div");canvasWrapper.style.width=viewport.width+"pt";canvasWrapper.style.height=viewport.height+"pt";canvasWrapper.appendChild(canvas);printContainer.appendChild(canvasWrapper);canvas.mozPrintCallback=function(obj){var ctx=obj.context;ctx.save();ctx.fillStyle="rgb(255, 255, 255)";ctx.fillRect(0,0,canvas.width,canvas.height);ctx.restore();ctx.scale(PRINT_OUTPUT_SCALE,PRINT_OUTPUT_SCALE);var renderContext={canvasContext:ctx,viewport:viewport,intent:"print"};pdfPage.render(renderContext).promise.then(function(){obj.done()},function(error){console.error(error);if("abort"in obj){obj.abort()}else{obj.done()}})}};this.updateStats=function pageViewUpdateStats(){if(!this.stats){return}if(PDFJS.pdfBug&&Stats.enabled){var stats=this.stats;Stats.add(this.id,stats)}}};var ThumbnailView=function thumbnailView(container,id,defaultViewport){var anchor=document.createElement("a");anchor.href=PDFView.getAnchorUrl("#page="+id);anchor.title=mozL10n.get("thumb_page_title",{page:id},"Page {{page}}");anchor.onclick=function stopNavigation(){PDFView.page=id;return false};this.pdfPage=undefined;this.viewport=defaultViewport;this.pdfPageRotate=defaultViewport.rotation;this.rotation=0;this.pageWidth=this.viewport.width;this.pageHeight=this.viewport.height;this.pageRatio=this.pageWidth/this.pageHeight;this.id=id;this.canvasWidth=98;this.canvasHeight=this.canvasWidth/this.pageWidth*this.pageHeight;this.scale=this.canvasWidth/this.pageWidth;var div=this.el=document.createElement("div");div.id="thumbnailContainer"+id;div.className="thumbnail";if(id===1){div.classList.add("selected")}var ring=document.createElement("div");ring.className="thumbnailSelectionRing";ring.style.width=this.canvasWidth+"px";ring.style.height=this.canvasHeight+"px";div.appendChild(ring);anchor.appendChild(div);container.appendChild(anchor);this.hasImage=false;this.renderingState=RenderingStates.INITIAL;this.setPdfPage=function thumbnailViewSetPdfPage(pdfPage){this.pdfPage=pdfPage;this.pdfPageRotate=pdfPage.rotate;var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=pdfPage.getViewport(1,totalRotation);this.update()};this.update=function thumbnailViewUpdate(rotation){if(rotation!==undefined){this.rotation=rotation}var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:totalRotation});this.pageWidth=this.viewport.width;this.pageHeight=this.viewport.height;this.pageRatio=this.pageWidth/this.pageHeight;this.canvasHeight=this.canvasWidth/this.pageWidth*this.pageHeight;this.scale=this.canvasWidth/this.pageWidth;div.removeAttribute("data-loaded");ring.textContent="";ring.style.width=this.canvasWidth+"px";ring.style.height=this.canvasHeight+"px";this.hasImage=false;this.renderingState=RenderingStates.INITIAL;this.resume=null};this.getPageDrawContext=function thumbnailViewGetPageDrawContext(){var canvas=document.createElement("canvas");canvas.id="thumbnail"+id;canvas.width=this.canvasWidth;canvas.height=this.canvasHeight;canvas.className="thumbnailImage";canvas.setAttribute("aria-label",mozL10n.get("thumb_page_canvas",{page:id},"Thumbnail of Page {{page}}"));div.setAttribute("data-loaded",true);ring.appendChild(canvas);var ctx=canvas.getContext("2d");ctx.save();ctx.fillStyle="rgb(255, 255, 255)";ctx.fillRect(0,0,this.canvasWidth,this.canvasHeight);ctx.restore();return ctx};this.drawingRequired=function thumbnailViewDrawingRequired(){return!this.hasImage};this.draw=function thumbnailViewDraw(callback){if(!this.pdfPage){var promise=PDFView.getPage(this.id);promise.then(function(pdfPage){this.setPdfPage(pdfPage);this.draw(callback)}.bind(this));return}if(this.renderingState!==RenderingStates.INITIAL){console.error("Must be in new state before drawing")}this.renderingState=RenderingStates.RUNNING;if(this.hasImage){callback();return}var self=this;var ctx=this.getPageDrawContext();var drawViewport=this.viewport.clone({scale:this.scale});var renderContext={canvasContext:ctx,viewport:drawViewport,continueCallback:function(cont){if(PDFView.highestPriorityPage!=="thumbnail"+self.id){self.renderingState=RenderingStates.PAUSED;self.resume=function(){self.renderingState=RenderingStates.RUNNING;cont()};return}cont()}};this.pdfPage.render(renderContext).promise.then(function pdfPageRenderCallback(){self.renderingState=RenderingStates.FINISHED;callback()},function pdfPageRenderError(error){self.renderingState=RenderingStates.FINISHED;callback()});this.hasImage=true};function getTempCanvas(width,height){var tempCanvas=ThumbnailView.tempImageCache;if(!tempCanvas){tempCanvas=document.createElement("canvas");ThumbnailView.tempImageCache=tempCanvas}tempCanvas.width=width;tempCanvas.height=height;return tempCanvas}this.setImage=function thumbnailViewSetImage(img){if(!this.pdfPage){var promise=PDFView.getPage(this.id);promise.then(function(pdfPage){this.setPdfPage(pdfPage);this.setImage(img)}.bind(this));return}if(this.hasImage||!img){return}this.renderingState=RenderingStates.FINISHED;var ctx=this.getPageDrawContext();var reducedImage=img;var reducedWidth=img.width;var reducedHeight=img.height;var MAX_SCALE_FACTOR=2;if(Math.max(img.width/ctx.canvas.width,img.height/ctx.canvas.height)>MAX_SCALE_FACTOR){reducedWidth>>=1;reducedHeight>>=1;reducedImage=getTempCanvas(reducedWidth,reducedHeight);var reducedImageCtx=reducedImage.getContext("2d");reducedImageCtx.drawImage(img,0,0,img.width,img.height,0,0,reducedWidth,reducedHeight);
while(Math.max(reducedWidth/ctx.canvas.width,reducedHeight/ctx.canvas.height)>MAX_SCALE_FACTOR){reducedImageCtx.drawImage(reducedImage,0,0,reducedWidth,reducedHeight,0,0,reducedWidth>>1,reducedHeight>>1);reducedWidth>>=1;reducedHeight>>=1}}ctx.drawImage(reducedImage,0,0,reducedWidth,reducedHeight,0,0,ctx.canvas.width,ctx.canvas.height);this.hasImage=true}};ThumbnailView.tempImageCache=null;var FIND_SCROLL_OFFSET_TOP=-50;var FIND_SCROLL_OFFSET_LEFT=-400;var MAX_TEXT_DIVS_TO_RENDER=1e5;var RENDER_DELAY=200;var NonWhitespaceRegexp=/\S/;function isAllWhitespace(str){return!NonWhitespaceRegexp.test(str)}var TextLayerBuilder=function TextLayerBuilderClosure(){function TextLayerBuilder(options){this.textLayerDiv=options.textLayerDiv;this.layoutDone=false;this.divContentDone=false;this.pageIdx=options.pageIndex;this.matches=[];this.lastScrollSource=options.lastScrollSource||null;this.viewport=options.viewport;this.isViewerInPresentationMode=options.isViewerInPresentationMode;this.textDivs=[];this.findController=options.findController||null}TextLayerBuilder.prototype={renderLayer:function TextLayerBuilder_renderLayer(){var textLayerFrag=document.createDocumentFragment();var textDivs=this.textDivs;var textDivsLength=textDivs.length;var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");if(textDivsLength>MAX_TEXT_DIVS_TO_RENDER){return}var lastFontSize;var lastFontFamily;for(var i=0;i<textDivsLength;i++){var textDiv=textDivs[i];if(textDiv.dataset.isWhitespace!==undefined){continue}var fontSize=textDiv.style.fontSize;var fontFamily=textDiv.style.fontFamily;if(fontSize!==lastFontSize||fontFamily!==lastFontFamily){ctx.font=fontSize+" "+fontFamily;lastFontSize=fontSize;lastFontFamily=fontFamily}var width=ctx.measureText(textDiv.textContent).width;if(width>0){textLayerFrag.appendChild(textDiv);var textScale=textDiv.dataset.canvasWidth/width;var rotation=textDiv.dataset.angle;var transform="scale("+textScale+", 1)";if(rotation){transform="rotate("+rotation+"deg) "+transform}CustomStyle.setProp("transform",textDiv,transform);CustomStyle.setProp("transformOrigin",textDiv,"0% 0%")}}this.textLayerDiv.appendChild(textLayerFrag);this.renderingDone=true;this.updateMatches()},setupRenderLayoutTimer:function TextLayerBuilder_setupRenderLayoutTimer(){var self=this;var lastScroll=this.lastScrollSource===null?0:this.lastScrollSource.lastScroll;if(Date.now()-lastScroll>RENDER_DELAY){this.renderLayer()}else{if(this.renderTimer){clearTimeout(this.renderTimer)}this.renderTimer=setTimeout(function(){self.setupRenderLayoutTimer()},RENDER_DELAY)}},appendText:function TextLayerBuilder_appendText(geom,styles){var style=styles[geom.fontName];var textDiv=document.createElement("div");this.textDivs.push(textDiv);if(isAllWhitespace(geom.str)){textDiv.dataset.isWhitespace=true;return}var tx=PDFJS.Util.transform(this.viewport.transform,geom.transform);var angle=Math.atan2(tx[1],tx[0]);if(style.vertical){angle+=Math.PI/2}var fontHeight=Math.sqrt(tx[2]*tx[2]+tx[3]*tx[3]);var fontAscent=fontHeight;if(style.ascent){fontAscent=style.ascent*fontAscent}else if(style.descent){fontAscent=(1+style.descent)*fontAscent}var left;var top;if(angle===0){left=tx[4];top=tx[5]-fontAscent}else{left=tx[4]+fontAscent*Math.sin(angle);top=tx[5]-fontAscent*Math.cos(angle)}textDiv.style.left=left+"px";textDiv.style.top=top+"px";textDiv.style.fontSize=fontHeight+"px";textDiv.style.fontFamily=style.fontFamily;textDiv.textContent=geom.str;if(PDFJS.pdfBug){textDiv.dataset.fontName=geom.fontName}if(angle!==0){textDiv.dataset.angle=angle*(180/Math.PI)}if(style.vertical){textDiv.dataset.canvasWidth=geom.height*this.viewport.scale}else{textDiv.dataset.canvasWidth=geom.width*this.viewport.scale}},setTextContent:function TextLayerBuilder_setTextContent(textContent){this.textContent=textContent;var textItems=textContent.items;for(var i=0,len=textItems.length;i<len;i++){this.appendText(textItems[i],textContent.styles)}this.divContentDone=true;this.setupRenderLayoutTimer()},convertMatches:function TextLayerBuilder_convertMatches(matches){var i=0;var iIndex=0;var bidiTexts=this.textContent.items;var end=bidiTexts.length-1;var queryLen=this.findController===null?0:this.findController.state.query.length;var ret=[];for(var m=0,len=matches.length;m<len;m++){var matchIdx=matches[m];while(i!==end&&matchIdx>=iIndex+bidiTexts[i].str.length){iIndex+=bidiTexts[i].str.length;i++}if(i===bidiTexts.length){console.error("Could not find a matching mapping")}var match={begin:{divIdx:i,offset:matchIdx-iIndex}};matchIdx+=queryLen;while(i!==end&&matchIdx>iIndex+bidiTexts[i].str.length){iIndex+=bidiTexts[i].str.length;i++}match.end={divIdx:i,offset:matchIdx-iIndex};ret.push(match)}return ret},renderMatches:function TextLayerBuilder_renderMatches(matches){if(matches.length===0){return}var bidiTexts=this.textContent.items;var textDivs=this.textDivs;var prevEnd=null;var isSelectedPage=this.findController===null?false:this.pageIdx===this.findController.selected.pageIdx;var selectedMatchIdx=this.findController===null?-1:this.findController.selected.matchIdx;var highlightAll=this.findController===null?false:this.findController.state.highlightAll;var infinity={divIdx:-1,offset:undefined};function beginText(begin,className){var divIdx=begin.divIdx;textDivs[divIdx].textContent="";appendTextToDiv(divIdx,0,begin.offset,className)}function appendTextToDiv(divIdx,fromOffset,toOffset,className){var div=textDivs[divIdx];var content=bidiTexts[divIdx].str.substring(fromOffset,toOffset);var node=document.createTextNode(content);if(className){var span=document.createElement("span");span.className=className;span.appendChild(node);div.appendChild(span);return}div.appendChild(node)}var i0=selectedMatchIdx,i1=i0+1;if(highlightAll){i0=0;i1=matches.length}else if(!isSelectedPage){return}for(var i=i0;i<i1;i++){var match=matches[i];var begin=match.begin;var end=match.end;var isSelected=isSelectedPage&&i===selectedMatchIdx;var highlightSuffix=isSelected?" selected":"";if(isSelected&&!this.isViewerInPresentationMode){scrollIntoView(textDivs[begin.divIdx],{top:FIND_SCROLL_OFFSET_TOP,left:FIND_SCROLL_OFFSET_LEFT})}if(!prevEnd||begin.divIdx!==prevEnd.divIdx){if(prevEnd!==null){appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset)}beginText(begin)}else{appendTextToDiv(prevEnd.divIdx,prevEnd.offset,begin.offset)}if(begin.divIdx===end.divIdx){appendTextToDiv(begin.divIdx,begin.offset,end.offset,"highlight"+highlightSuffix)}else{appendTextToDiv(begin.divIdx,begin.offset,infinity.offset,"highlight begin"+highlightSuffix);for(var n0=begin.divIdx+1,n1=end.divIdx;n0<n1;n0++){textDivs[n0].className="highlight middle"+highlightSuffix}beginText(end,"highlight end"+highlightSuffix)}prevEnd=end}if(prevEnd){appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset)}},updateMatches:function TextLayerBuilder_updateMatches(){if(!this.renderingDone){return}var matches=this.matches;var textDivs=this.textDivs;var bidiTexts=this.textContent.items;var clearedUntilDivIdx=-1;for(var i=0,len=matches.length;i<len;i++){var match=matches[i];var begin=Math.max(clearedUntilDivIdx,match.begin.divIdx);for(var n=begin,end=match.end.divIdx;n<=end;n++){var div=textDivs[n];div.textContent=bidiTexts[n].str;div.className=""}clearedUntilDivIdx=match.end.divIdx+1}if(this.findController===null||!this.findController.active){return}this.matches=this.convertMatches(this.findController===null?[]:this.findController.pageMatches[this.pageIdx]||[]);this.renderMatches(this.matches)}};return TextLayerBuilder}();var DocumentOutlineView=function documentOutlineView(outline){var outlineView=document.getElementById("outlineView");while(outlineView.firstChild){outlineView.removeChild(outlineView.firstChild)}if(!outline){if(!outlineView.classList.contains("hidden")){PDFView.switchSidebarView("thumbs")}return}function bindItemLink(domObj,item){domObj.href=PDFView.getDestinationHash(item.dest);domObj.onclick=function documentOutlineViewOnclick(e){PDFView.navigateTo(item.dest);return false}}var queue=[{parent:outlineView,items:outline}];while(queue.length>0){var levelData=queue.shift();var i,n=levelData.items.length;for(i=0;i<n;i++){var item=levelData.items[i];var div=document.createElement("div");div.className="outlineItem";var a=document.createElement("a");bindItemLink(a,item);a.textContent=item.title;div.appendChild(a);if(item.items.length>0){var itemsDiv=document.createElement("div");itemsDiv.className="outlineItems";div.appendChild(itemsDiv);queue.push({parent:itemsDiv,items:item.items})}levelData.parent.appendChild(div)}}};var DocumentAttachmentsView=function documentAttachmentsView(attachments){var attachmentsView=document.getElementById("attachmentsView");while(attachmentsView.firstChild){attachmentsView.removeChild(attachmentsView.firstChild)}if(!attachments){if(!attachmentsView.classList.contains("hidden")){PDFView.switchSidebarView("thumbs")}return}function bindItemLink(domObj,item){domObj.onclick=function documentAttachmentsViewOnclick(e){var downloadManager=new DownloadManager;downloadManager.downloadData(item.content,getFileName(item.filename),"");return false}}var names=Object.keys(attachments).sort(function(a,b){return a.toLowerCase().localeCompare(b.toLowerCase())});for(var i=0,ii=names.length;i<ii;i++){var item=attachments[names[i]];var div=document.createElement("div");div.className="attachmentsItem";var button=document.createElement("button");bindItemLink(button,item);button.textContent=getFileName(item.filename);div.appendChild(button);attachmentsView.appendChild(div)}};function webViewerLoad(evt){PDFView.initialize().then(webViewerInitialized)}function webViewerInitialized(){var params=PDFView.parseQueryString(document.location.search.substring(1));var file="file"in params?params.file:document.getElementById("filename_store").innerHTML;var fileInput=document.createElement("input");fileInput.id="fileInput";fileInput.className="fileInput";fileInput.setAttribute("type","file");fileInput.oncontextmenu=noContextMenuHandler;document.body.appendChild(fileInput);if(!window.File||!window.FileReader||!window.FileList||!window.Blob){}else{document.getElementById("fileInput").value=null}var hash=document.location.hash.substring(1);var hashParams=PDFView.parseQueryString(hash);if("disableWorker"in hashParams){PDFJS.disableWorker=hashParams["disableWorker"]==="true"}if("disableRange"in hashParams){PDFJS.disableRange=hashParams["disableRange"]==="true"}if("disableAutoFetch"in hashParams){PDFJS.disableAutoFetch=hashParams["disableAutoFetch"]==="true"}if("disableFontFace"in hashParams){PDFJS.disableFontFace=hashParams["disableFontFace"]==="true"}if("disableHistory"in hashParams){PDFJS.disableHistory=hashParams["disableHistory"]==="true"}if("webgl"in hashParams){PDFJS.disableWebGL=hashParams["webgl"]!=="true"}if("useOnlyCssZoom"in hashParams){PDFJS.useOnlyCssZoom=hashParams["useOnlyCssZoom"]==="true"}if("verbosity"in hashParams){PDFJS.verbosity=hashParams["verbosity"]|0}if("ignoreCurrentPositionOnZoom"in hashParams){IGNORE_CURRENT_POSITION_ON_ZOOM=hashParams["ignoreCurrentPositionOnZoom"]==="true"}var locale=PDFJS.locale||navigator.language;if("locale"in hashParams){locale=hashParams["locale"]}mozL10n.setLanguage(locale);if("textLayer"in hashParams){switch(hashParams["textLayer"]){case"off":PDFJS.disableTextLayer=true;break;case"visible":case"shadow":case"hover":var viewer=document.getElementById("viewer");viewer.classList.add("textLayer-"+hashParams["textLayer"]);break}}if("pdfBug"in hashParams){PDFJS.pdfBug=true;var pdfBug=hashParams["pdfBug"];var enabled=pdfBug.split(",");PDFBug.enable(enabled);PDFBug.init()}if(!PDFView.supportsPrinting){document.getElementById("print").classList.add("hidden");document.getElementById("secondaryPrint").classList.add("hidden")}if(!PDFView.supportsFullscreen){document.getElementById("presentationMode").classList.add("hidden");document.getElementById("secondaryPresentationMode").classList.add("hidden")}if(PDFView.supportsIntegratedFind){document.getElementById("viewFind").classList.add("hidden")}PDFJS.UnsupportedManager.listen(PDFView.fallback.bind(PDFView));document.getElementById("scaleSelect").oncontextmenu=noContextMenuHandler;var mainContainer=document.getElementById("mainContainer");var outerContainer=document.getElementById("outerContainer");mainContainer.addEventListener("transitionend",function(e){if(e.target===mainContainer){var event=document.createEvent("UIEvents");event.initUIEvent("resize",false,false,window,0);window.dispatchEvent(event);outerContainer.classList.remove("sidebarMoving")}},true);document.getElementById("sidebarToggle").addEventListener("click",function(){this.classList.toggle("toggled");outerContainer.classList.add("sidebarMoving");outerContainer.classList.toggle("sidebarOpen");PDFView.sidebarOpen=outerContainer.classList.contains("sidebarOpen");PDFView.renderHighestPriority()});document.getElementById("viewThumbnail").addEventListener("click",function(){PDFView.switchSidebarView("thumbs")});document.getElementById("viewOutline").addEventListener("click",function(){PDFView.switchSidebarView("outline")});document.getElementById("viewAttachments").addEventListener("click",function(){PDFView.switchSidebarView("attachments")});document.getElementById("previous").addEventListener("click",function(){PDFView.page--});document.getElementById("next").addEventListener("click",function(){PDFView.page++});document.getElementById("zoomIn").addEventListener("click",function(){PDFView.zoomIn()});document.getElementById("zoomOut").addEventListener("click",function(){PDFView.zoomOut()});document.getElementById("pageNumber").addEventListener("click",function(){this.select()});document.getElementById("pageNumber").addEventListener("change",function(){PDFView.page=this.value|0;if(this.value!==(this.value|0).toString()){this.value=PDFView.page}});document.getElementById("scaleSelect").addEventListener("change",function(){PDFView.setScale(this.value)});document.getElementById("presentationMode").addEventListener("click",SecondaryToolbar.presentationModeClick.bind(SecondaryToolbar));document.getElementById("print").addEventListener("click",SecondaryToolbar.printClick.bind(SecondaryToolbar));document.getElementById("download").addEventListener("click",SecondaryToolbar.downloadClick.bind(SecondaryToolbar));if(file&&file.lastIndexOf("file:",0)===0){PDFView.setTitleUsingUrl(file);var xhr=new XMLHttpRequest;xhr.onload=function(){PDFView.open(new Uint8Array(xhr.response),0)};try{xhr.open("GET",file);xhr.responseType="arraybuffer";xhr.send()}catch(e){PDFView.error(mozL10n.get("loading_error",null,"An error occurred while loading the PDF."),e)}return}if(file){PDFView.open(file,0)}}document.addEventListener("DOMContentLoaded",webViewerLoad,true);function updateViewarea(){if(!PDFView.initialized){return}var visible=PDFView.getVisiblePages();var visiblePages=visible.views;if(visiblePages.length===0){return}var suggestedCacheSize=Math.max(DEFAULT_CACHE_SIZE,2*visiblePages.length+1);cache.resize(suggestedCacheSize);PDFView.renderHighestPriority(visible);var currentId=PDFView.page;var firstPage=visible.first;for(var i=0,ii=visiblePages.length,stillFullyVisible=false;i<ii;++i){var page=visiblePages[i];if(page.percent<100){break}if(page.id===PDFView.page){stillFullyVisible=true;break}}if(!stillFullyVisible){currentId=visiblePages[0].id}if(!PresentationMode.active){updateViewarea.inProgress=true;PDFView.page=currentId;updateViewarea.inProgress=false}var currentScale=PDFView.currentScale;var currentScaleValue=PDFView.currentScaleValue;var normalizedScaleValue=parseFloat(currentScaleValue)===currentScale?Math.round(currentScale*1e4)/100:currentScaleValue;var pageNumber=firstPage.id;var pdfOpenParams="#page="+pageNumber;pdfOpenParams+="&zoom="+normalizedScaleValue;var currentPage=PDFView.pages[pageNumber-1];var container=PDFView.container;var topLeft=currentPage.getPagePoint(container.scrollLeft-firstPage.x,container.scrollTop-firstPage.y);var intLeft=Math.round(topLeft[0]);var intTop=Math.round(topLeft[1]);pdfOpenParams+=","+intLeft+","+intTop;if(PresentationMode.active||PresentationMode.switchInProgress){PDFView.currentPosition=null}else{PDFView.currentPosition={page:pageNumber,left:intLeft,top:intTop}}PDFView.store.initializedPromise.then(function(){PDFView.store.setMultiple({exists:true,page:pageNumber,zoom:normalizedScaleValue,scrollLeft:intLeft,scrollTop:intTop}).catch(function(){})});var href=PDFView.getAnchorUrl(pdfOpenParams);PDFHistory.updateCurrentBookmark(pdfOpenParams,pageNumber)}window.addEventListener("resize",function webViewerResize(evt){if(PDFView.initialized&&(document.getElementById("pageWidthOption").selected||document.getElementById("pageFitOption").selected||document.getElementById("pageAutoOption").selected)){PDFView.setScale(document.getElementById("scaleSelect").value)}updateViewarea();SecondaryToolbar.setMaxHeight(PDFView.container)});window.addEventListener("hashchange",function webViewerHashchange(evt){if(PDFHistory.isHashChangeUnlocked){PDFView.setHash(document.location.hash.substring(1))}});window.addEventListener("change",function webViewerChange(evt){var files=evt.target.files;if(!files||files.length===0){return}var file=files[0];if(!PDFJS.disableCreateObjectURL&&typeof URL!=="undefined"&&URL.createObjectURL){PDFView.open(URL.createObjectURL(file),0)}else{var fileReader=new FileReader;fileReader.onload=function webViewerChangeFileReaderOnload(evt){var buffer=evt.target.result;var uint8Array=new Uint8Array(buffer);PDFView.open(uint8Array,0)};fileReader.readAsArrayBuffer(file)}PDFView.setTitleUsingUrl(file.name);document.getElementById("download").setAttribute("hidden","true");document.getElementById("secondaryDownload").setAttribute("hidden","true")},true);function selectScaleOption(value){var options=document.getElementById("scaleSelect").options;var predefinedValueFound=false;for(var i=0;i<options.length;i++){var option=options[i];if(option.value!==value){option.selected=false;continue}option.selected=true;predefinedValueFound=true}return predefinedValueFound}window.addEventListener("localized",function localized(evt){document.getElementsByTagName("html")[0].dir=mozL10n.getDirection();PDFView.animationStartedPromise.then(function(){var container=document.getElementById("scaleSelectContainer");if(container.clientWidth>0){var select=document.getElementById("scaleSelect");select.setAttribute("style","min-width: inherit;");var width=select.clientWidth+SCALE_SELECT_CONTAINER_PADDING;select.setAttribute("style","min-width: "+(width+SCALE_SELECT_PADDING)+"px;");container.setAttribute("style","min-width: "+width+"px; "+"max-width: "+width+"px;")}SecondaryToolbar.setMaxHeight(PDFView.container)})},true);window.addEventListener("scalechange",function scalechange(evt){document.getElementById("zoomOut").disabled=evt.scale===MIN_SCALE;document.getElementById("zoomIn").disabled=evt.scale===MAX_SCALE;var customScaleOption=document.getElementById("customScaleOption");customScaleOption.selected=false;if(!evt.resetAutoSettings&&(document.getElementById("pageWidthOption").selected||document.getElementById("pageFitOption").selected||document.getElementById("pageAutoOption").selected)){updateViewarea();return}var predefinedValueFound=selectScaleOption(""+evt.scale);if(!predefinedValueFound){customScaleOption.textContent=Math.round(evt.scale*1e4)/100+"%";customScaleOption.selected=true}updateViewarea()},true);window.addEventListener("pagechange",function pagechange(evt){var page=evt.pageNumber;if(PDFView.previousPageNumber!==page){document.getElementById("pageNumber").value=page;var selected=document.querySelector(".thumbnail.selected");if(selected){selected.classList.remove("selected")}var thumbnail=document.getElementById("thumbnailContainer"+page);thumbnail.classList.add("selected");var visibleThumbs=PDFView.getVisibleThumbs();var numVisibleThumbs=visibleThumbs.views.length;if(numVisibleThumbs>0){var first=visibleThumbs.first.id;var last=numVisibleThumbs>1?visibleThumbs.last.id:first;if(page<=first||page>=last){scrollIntoView(thumbnail,{top:THUMBNAIL_SCROLL_MARGIN})}}}var numPages=PDFView.pages.length;document.getElementById("previous").disabled=page<=1;document.getElementById("next").disabled=page>=numPages;document.getElementById("firstPage").disabled=page<=1;document.getElementById("lastPage").disabled=page>=numPages},true);function handleMouseWheel(evt){var MOUSE_WHEEL_DELTA_FACTOR=40;var ticks=evt.type==="DOMMouseScroll"?-evt.detail:evt.wheelDelta/MOUSE_WHEEL_DELTA_FACTOR;var direction=ticks<0?"zoomOut":"zoomIn";if(evt.ctrlKey){evt.preventDefault();PDFView[direction](Math.abs(ticks))}else if(PresentationMode.active){PDFView.mouseScroll(ticks*MOUSE_WHEEL_DELTA_FACTOR)}}window.addEventListener("DOMMouseScroll",handleMouseWheel);window.addEventListener("mousewheel",handleMouseWheel);window.addEventListener("click",function click(evt){if(!PresentationMode.active){if(SecondaryToolbar.opened&&PDFView.container.contains(evt.target)){SecondaryToolbar.close()}}else if(evt.button===0){evt.preventDefault()}},false);window.addEventListener("keydown",function keydown(evt){if(OverlayManager.active){return}var handled=false;var cmd=(evt.ctrlKey?1:0)|(evt.altKey?2:0)|(evt.shiftKey?4:0)|(evt.metaKey?8:0);if(cmd===1||cmd===8||cmd===5||cmd===12){switch(evt.keyCode){case 70:if(!PDFView.supportsIntegratedFind){PDFView.findBar.open();handled=true}break;case 71:if(!PDFView.supportsIntegratedFind){PDFView.findBar.dispatchEvent("again",cmd===5||cmd===12);handled=true}break;case 61:case 107:case 187:case 171:PDFView.zoomIn();handled=true;break;case 173:case 109:case 189:PDFView.zoomOut();handled=true;break;case 48:case 96:setTimeout(function(){PDFView.setScale(DEFAULT_SCALE,true)});handled=false;break}}if(cmd===1||cmd===8){switch(evt.keyCode){case 83:PDFView.download();handled=true;break}}if(cmd===3||cmd===10){switch(evt.keyCode){case 80:SecondaryToolbar.presentationModeClick();handled=true;break;case 71:document.getElementById("pageNumber").select();handled=true;break}}if(handled){evt.preventDefault();return}var curElement=document.activeElement||document.querySelector(":focus");var curElementTagName=curElement&&curElement.tagName.toUpperCase();if(curElementTagName==="INPUT"||curElementTagName==="TEXTAREA"||curElementTagName==="SELECT"){if(evt.keyCode!==27){return}}if(cmd===0){switch(evt.keyCode){case 38:case 33:case 8:if(!PresentationMode.active&&PDFView.currentScaleValue!=="page-fit"){break}case 37:if(PDFView.isHorizontalScrollbarEnabled){break}case 75:case 80:PDFView.page--;handled=true;break;case 27:if(SecondaryToolbar.opened){SecondaryToolbar.close();handled=true}if(!PDFView.supportsIntegratedFind&&PDFView.findBar.opened){PDFView.findBar.close();handled=true}break;case 40:case 34:case 32:if(!PresentationMode.active&&PDFView.currentScaleValue!=="page-fit"){break}case 39:if(PDFView.isHorizontalScrollbarEnabled){break}case 74:case 78:PDFView.page++;handled=true;break;case 36:if(PresentationMode.active||PDFView.page>1){PDFView.page=1;handled=true}break;case 35:if(PresentationMode.active||PDFView.pdfDocument&&PDFView.page<PDFView.pdfDocument.numPages){PDFView.page=PDFView.pdfDocument.numPages;handled=true}break;case 72:if(!PresentationMode.active){HandTool.toggle()}break;case 82:PDFView.rotatePages(90);break}}if(cmd===4){switch(evt.keyCode){case 32:if(!PresentationMode.active&&PDFView.currentScaleValue!=="page-fit"){break}PDFView.page--;handled=true;break;case 82:PDFView.rotatePages(-90);break}}if(!handled&&!PresentationMode.active){if(evt.keyCode>=33&&evt.keyCode<=40&&!PDFView.container.contains(curElement)){PDFView.container.focus()}if(evt.keyCode===32&&curElementTagName!=="BUTTON"){if(!PDFView.container.contains(curElement)){PDFView.container.focus()}}}if(cmd===2){switch(evt.keyCode){case 37:if(PresentationMode.active){PDFHistory.back();handled=true}break;case 39:if(PresentationMode.active){PDFHistory.forward();handled=true}break}}if(handled){evt.preventDefault();PDFView.clearMouseScrollState()}});window.addEventListener("beforeprint",function beforePrint(evt){PDFView.beforePrint()});window.addEventListener("afterprint",function afterPrint(evt){PDFView.afterPrint()});(function animationStartedClosure(){PDFView.animationStartedPromise=new Promise(function(resolve){window.requestAnimationFrame(resolve)})})();